webpackJsonp([275],{1611:function(t,e,i){"use strict";var s=i(1),a=i(209),n=i(207),o=i(208),l={rule_name:"",type:1,cate:1,credit:0,enable:1,rule:""};e.a={mixins:[a.a,n.a,o.a],data:function(){return{info:s.b.copy(l)}},methods:{delReviewItem:function(t){this.info.rule.splice(t,1)},addReviewItem:function(){for(var t=0,e=[],i=0,s=this.info.rule.length;i<s;i++){var a=this.info.rule[i];e.push(a.star),a.star>t&&(t=a.star)}if(t<5&&this.info.rule.unshift({credit:0,star:5}),5==t)for(var n=5;n>0;n--){var o=e.indexOf(n);if(-1==o){this.info.rule.splice(t-n,0,{credit:0,star:n});break}}},save:function(){var t=this;this.$rest("credit_rules").add_url_param(this.info.cru_id).put(this.info).success(function(e){t.$Message.success("规则编辑成功"),t.$emit("save"),t.close()}).error(function(e){t.$Message.error(e.body.message)})}},computed:{text:function(){return"attendance"==this.info.hook_action?"每出勤1次，":"absence"==this.info.hook_action?"每缺勤1次，":"leave"==this.info.hook_action?"每请假1次，":void 0}}}},2213:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Modal",{directives:[{name:"drag-modal",rawName:"v-drag-modal"}],attrs:{title:t.modal$.title,"mask-closable":!1,width:"500"},model:{value:t.modal$.show,callback:function(e){t.$set(t.modal$,"show",e)},expression:"modal$.show"}},["review"==t.info.hook_action?[i("table",{staticClass:"modal-table"},[i("thead",[i("tr",[i("th",[i("div",{staticClass:"ivu-table-cell"},[t._v("星级")])]),t._v(" "),i("th",[i("div",{staticClass:"ivu-table-cell"},[t._v("加消费积分")])]),t._v(" "),i("th",[i("div",{staticClass:"ivu-table-cell"},[t._v("操作")])])])]),t._v(" "),i("tbody",t._l(t.info.rule,function(e,s){return i("tr",[i("td",[i("div",{staticClass:"ivu-table-cell"},[t._v(t._s(e.star)+"星")])]),t._v(" "),i("td",[i("div",{staticClass:"ivu-table-cell"},[i("InputNumber",{attrs:{min:0},model:{value:e.credit,callback:function(i){t.$set(e,"credit",i)},expression:"item.credit"}}),t._v(" 分\n\t\t\t\t\t\t")],1)]),t._v(" "),i("td",[i("div",{staticClass:"ivu-table-cell"},[i("Button",{attrs:{type:"ghost",size:"small",shape:"circle",icon:"ios-trash"},on:{click:function(e){t.delReviewItem(s)}}})],1)])])}))]),t._v(" "),t.info.rule.length<5?i("Button",{staticClass:"mt-3 ml-3",attrs:{type:"text",size:"small"},on:{click:t.addReviewItem}},[t._v("添加...")]):t._e()]:i("div",{staticStyle:{padding:"20px 0px 30px 30px"}},["order_pay"==t.info.hook_action?[t._v("\n\t\t\t每缴费 \n\t\t\t"),i("InputNumber",{attrs:{min:0},model:{value:t.info.rule.amount,callback:function(e){t.$set(t.info.rule,"amount",e)},expression:"info.rule.amount"}}),t._v(" 元，\n\t\t\t加消费积分 \n\t\t\t"),i("InputNumber",{attrs:{min:0},model:{value:t.info.rule.credit,callback:function(e){t.$set(t.info.rule,"credit",e)},expression:"info.rule.credit"}}),t._v(" 分\n\t\t")]:[t._v("\n\t\t\t"+t._s(t.text)+t._s(1==t.info.type?"加":"减")+"学习积分 \n\t\t\t"),i("InputNumber",{attrs:{min:0},model:{value:t.info.credit,callback:function(e){t.$set(t.info,"credit",e)},expression:"info.credit"}}),t._v(" 分\n\t\t")]],2),t._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{type:"ghost"},on:{click:t.close}},[t._v("取消")]),t._v(" "),i("Button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("确定")])],1)],2)},a=[];s._withStripped=!0;var n={render:s,staticRenderFns:a};e.a=n},418:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(1611),a=i(2213),n=i(11),o=n(s.a,a.a,!1,null,null,null);o.options.__file="src/views/business/student/integral/builtin-info-modal.vue",e.default=o.exports}});