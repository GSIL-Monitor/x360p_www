{"version":3,"sources":["webpack:///static/js/17.18fbd20b6d28be88ddc7.js","webpack:///./src/views/my/setting.vue?a04b","webpack:///./src/views/my/setting.vue?0198","webpack:///./src/views/my/setting.vue","webpack:///./src/views/my/setting.vue?29f1","webpack:///./src/views/my/setting.vue?dd66"],"names":["webpackJsonp","CtF5","module","exports","__webpack_require__","push","i","version","sources","names","mappings","file","sourceRoot","LSW6","__webpack_exports__","injectStyle","ssrContext","Object","defineProperty","value","util","common_mixin","cell","group","popup","x_input","x_button","emptyObject","name","newname","mobile","newmobile","vcode","oldpassword","password","repassword","setting","mixins","components","Cell","Popup","Group","XInput","XButton","data","popup_setting","action","tId","send","text","loading","user","copy","mounted","this","init_data","methods","sendCapt","checkTel","getCapt","_this","time","setInterval","clearInterval","$rest","post","type","success","response","error","alert","body","message","tel","test","show_popup","hide_popup","window","edit_profile","_this2","params","$http","then","$store","commit","toast","catch","console","log","user_info","state","info","logout","_this3","get","$router","path","$Message","computed","required","length","render","_vm","_h","$createElement","_c","_self","attrs","title","is-link","nativeOn","click","$event","model","callback","$$v","$set","expression","_v","staticClass","slot","_s","style","top","headerHeight","height","position","placeholder","_e","mini","disabled","staticRenderFns","esExports","my_setting","normalizeComponent","__vue_styles__","Component","hBI3","content","locals"],"mappings":"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","file":"static/js/17.18fbd20b6d28be88ddc7.js","sourcesContent":["webpackJsonp([17],{\n\n/***/ \"CtF5\":\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(\"BkJT\")(true);\n// imports\n\n\n// module\nexports.push([module.i, \"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\", \"\", {\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"file\":\"setting.vue\",\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ \"LSW6\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n// EXTERNAL MODULE: ./src/libs/util.js\nvar util = __webpack_require__(\"TVG1\");\n\n// EXTERNAL MODULE: ./src/libs/common.mixin.js\nvar common_mixin = __webpack_require__(\"8Llf\");\n\n// EXTERNAL MODULE: ./node_modules/_vux@2.7.6@vux/src/components/cell/index.vue + 2 modules\nvar cell = __webpack_require__(\"aKkU\");\n\n// EXTERNAL MODULE: ./node_modules/_vux@2.7.6@vux/src/components/group/index.vue + 2 modules\nvar group = __webpack_require__(\"40+F\");\n\n// EXTERNAL MODULE: ./node_modules/_vux@2.7.6@vux/src/components/popup/index.vue + 2 modules\nvar popup = __webpack_require__(\"O0i/\");\n\n// EXTERNAL MODULE: ./node_modules/_vux@2.7.6@vux/src/components/x-input/index.vue + 2 modules\nvar x_input = __webpack_require__(\"1CMQ\");\n\n// EXTERNAL MODULE: ./node_modules/_vux@2.7.6@vux/src/components/x-button/index.vue + 2 modules\nvar x_button = __webpack_require__(\"7BY6\");\n\n// CONCATENATED MODULE: ./node_modules/_babel-loader@7.1.2@babel-loader/lib!./node_modules/_vux-loader@1.1.30@vux-loader/src/script-loader.js!./node_modules/_vue-loader@13.6.2@vue-loader/lib/selector.js?type=script&index=0!./src/views/my/setting.vue\n\n\n\n\n\n\n\n\n\nvar emptyObject = {\n  name: '',\n  newname: '',\n  mobile: '',\n  newmobile: '',\n  vcode: '',\n  oldpassword: '',\n  password: '',\n  repassword: ''\n};\n\n/* harmony default export */ var setting = ({\n  mixins: [common_mixin[\"a\" /* default */]],\n  components: {\n    Cell: cell[\"a\" /* default */],\n    Popup: popup[\"a\" /* default */],\n    Group: group[\"a\" /* default */],\n    XInput: x_input[\"a\" /* default */],\n    XButton: x_button[\"a\" /* default */]\n  },\n  data: function data() {\n    return {\n      popup_setting: false,\n      action: '',\n      tId: null,\n      send: {\n        text: '发送验证码',\n        loading: false\n      },\n      user: util[\"b\" /* default */].copy(emptyObject)\n    };\n  },\n  mounted: function mounted() {\n    this.init_data();\n  },\n\n  methods: {\n    sendCapt: function sendCapt() {\n      if (!this.checkTel()) {\n        return false;\n      }\n      this.getCapt();\n    },\n    getCapt: function getCapt() {\n      var _this = this;\n\n      var time = 59;\n      if (this.send.loading) {\n        return false;\n      }\n      this.send = { loading: true, text: '60s' };\n      this.tId = setInterval(function () {\n        if (time < 10) {\n          time = '0' + time;\n        }\n        _this.send.text = time + 's';\n        time--;\n        if (time < 0) {\n          clearInterval(_this.tId);\n          _this.send = { loading: false, text: '发送验证码' };\n        }\n      }, 1000);\n      this.$rest('open/vcode').post({ mobile: this.user.newmobile, type: 'change' }).success(function (response) {}).error(function (response) {\n        _this.alert('获取验证码失败', response.body.message);\n        clearInterval(_this.tId);\n        _this.send = { loading: false, text: '发送验证码' };\n      });\n    },\n    checkTel: function checkTel() {\n      var tel = this.user.newmobile;\n      if (tel === '') {\n        this.alert('请先输入手机号', '手机号不能为空');\n        return false;\n      }\n      if (tel !== '' && !/^1[35789]{1}\\d{9}$/.test(tel)) {\n        this.alert('请重新输入手机号', '手机号格式不正确');\n        return false;\n      }\n      return true;\n    },\n    show_popup: function show_popup(action) {\n      this.action = action;\n      this.popup_setting = true;\n    },\n    hide_popup: function hide_popup() {\n\n      this.user.newmobile = '';\n      this.user.newname = this.user.name;\n      this.popup_setting = false;\n      this.send = {\n        text: '发送验证码',\n        loading: false\n      };\n      window.clearInterval(this.tId);\n    },\n    edit_profile: function edit_profile() {\n      var _this2 = this;\n\n      if (this.user.password === this.user.repassword) {\n        var params = { action: this.action };\n\n        if (this.action == 'edit_name') {\n          params.name = this.user.newname;\n        } else if (this.action == 'edit_mobile') {\n          params.mobile = this.user.newmobile;\n          params.vcode = this.user.vcode;\n        } else {\n          params.oldpassword = this.user.oldpassword;\n          params.password = this.user.password;\n          params.repassword = this.user.repassword;\n        }\n        this.$http.post('users/edit_profile', params).then(function (response) {\n          if (_this2.action == 'edit_name') {\n            _this2.user.name = _this2.user.newname;\n            _this2.$store.commit('updateUserInfo', { user: _this2.user, action: 'changeName' });\n          } else if (_this2.action == 'edit_mobile') {\n            _this2.user.mobile = _this2.user.newmobile;\n            _this2.$store.commit('updateUserInfo', { user: _this2.user, action: 'changeMobile' });\n          }\n          _this2.toast('修改成功', 'success');\n          _this2.hide_popup();\n        }).catch(function (response) {\n          console.log(response);\n          _this2.toast(response.body.message, 'warn');\n        });\n      } else {\n        this.toast('两次密码不一致', 'warn');\n      }\n    },\n    init_data: function init_data() {\n      var user_info = this.$store.state.user.info;\n      if (user_info) {\n        this.user.name = user_info.name;\n        this.user.newname = user_info.name;\n        this.user.mobile = user_info.mobile;\n      }\n    },\n    logout: function logout() {\n      var _this3 = this;\n\n      this.$http.get('logout').then(function (response) {\n        _this3.$store.commit('clearLoginInfo');\n        _this3.$router.push({ path: '../login' });\n      }).catch(function (response) {\n        _this3.$Message.error(response.body.message);\n      });\n    }\n  },\n  computed: {\n    required: function required() {\n      var user = this.user;\n      if (this.action == 'edit_name') {\n        return user.newname.length === 0;\n      } else if (this.action == 'edit_mobile') {\n        return !/^1[35789]{1}\\d{9}$/.test(user.newmobile) || user.vcode.length === 0;\n      } else {\n        return user.oldpassword.length === 0 || user.password.length === 0 || user.repassword.length === 0;\n      }\n    }\n  }\n});\n// CONCATENATED MODULE: ./node_modules/_vue-loader@13.6.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-6713d6c9\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vux-loader@1.1.30@vux-loader/src/before-template-compiler-loader.js!./node_modules/_vux-loader@1.1.30@vux-loader/src/template-loader.js!./node_modules/_vue-loader@13.6.2@vue-loader/lib/selector.js?type=template&index=0!./src/views/my/setting.vue\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('group',[_c('cell',{attrs:{\"title\":\"修改姓名\",\"is-link\":\"\"},nativeOn:{\"click\":function($event){_vm.show_popup('edit_name')}},model:{value:(_vm.user.name),callback:function ($$v) {_vm.$set(_vm.user, \"name\", $$v)},expression:\"user.name\"}})],1),_vm._v(\" \"),_c('group',[_c('cell',{attrs:{\"title\":\"手机号绑定\",\"is-link\":\"\"},nativeOn:{\"click\":function($event){_vm.show_popup('edit_mobile')}}},[_c('span',{staticClass:\"text-disable\",attrs:{\"slot\":\"value\"},slot:\"value\"},[_vm._v(_vm._s(_vm.user.mobile))])]),_vm._v(\" \"),_c('cell',{attrs:{\"title\":\"修改密码\",\"is-link\":\"\"},nativeOn:{\"click\":function($event){_vm.show_popup('resetpwd')}}})],1),_vm._v(\" \"),_c('group',[_c('cell',{attrs:{\"title\":\"退出\",\"is-link\":\"\"},nativeOn:{\"click\":function($event){_vm.logout($event)}}})],1),_vm._v(\" \"),_c('popup',{style:({top: _vm.headerHeight+'px'}),attrs:{\"height\":\"100%\",\"position\":\"bottom\"},model:{value:(_vm.popup_setting),callback:function ($$v) {_vm.popup_setting=$$v},expression:\"popup_setting\"}},[(_vm.action=='edit_name')?_c('group',[_c('x-input',{attrs:{\"title\":\"\",\"type\":\"text\",\"placeholder\":\"姓名 \",\"required\":true},model:{value:(_vm.user.newname),callback:function ($$v) {_vm.$set(_vm.user, \"newname\", $$v)},expression:\"user.newname\"}})],1):_vm._e(),_vm._v(\" \"),(_vm.action=='edit_mobile')?_c('group',[_c('x-input',{attrs:{\"title\":\"\",\"type\":\"text\",\"placeholder\":\"请输入手机号\",\"required\":true},model:{value:(_vm.user.newmobile),callback:function ($$v) {_vm.$set(_vm.user, \"newmobile\", $$v)},expression:\"user.newmobile\"}},[_c('x-button',{attrs:{\"slot\":\"right\",\"type\":\"primary\",\"mini\":\"\",\"disabled\":_vm.send.loading},nativeOn:{\"click\":function($event){_vm.sendCapt($event)}},slot:\"right\"},[_vm._v(_vm._s(_vm.send.text))])],1),_vm._v(\" \"),_c('x-input',{attrs:{\"title\":\"\",\"type\":\"text\",\"placeholder\":\"请输入验证码 \",\"required\":true},model:{value:(_vm.user.vcode),callback:function ($$v) {_vm.$set(_vm.user, \"vcode\", $$v)},expression:\"user.vcode\"}})],1):_vm._e(),_vm._v(\" \"),(_vm.action=='resetpwd')?_c('group',[_c('x-input',{attrs:{\"title\":\"\",\"required\":true,\"type\":\"password\",\"placeholder\":\"初始密码\"},model:{value:(_vm.user.oldpassword),callback:function ($$v) {_vm.$set(_vm.user, \"oldpassword\", $$v)},expression:\"user.oldpassword\"}}),_vm._v(\" \"),_c('x-input',{attrs:{\"title\":\"\",\"required\":true,\"type\":\"password\",\"placeholder\":\"新密码\"},model:{value:(_vm.user.password),callback:function ($$v) {_vm.$set(_vm.user, \"password\", $$v)},expression:\"user.password\"}}),_vm._v(\" \"),_c('x-input',{attrs:{\"title\":\"\",\"required\":true,\"type\":\"password\",\"placeholder\":\"再输一遍\"},model:{value:(_vm.user.repassword),callback:function ($$v) {_vm.$set(_vm.user, \"repassword\", $$v)},expression:\"user.repassword\"}})],1):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"pd-10\"},[_c('x-button',{staticClass:\"bg-blue\",attrs:{\"type\":\"primary\",\"disabled\":_vm.required},nativeOn:{\"click\":function($event){_vm.edit_profile($event)}}},[_vm._v(\"确认\")]),_vm._v(\" \"),_c('x-button',{nativeOn:{\"click\":function($event){_vm.hide_popup($event)}}},[_vm._v(\"取消\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ var my_setting = (esExports);\n// CONCATENATED MODULE: ./src/views/my/setting.vue\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"hBI3\")\n}\nvar normalizeComponent = __webpack_require__(\"8AGX\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  setting,\n  my_setting,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ var views_my_setting = __webpack_exports__[\"default\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"hBI3\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(\"CtF5\");\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(\"8bSs\")(\"400eb2be\", content, true);\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/17.18fbd20b6d28be88ddc7.js","exports = module.exports = require(\"../../../node_modules/_css-loader@0.28.7@css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\", \"\", {\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"file\":\"setting.vue\",\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_css-loader@0.28.7@css-loader?{\"sourceMap\":true}!./node_modules/_vue-loader@13.6.2@vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-6713d6c9\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/_vux-loader@1.1.30@vux-loader/src/style-loader.js!./node_modules/_vue-loader@13.6.2@vue-loader/lib/selector.js?type=styles&index=0!./src/views/my/setting.vue\n// module id = CtF5\n// module chunks = 17","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.6.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6713d6c9\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/_vux-loader@1.1.30@vux-loader/src/style-loader.js!../../../node_modules/_vue-loader@13.6.2@vue-loader/lib/selector?type=styles&index=0!./setting.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.6.2@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vux-loader@1.1.30@vux-loader/src/script-loader.js!../../../node_modules/_vue-loader@13.6.2@vue-loader/lib/selector?type=script&index=0!./setting.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vux-loader@1.1.30@vux-loader/src/script-loader.js!../../../node_modules/_vue-loader@13.6.2@vue-loader/lib/selector?type=script&index=0!./setting.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.6.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6713d6c9\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vux-loader@1.1.30@vux-loader/src/before-template-compiler-loader.js!../../../node_modules/_vux-loader@1.1.30@vux-loader/src/template-loader.js!../../../node_modules/_vue-loader@13.6.2@vue-loader/lib/selector?type=template&index=0!./setting.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/my/setting.vue\n// module id = null\n// module chunks = ","\nimport util from '@/libs/util'\nimport common from '@/libs/common.mixin'\nimport Cell from 'vux/src/components/cell/index.vue'\nimport Group from 'vux/src/components/group/index.vue'\nimport Popup from 'vux/src/components/popup/index.vue'\nimport XInput from 'vux/src/components/x-input/index.vue'\nimport XButton from 'vux/src/components/x-button/index.vue'\n\n\nconst emptyObject = {\nname: '',\nnewname: '',\nmobile: '',\nnewmobile: '',\nvcode: '',\noldpassword: '',\npassword: '',\nrepassword: ''\n}\n\nexport default{\nmixins:[common],\ncomponents:{\nCell,\nPopup,\nGroup,\nXInput,\nXButton\n},\ndata () {\nreturn {\npopup_setting: false,\naction: '',\ntId: null,\nsend: {\ntext: '发送验证码',\nloading: false\n},\nuser: util.copy(emptyObject)\n}\n},\nmounted () {\nthis.init_data()\n},\nmethods: {\nsendCapt() {\nif(!this.checkTel()) {\nreturn false\n}\nthis.getCapt()\n},\ngetCapt() {\nlet time = 59\nif(this.send.loading) {\nreturn false\n}\nthis.send = {loading: true,text: '60s'}\nthis.tId = setInterval(() => {\nif(time < 10) {\ntime = '0' + time\n}\nthis.send.text = time + 's'\ntime --\nif(time < 0) {\nclearInterval(this.tId)\nthis.send = {loading: false,text: '发送验证码'}\n}\n}, 1000)\nthis.$rest('open/vcode')\n.post({mobile:this.user.newmobile,type:'change'})\n.success(response => {\n\n})\n.error(response => {\nthis.alert('获取验证码失败', response.body.message)\nclearInterval(this.tId)\nthis.send = {loading: false,text: '发送验证码'}\n})\n},\ncheckTel() {\nlet tel = this.user.newmobile\nif(tel === '') {\nthis.alert('请先输入手机号', '手机号不能为空')\nreturn false\n}\nif(tel !== '' && !(/^1[35789]{1}\\d{9}$/).test(tel)) {\nthis.alert('请重新输入手机号', '手机号格式不正确')\nreturn false\n}\nreturn true\n},\nshow_popup (action) {\nthis.action = action\nthis.popup_setting = true\n},\nhide_popup () {\n\nthis.user.newmobile = ''\nthis.user.newname = this.user.name\nthis.popup_setting = false\nthis.send = {\ntext: '发送验证码',\nloading: false\n}\nwindow.clearInterval(this.tId)\n},\nedit_profile () {\nif(this.user.password  === this.user.repassword){\nlet params = {action: this.action}\n\nif(this.action == 'edit_name'){\nparams.name = this.user.newname\n}\n\nelse if(this.action == 'edit_mobile'){\nparams.mobile = this.user.newmobile\nparams.vcode = this.user.vcode\n}\n\nelse{\nparams.oldpassword = this.user.oldpassword\nparams.password = this.user.password\nparams.repassword = this.user.repassword\n}\nthis.$http.post('users/edit_profile',params)\n.then(response=>{\nif(this.action == 'edit_name') {\nthis.user.name = this.user.newname\nthis.$store.commit('updateUserInfo',{user:this.user,action:'changeName'})\n}else if(this.action == 'edit_mobile'){\nthis.user.mobile = this.user.newmobile\nthis.$store.commit('updateUserInfo',{user:this.user,action:'changeMobile'})\n}\nthis.toast('修改成功','success')\nthis.hide_popup()\n}).catch(response=>{\nconsole.log(response)\nthis.toast(response.body.message,'warn')\n})\n}else{\nthis.toast('两次密码不一致','warn')\n}\n},\ninit_data () {\nlet user_info = this.$store.state.user.info\nif(user_info){\nthis.user.name = user_info.name\nthis.user.newname = user_info.name\nthis.user.mobile = user_info.mobile\n}\n},\nlogout () {\nthis.$http.get('logout')\n.then(response=>{\nthis.$store.commit('clearLoginInfo')\nthis.$router.push({path: '../login'})\n}).catch(response=>{\nthis.$Message.error(response.body.message)\n})\n},\n},\ncomputed: {\nrequired () {\nlet user = this.user\nif(this.action == 'edit_name'){\nreturn user.newname.length === 0\n}else if (this.action == 'edit_mobile'){\nreturn !(/^1[35789]{1}\\d{9}$/).test(user.newmobile)||user.vcode.length === 0\n}else {\nreturn user.oldpassword.length === 0 || user.password.length === 0 || user.repassword.length === 0\n}\n},\n}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/views/my/setting.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('group',[_c('cell',{attrs:{\"title\":\"修改姓名\",\"is-link\":\"\"},nativeOn:{\"click\":function($event){_vm.show_popup('edit_name')}},model:{value:(_vm.user.name),callback:function ($$v) {_vm.$set(_vm.user, \"name\", $$v)},expression:\"user.name\"}})],1),_vm._v(\" \"),_c('group',[_c('cell',{attrs:{\"title\":\"手机号绑定\",\"is-link\":\"\"},nativeOn:{\"click\":function($event){_vm.show_popup('edit_mobile')}}},[_c('span',{staticClass:\"text-disable\",attrs:{\"slot\":\"value\"},slot:\"value\"},[_vm._v(_vm._s(_vm.user.mobile))])]),_vm._v(\" \"),_c('cell',{attrs:{\"title\":\"修改密码\",\"is-link\":\"\"},nativeOn:{\"click\":function($event){_vm.show_popup('resetpwd')}}})],1),_vm._v(\" \"),_c('group',[_c('cell',{attrs:{\"title\":\"退出\",\"is-link\":\"\"},nativeOn:{\"click\":function($event){_vm.logout($event)}}})],1),_vm._v(\" \"),_c('popup',{style:({top: _vm.headerHeight+'px'}),attrs:{\"height\":\"100%\",\"position\":\"bottom\"},model:{value:(_vm.popup_setting),callback:function ($$v) {_vm.popup_setting=$$v},expression:\"popup_setting\"}},[(_vm.action=='edit_name')?_c('group',[_c('x-input',{attrs:{\"title\":\"\",\"type\":\"text\",\"placeholder\":\"姓名 \",\"required\":true},model:{value:(_vm.user.newname),callback:function ($$v) {_vm.$set(_vm.user, \"newname\", $$v)},expression:\"user.newname\"}})],1):_vm._e(),_vm._v(\" \"),(_vm.action=='edit_mobile')?_c('group',[_c('x-input',{attrs:{\"title\":\"\",\"type\":\"text\",\"placeholder\":\"请输入手机号\",\"required\":true},model:{value:(_vm.user.newmobile),callback:function ($$v) {_vm.$set(_vm.user, \"newmobile\", $$v)},expression:\"user.newmobile\"}},[_c('x-button',{attrs:{\"slot\":\"right\",\"type\":\"primary\",\"mini\":\"\",\"disabled\":_vm.send.loading},nativeOn:{\"click\":function($event){_vm.sendCapt($event)}},slot:\"right\"},[_vm._v(_vm._s(_vm.send.text))])],1),_vm._v(\" \"),_c('x-input',{attrs:{\"title\":\"\",\"type\":\"text\",\"placeholder\":\"请输入验证码 \",\"required\":true},model:{value:(_vm.user.vcode),callback:function ($$v) {_vm.$set(_vm.user, \"vcode\", $$v)},expression:\"user.vcode\"}})],1):_vm._e(),_vm._v(\" \"),(_vm.action=='resetpwd')?_c('group',[_c('x-input',{attrs:{\"title\":\"\",\"required\":true,\"type\":\"password\",\"placeholder\":\"初始密码\"},model:{value:(_vm.user.oldpassword),callback:function ($$v) {_vm.$set(_vm.user, \"oldpassword\", $$v)},expression:\"user.oldpassword\"}}),_vm._v(\" \"),_c('x-input',{attrs:{\"title\":\"\",\"required\":true,\"type\":\"password\",\"placeholder\":\"新密码\"},model:{value:(_vm.user.password),callback:function ($$v) {_vm.$set(_vm.user, \"password\", $$v)},expression:\"user.password\"}}),_vm._v(\" \"),_c('x-input',{attrs:{\"title\":\"\",\"required\":true,\"type\":\"password\",\"placeholder\":\"再输一遍\"},model:{value:(_vm.user.repassword),callback:function ($$v) {_vm.$set(_vm.user, \"repassword\", $$v)},expression:\"user.repassword\"}})],1):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"pd-10\"},[_c('x-button',{staticClass:\"bg-blue\",attrs:{\"type\":\"primary\",\"disabled\":_vm.required},nativeOn:{\"click\":function($event){_vm.edit_profile($event)}}},[_vm._v(\"确认\")]),_vm._v(\" \"),_c('x-button',{nativeOn:{\"click\":function($event){_vm.hide_popup($event)}}},[_vm._v(\"取消\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.6.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-6713d6c9\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vux-loader@1.1.30@vux-loader/src/before-template-compiler-loader.js!./node_modules/_vux-loader@1.1.30@vux-loader/src/template-loader.js!./node_modules/_vue-loader@13.6.2@vue-loader/lib/selector.js?type=template&index=0!./src/views/my/setting.vue\n// module id = null\n// module chunks = ","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/_css-loader@0.28.7@css-loader/index.js?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.6.2@vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6713d6c9\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/_vux-loader@1.1.30@vux-loader/src/style-loader.js!../../../node_modules/_vue-loader@13.6.2@vue-loader/lib/selector.js?type=styles&index=0!./setting.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/_vue-style-loader@3.0.3@vue-style-loader/lib/addStylesClient.js\")(\"400eb2be\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/_vue-style-loader@3.0.3@vue-style-loader!./node_modules/_css-loader@0.28.7@css-loader?{\"sourceMap\":true}!./node_modules/_vue-loader@13.6.2@vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-6713d6c9\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/_vux-loader@1.1.30@vux-loader/src/style-loader.js!./node_modules/_vue-loader@13.6.2@vue-loader/lib/selector.js?type=styles&index=0!./src/views/my/setting.vue\n// module id = hBI3\n// module chunks = 17"],"sourceRoot":""}