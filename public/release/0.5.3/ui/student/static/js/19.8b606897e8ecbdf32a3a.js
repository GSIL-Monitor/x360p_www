webpackJsonp([19],{"3U8N":function(t,s,n){"use strict";function e(t){n("tO1P")}Object.defineProperty(s,"__esModule",{value:!0});var i=(n("Ym9J"),n("TVG1")),r=n("8Llf"),o=n("40+F"),a=n("aKkU"),c=n("1CMQ"),l=n("/JfV"),u=n("7BY6"),d={mixins:[r.a],filters:{avatar:function(t){return""===t?"http://s1.xiao360.com/common_img/avatar.jpg":t}},components:{XButton:u.a,Divider:l.a,Group:o.a,Cell:a.a,XInput:c.a},data:function(){return{students:[],active_id:0,active_name:""}},mounted:function(){this.get_students()},methods:{get_students:function(){var t=this,s=this.$store.state.user.info;this.$http.get("students?uid="+s.uid).then(function(n){t.students=n.body.data.list,t.$store.commit("updateUserInfo",{user:t.students,action:"updateArchives"}),0!==s.default_sid?t.select_student(s.students.find(function(t){return t.sid===s.default_sid})):0===s.default_sid&&t.students.length>0&&t.select_student(t.students[0])})},select_student:function(t){var s=this,n=i.b.sprintf("users/switch_sid?uid=%s&sid=%s",this.$store.state.user.info.uid,t.sid);this.$rest(n).get().success(function(n){s.active_id=t.sid,s.active_name=t.student_name,s.$store.commit("setArchiveInfo",t.sid)}).error(function(t){s.alert("错误提示",t.body.message,!0)})}},computed:{showAdd:function(){return!this.students||0===this.students.length},edit_archive:function(){return"./add?sid="+this.active_id}}},A=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",[0===t.students.length?n("p",{staticClass:"al-c"},[t._v("暂未绑定档案")]):t._e(),t._v(" "),n("group",[t._l(t.students,function(s){return n("cell",{key:s.sid,nativeOn:{click:function(n){t.select_student(s)}}},[n("div",{staticClass:"avatar avatar-xs mg-r-10",attrs:{slot:"icon"},slot:"icon"},[n("img",{attrs:{src:t._f("avatar")(s.photo_url)}})]),t._v(" "),n("div",{attrs:{slot:"title"},slot:"title"},[n("span",[t._v(t._s(s.student_name))]),n("br"),t._v(" "),n("span",{class:"1"===s.sex?"tag":"tag tag-female"},["1"===s.sex?n("i",{staticClass:"icon icon-male color-white"}):t._e(),t._v(" "),"2"===s.sex?n("i",{staticClass:"icon icon-female color-white"}):t._e(),t._v(" "),n("span",[t._v(t._s(t.getAge(s.birth_time)))])])]),t._v(" "),s.sid===t.active_id?n("span",[n("i",{staticClass:"icon icon-ios-checkmark-empty",staticStyle:{color:"#51B9F8","font-size":"40px"},attrs:{slot:"value"},slot:"value"})]):t._e()])}),t._v(" "),t.showAdd?n("cell",{staticStyle:{"line-height":"1"},attrs:{link:"./add"}},[n("span",{staticClass:"mg-r-10",attrs:{slot:"icon"},slot:"icon"},[n("i",{staticClass:"icon icon-ios-plus-outline color-link",staticStyle:{"font-size":"1.5em"}})]),t._v(" "),n("div",{attrs:{slot:"title"},slot:"title"},[n("span",{staticClass:"color-link"},[t._v("创建档案")])])]):t._e()],2),t._v(" "),t.students.length>0?n("group",[n("cell",{attrs:{title:"编辑档案",link:t.edit_archive}},[n("span",{attrs:{slot:"value"},slot:"value"},[t._v(t._s(t.active_name))])])],1):t._e()],1)},p=[],_={render:A,staticRenderFns:p},g=_,v=n("8AGX"),m=e,f=v(d,g,!1,m,null,null);s.default=f.exports},MNgr:function(t,s,n){s=t.exports=n("BkJT")(!0),s.push([t.i,"\n.tag-female{\r\n\tbackground: #EDABC2 !important;\n}\n.color-link{\r\n\tcolor: #51B9F8;\n}\n.mg-r-10{\r\n\tmargin-right: 10px;\n}\n.tag{\r\n    padding: 0 5px;\r\n    margin-right: 5px;\r\n    background: #ABC9ED;\r\n    color: #FFFFFF;\r\n    border-radius: 3px;\r\n    display: inline-block;\r\n    font-size: 12px;\r\n    -webkit-box-sizing: border-box;\r\n            box-sizing: border-box;\r\n    letter-spacing: 1px;\n}\t\r\n","",{version:3,sources:["/Users/payhon/Project/x360p/src/x360p_student_mobile/src/views/my/archives.vue"],names:[],mappings:";AACA;CACC,+BAA+B;CAC/B;AACD;CACC,eAAe;CACf;AACD;CACC,mBAAmB;CACnB;AACD;IACI,eAAe;IACf,kBAAkB;IAClB,oBAAoB;IACpB,eAAe;IACf,mBAAmB;IACnB,sBAAsB;IACtB,gBAAgB;IAChB,+BAA+B;YACvB,uBAAuB;IAC/B,oBAAoB;CACvB",file:"archives.vue",sourcesContent:["\n.tag-female{\r\n\tbackground: #EDABC2 !important;\n}\n.color-link{\r\n\tcolor: #51B9F8;\n}\n.mg-r-10{\r\n\tmargin-right: 10px;\n}\n.tag{\r\n    padding: 0 5px;\r\n    margin-right: 5px;\r\n    background: #ABC9ED;\r\n    color: #FFFFFF;\r\n    border-radius: 3px;\r\n    display: inline-block;\r\n    font-size: 12px;\r\n    -webkit-box-sizing: border-box;\r\n            box-sizing: border-box;\r\n    letter-spacing: 1px;\n}\t\r\n"],sourceRoot:""}])},tO1P:function(t,s,n){var e=n("MNgr");"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);n("8bSs")("6779fce1",e,!0)}});
//# sourceMappingURL=19.8b606897e8ecbdf32a3a.js.map