webpackJsonp([41],{1284:function(t,e,n){"use strict";e.a={props:{forbidType:{type:Array,default:function(){return[]}},value:{type:String,default:""},size:{type:String,default:"default"}},data:function(){return{model:this.value}},methods:{handleChange:function(t){this.$emit("input",t.target.value)},selectFromModal:function(){var t=this;this.$Modal.open("components/SelectSystemLinkModal.vue@modal",{props:{"forbid-type":this.forbidType},on:{"on-change":function(e){t.model=e,t.$emit("input",e)}}}).then(function(t){t.show("选择系统链接")})}},watch:{value:function(t){this.modal=t}}}},1305:function(t,e,n){"use strict";var i=n(0),r=n.n(i),o=n(1),a=n(624),s=n(696),u=n(751),l=n(1370),c=n(1371),d=n(648);e.a={mixins:[a.b],components:{DataReady:s.a,playVoice:u.a,Waterfall:l.a,WaterfallSlot:c.a,DateRangePicker:d.a},props:{type:{type:String,default:"image"}},data:function(){return{data:[],active_voice:-1,rule_id:0,spinShow:!1,rest_api:"wxmp_materials?type="+this.type,pk:"material_id",active_item:{},content:"",params:{update_time:o.b.month_range()}}},filters:{format_time:function(t){return r()(t).format("YYYY-MM-DD")}},watch:{type:function(t){this.init_data()}},mounted:function(){this.init_data()},methods:{hook_get_param:function(t){"news"!=this.type&&"voice"!=this.type||(t.update_time=o.b.get_date_query(this.params.update_time)),"keyword"==this.type&&(this.rest_api="wxmp_rules",this.pk="rule_id")},dateChange:function(t){this.params.update_time=t,this.init_data()},dataReady:function(t){this.data=t[0].list},format_wx_img:function(t){return this.$store.state.user.info.base_url+"/api/open/wximage?url="+t},chooseFile:function(t){this.active_item=t,"keyword"==this.type&&(this.rule_id=t.rule_id)},getFile:function(){"text"==this.type?this.$emit("getFile",this.content):this.$emit("getFile",this.active_item)}}}},1306:function(t,e,n){"use strict";function i(t){!1!==t&&this.autoResize?E(window,"resize",this.reflowHandler,!1):C(window,"resize",this.reflowHandler,!1)}function r(t){var e=t.target,n=e[S];n&&w(e,n)}function o(){clearTimeout(this.token),this.token=setTimeout(this.reflow,this.interval)}function a(){var t=this;if(this.$el){var e=this.$el.clientWidth,n=this.$children.map(function(t){return t.getMeta()});n.sort(function(t,e){return t.order-e.order}),this.virtualRects=n.map(function(){return{}}),u(this,n,this.virtualRects),setTimeout(function(){s(t.$el,e)&&u(t,n,t.virtualRects),t.style.overflow="hidden",f(t.virtualRects,n),t.$emit("reflowed",t)},0)}}function s(t,e){return e!==t.clientWidth}function u(t,e,n){var i=l(t);("h"===t.line?R:k).calculate(t,i,e,n)}function l(t){var e=t.maxLineGap?+t.maxLineGap:t.lineGap;return{align:~["left","right","center"].indexOf(t.align)?t.align:"left",line:~["v","h"].indexOf(t.line)?t.line:"v",lineGap:+t.lineGap,minLineGap:t.minLineGap?+t.minLineGap:t.lineGap,maxLineGap:e,singleMaxWidth:Math.max(t.singleMaxWidth||0,e),fixedHeight:!!t.fixedHeight,grow:t.grow&&t.grow.map(function(t){return+t})}}function c(t,e,n){switch(n){case"right":return t-e;case"center":return(t-e)/2;default:return 0}}function d(t){return t.reduce(function(t,e){return t+e})}function f(t,e){var n=e.filter(function(t){return t.moveClass}),i=p(n);h(t,e);var r=p(n);n.forEach(function(t,e){t.node[S]=t.moveClass,m(t.node,i[e],r[e])}),document.body.clientWidth,n.forEach(function(t){y(t.node,t.moveClass),g(t.node)})}function p(t){return t.map(function(t){return t.vm.rect})}function h(t,e){t.forEach(function(t,n){var i=e[n].node.style;e[n].vm.rect=t;for(var r in t)i[r]=t[r]+"px"})}function m(t,e,n){var i=e.left-n.left,r=e.top-n.top,o=e.width/n.width,a=e.height/n.height;t.style.transform=t.style.WebkitTransform="translate("+i+"px,"+r+"px) scale("+o+","+a+")",t.style.transitionDuration="0s"}function g(t){t.style.transform=t.style.WebkitTransform="",t.style.transitionDuration=""}function v(){return void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend?"webkitTransitionEnd":"transitionend"}function _(t,e){for(var n="function"==typeof t?function(){return t()}:function(){return t},i=[],r=0;r<e;r++)i[r]=n();return i}function y(t,e){if(!b(t,e)){x(t,"class",(x(t,"class").trim()+" "+e).trim())}}function w(t,e){var n=new RegExp("\\s*\\b"+e+"\\b\\s*","g");x(t,"class",x(t,"class").replace(n," ").trim())}function b(t,e){return new RegExp("\\b"+e+"\\b").test(x(t,"class"))}function x(t,e,n){if(void 0===n)return t.getAttribute(e)||"";t.setAttribute(e,n)}function E(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t.addEventListener(e,n,i)}function C(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t.removeEventListener(e,n,i)}var S="_wfMoveClass";e.a={props:{autoResize:{default:!0},interval:{default:200,validator:function(t){return t>=0}},align:{default:"left",validator:function(t){return~["left","right","center"].indexOf(t)}},line:{default:"v",validator:function(t){return~["v","h"].indexOf(t)}},lineGap:{required:!0,validator:function(t){return t>=0}},minLineGap:{validator:function(t){return t>=0}},maxLineGap:{validator:function(t){return t>=0}},singleMaxWidth:{validator:function(t){return t>=0}},fixedHeight:{default:!1},grow:{validator:function(t){return t instanceof Array}},watch:{default:function(){return{}}}},data:function(){return{style:{height:"",overflow:""},token:null}},methods:{reflowHandler:o,autoResizeHandler:i,reflow:a},created:function(){var t=this;this.virtualRects=[],this.$on("reflow",function(){t.reflowHandler()}),this.$watch(function(){return t.align,t.line,t.lineGap,t.minLineGap,t.maxLineGap,t.singleMaxWidth,t.fixedHeight,t.watch},this.reflowHandler),this.$watch("grow",this.reflowHandler)},mounted:function(){this.$watch("autoResize",this.autoResizeHandler),E(this.$el,v(),r,!0),this.autoResizeHandler(this.autoResize)},beforeDestroy:function(){this.autoResizeHandler(!1),C(this.$el,v(),r,!0)}};var k=function(){function t(t,i,r,o){var a=t.$el.clientWidth,s=i.grow,u=s?n(a,s):e(a,i),l=_(0,u.count);r.forEach(function(t,e){var n=l.reduce(function(t,e,n){return e<l[t]?n:t},0),r=u.width[n%u.count],a=o[e];a.top=l[n],a.left=u.left+(n?d(u.width.slice(0,n)):0),a.width=r,a.height=t.height*(i.fixedHeight?1:r/t.width),l[n]=l[n]+a.height}),t.style.height=Math.max.apply(Math,l)+"px"}function e(t,e){var n=t/e.lineGap,i=void 0;if(e.singleMaxWidth>=t)n=1,i=Math.max(t,e.minLineGap);else{var r=e.maxLineGap*~~n,o=e.minLineGap*~~(n+1),a=r>=t,s=o<=t;a&&s?(n=Math.round(n),i=t/n):a?(n=~~n,i=t/n):s?(n=~~(n+1),i=t/n):(n=~~n,i=e.maxLineGap),1===n&&(i=Math.min(t,e.singleMaxWidth),i=Math.max(i,e.minLineGap))}return{width:_(i,n),count:n,left:c(t,i*n,e.align)}}function n(t,e){var n=d(e);return{width:e.map(function(e){return t*e/n}),count:e.length,left:0}}return{calculate:t}}(),R=function(){function t(t,n,i,r){for(var o=t.$el.clientWidth,a=i.length,s=0,u=0;u<a;){for(var l,c,d=e(o,n,i,u),f=0,p=0;f<d.count;f++)l=i[u+f],c=r[u+f],c.top=s,c.left=d.left+p,c.width=l.width*d.height/l.height,c.height=d.height,p+=c.width;u+=d.count,s+=d.height}t.style.height=s+"px"}function e(t,e,o,a){var s=n(t,e.lineGap,o,a),u=Math.max(s-1,1),l=i(t,e,o,a,s),d=i(t,e,o,a,u),f=r(d,l,t),p=f.height,h=f.width;return 1===f.count&&(h=Math.min(e.singleMaxWidth,t),p=o[a].height*h/o[a].width),{left:c(t,h,e.align),count:f.count,height:p}}function n(t,e,n,i){for(var r=0,o=i,a=0;o<n.length&&a<=t;o++)a+=n[o].width*e/n[o].height,r++;return r}function i(t,e,n,i,r){for(var o=0,a=r-1;a>=0;a--){var s=n[i+a];o+=s.width*e.lineGap/s.height}var u=e.lineGap*t/o;if(u<=e.maxLineGap&&u>=e.minLineGap)return{cost:Math.abs(e.lineGap-u),count:r,width:t,height:u};var l=o>t?e.minLineGap:e.maxLineGap;return{cost:1/0,count:r,width:o*l/e.lineGap,height:l}}function r(t,e,n){return t.cost===1/0&&e.cost===1/0?e.width<n?e:t:e.cost>=t.cost?t:e}return{calculate:t}}()},1307:function(t,e,n){"use strict";e.a={data:function(){return{isShow:!1}},props:{width:{required:!0,validator:function(t){return t>=0}},height:{required:!0,validator:function(t){return t>=0}},order:{default:0},moveClass:{default:""}},methods:{notify:function(){this.$parent.$emit("reflow",this)},getMeta:function(){return{vm:this,node:this.$el,order:this.order,width:this.width,height:this.height,moveClass:this.moveClass}}},created:function(){var t=this;this.rect={top:0,left:0,width:0,height:0},this.$watch(function(){return t.width,t.height},this.notify)},mounted:function(){var t=this;this.$parent.$once("reflowed",function(){t.isShow=!0}),this.notify()},destroyed:function(){this.notify()}}},1369:function(t,e,n){"use strict";function i(t){a||n(1475)}var r=n(1305),o=n(1480),a=!1,s=n(11),u=i,l=s(r.a,o.a,!1,u,null,null);l.options.__file="src/views/system/configs/wxmp/choose-file.vue",e.a=l.exports},1370:function(t,e,n){"use strict";function i(t){a||n(1476)}var r=n(1306),o=n(1477),a=!1,s=n(11),u=i,l=s(r.a,o.a,!1,u,null,null);l.options.__file="node_modules/vue-waterfall/lib/waterfall.vue",e.a=l.exports},1371:function(t,e,n){"use strict";function i(t){a||n(1478)}var r=n(1307),o=n(1479),a=!1,s=n(11),u=i,l=s(r.a,o.a,!1,u,null,null);l.options.__file="node_modules/vue-waterfall/lib/waterfall-slot.vue",e.a=l.exports},1431:function(t,e,n){"use strict";var i=n(1284),r=n(1432),o=n(11),a=o(i.a,r.a,!1,null,null,null);a.options.__file="src/views/components/SelectSystemLink.vue",e.a=a.exports},1432:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"system-link-wrapper"},[n("Input",{attrs:{size:t.size,placeholder:"请输入链接或选择系统链接"},on:{"on-change":t.handleChange},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},[n("Button",{staticStyle:{width:"70px"},attrs:{slot:"append"},on:{click:t.selectFromModal},slot:"append"},[t._v("系统链接")])],1)],1)},r=[];i._withStripped=!0;var o={render:i,staticRenderFns:r};e.a=o},1475:function(t,e){},1476:function(t,e){},1477:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"vue-waterfall",style:t.style},[t._t("default")],2)},r=[];i._withStripped=!0;var o={render:i,staticRenderFns:r};e.a=o},1478:function(t,e){},1479:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"vue-waterfall-slot"},[t._t("default")],2)},r=[];i._withStripped=!0;var o={render:i,staticRenderFns:r};e.a=o},1480:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content"},["news"==t.type||"voice"==t.type?n("Row",{staticClass:"mb-3"},[n("Col",{staticClass:"al-c",attrs:{span:"24"}},[n("date-range-picker",{attrs:{label:"更新日期",placement:"bottom"},on:{"on-change":t.dateChange},model:{value:t.params.update_time,callback:function(e){t.$set(t.params,"update_time",e)},expression:"params.update_time"}})],1)],1):t._e(),t._v(" "),n("data-ready",{attrs:{data:["wxmp_materials?type="+t.type]},on:{ready:t.dataReady}},["news"==t.type?n("waterfall",{staticStyle:{"overflow-y":"auto"},attrs:{"line-gap":289,watch:t.data}},t._l(t.data,function(e,i){return e.items&&e.items.length>0?n("waterfall-slot",{key:e.media_id,staticStyle:{width:"289px"},attrs:{order:i,height:352+103*(e.items.length-1),width:289}},[n("div",{staticClass:"source-card-item",on:{click:function(n){t.chooseFile(e)}}},[n("div",{staticClass:"source-card-content custom-file-item",class:e==t.active_item?"selected":""},[n("div",{staticClass:"source-card-header"},[n("span",[t._v(t._s(t._f("format_time")(e.update_time)))])]),t._v(" "),n("div",{staticClass:"content-img-item"},[n("h4",{staticClass:"card-body-title"},[t._v(t._s(e.items[0].title))]),t._v(" "),n("div",{staticClass:"card-body-image",style:{backgroundImage:"url("+t.format_wx_img(e.items[0].thumb_url)+")"}}),t._v(" "),n("p",{staticClass:"card-body-desc"},[t._v(t._s(e.items[0].digest))])]),t._v(" "),t._l(e.items,function(i,r){return e.items.length>1&&r>0?n("div",{key:r,staticClass:"content-article-item"},[n("div",{staticClass:"appmsg-thumb",style:{backgroundImage:"url("+t.format_wx_img(i.thumb_url)+")"}}),t._v(" "),n("span",{staticClass:"card-body-title"},[t._v(t._s(i.title))])]):t._e()}),t._v(" "),n("div",{staticClass:"custom-file-mask"},[n("Icon",{attrs:{type:"checkmark",size:"46"}})],1)],2)])]):t._e()})):t._e(),t._v(" "),"image"==t.type?n("ul",{staticClass:"source-img-list"},t._l(t.data,function(e,i){return n("li",{key:i,staticClass:"source-img-item custom-file-item",class:e==t.active_item?"selected":"",staticStyle:{width:"calc(25% - 30px) !important"},on:{click:function(n){t.chooseFile(e)}}},[n("div",{staticClass:"source-img-header"},[n("span",{staticClass:"source-img-title"},[t._v(t._s(e.name))])]),t._v(" "),n("div",{staticClass:"source-img-content"},[n("img",{attrs:{src:t.format_wx_img(e.url)}})]),t._v(" "),n("div",{staticClass:"custom-file-mask"},[n("Icon",{attrs:{type:"checkmark",size:"46"}})],1)])})):t._e(),t._v(" "),"voice"==t.type?n("table",{staticClass:"modal-table mb-3"},[n("thead",[n("th",[n("div",{staticClass:"ivu-table-cell"})]),t._v(" "),n("th",[n("div",{staticClass:"ivu-table-cell"},[t._v("名称")])]),t._v(" "),n("th",[n("div",{staticClass:"ivu-table-cell"},[t._v("创建时间")])]),t._v(" "),n("th",[n("div",{staticClass:"ivu-table-cell"})])]),t._v(" "),t._l(t.data,function(e,i){return n("tr",{key:i,on:{click:function(n){t.chooseFile(e)}}},[n("td",[n("div",{staticClass:"ivu-table-cell"},[n("Radio",{attrs:{value:t.active_item==e}})],1)]),t._v(" "),n("td",[n("div",{staticClass:"ivu-table-cell"},[t._v(t._s(e.name))])]),t._v(" "),n("td",[n("div",{staticClass:"ivu-table-cell",staticStyle:{width:"150px"}},[t._v(t._s(t._f("format_time")(e.update_time)))])]),t._v(" "),n("td",[n("div",{staticClass:"ivu-table-cell"},[n("play-voice",{attrs:{active:t.active_voice===i,src:"http://qms.xiao360.com/api/open/wxvoice?media_id="+e.media_id},nativeOn:{click:function(e){e.stopPropagation(),t.active_voice=i}}})],1)])])}),t._v(" "),t.data.length?t._e():n("tr",[n("td",{attrs:{colspan:"4"}},[n("div",{staticClass:"ivu-table-cell al-c"},[t._v("暂无数据~")])])])],2):t._e(),t._v(" "),"video"==t.type?n("ul",{staticClass:"source-video-list"},t._l(t.data,function(e,i){return n("li",{key:i,staticClass:"source-img-item custom-file-item",class:e==t.active_item?"selected":"",staticStyle:{width:"calc(33% - 30px)!important"},on:{click:function(n){t.chooseFile(e)}}},[n("div",{staticClass:"source-img-header"},[n("span",{staticClass:"source-img-title"},[t._v(t._s(e.name))])]),t._v(" "),n("div",{staticClass:"source-img-content"},[n("div",{staticClass:"source-video-cover"},[n("Icon",{attrs:{type:"ios-videocam",size:"50"}})],1),t._v(" "),n("img",{attrs:{src:"http://omyc1h52u.bkt.clouddn.com/7205e7cd26829b83f49499dea2ad519b.mp4?vframe/jpg/offset/1/w/207/h/169"}})]),t._v(" "),n("div",{staticClass:"custom-file-mask"},[n("Icon",{attrs:{type:"checkmark",size:"46"}})],1)])})):t._e(),t._v(" "),!t.data.length&&["news","image","video"].indexOf(t.type)>-1?n("div",{staticClass:"al-c"},[t._v("暂无数据~")]):t._e()],1),t._v(" "),"keyword"==t.type?n("Row",{staticClass:"mb-3",attrs:{gutter:10}},t._l(t.data,function(e,i){return n("Col",{key:i,attrs:{span:"6"}},[n("a",{staticClass:"keyword-item",class:t.rule_id==e.rule_id?"active":"",on:{click:function(n){t.chooseFile(e)}}},[n("span",{staticClass:"mr-2"},[t._l(e.keywords,function(e,n){return[t._v("\n\t\t\t\t\t\t\t"+t._s(e.content)+"  \n\t\t\t\t\t\t")]})],2)])])})):t._e(),t._v(" "),"text"!=t.type?n("div",{staticClass:"content-footer"},[n("div",{staticClass:"pagenation"},[n("Page",{attrs:{total:t.total,current:t.pageIndex,"show-sizer":!0,"page-size":t.pageSize,"show-total":!0},on:{"on-change":t.pagenation,"on-page-size-change":t.pagesize}})],1)]):t._e(),t._v(" "),"text"==t.type?n("Input",{attrs:{type:"textarea",rows:4,placeholder:"请输入..."},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}):t._e()],1)},r=[];i._withStripped=!0;var o={render:i,staticRenderFns:r};e.a=o},2078:function(t,e,n){"use strict";var i=n(1),r=n(923),o=n(207),a=n(208),s=n(55),u=n(3121),l=n(3123),c=n(3125),d=n(3133),f=n(3135),p=n(3139);e.a={mixins:[o.a,r.a,a.a,s.a],components:{autoReply:l.a,customMenu:u.a,sourceManage:c.a,wxmpAddModal:p.a,messageTemplate:f.a,publicNumberModal:d.a},computed:{isBase:function(){return"base"!=this.$store.state.user.info.x_sub_host},data:function(){var t=this.$store.state.gvars.public_accounts;return t.length>1&&(t=t.filter(function(t){return!t.system_default})),t},currentItem:function(){var t=this.currentIndex||0;return this.data[t]||{}},filter_data:function(){var t=this.data,e=this.data_key,n=function(t){return!!/$\s*^/.test(e)||t.alias.indexOf(e)>-1};return t.filter(n)},branchs:function(){var t=this;return this.$store.state.gvars.branchs.filter(function(e){return e.appid==t.appId})},bids$:function(){var t=this,e=this.$store.state.gvars.branchs,n=e.filter(function(e){return e.appid==t.appId}),i=[];return n.forEach(function(t){i.push(t.bid)}),i},wxmp_url:function(){return this.$store.state.user.info.base_url+"/wxapi/wxmessage/server"},appId:function(){return this.currentItem.authorizer_appid},wxmpId:function(){return this.currentItem.wxmp_id},hasOwnerDefaultWxmp:function(){return!this.filter_data||"guanjiaxuexi"!=this.filter_data[0].alias},canWxmpEditable:function(){return 1!==this.currentItem.system_default||1===this.$store.state.user.info.is_admin&&"base"==this.$store.state.user.info.client.domain}},data:function(){return{data_key:"",tab:"schools",currentIndex:0}},watch:{"$store.state.branch.id":{handler:function(t,e){this.init_wx_config()},deep:!0}},mounted:function(){this.init()},methods:{init:function(){var t=this;this.$store.dispatch("updateGlobalVar","public_accounts").then(function(){t.init_wx_config()})},refreshInfo:function(){var t=this;this.$rest("wxmps").add_url_param(this.wxmpId).put().success(function(e){t.$Message.success("更新成功！"),t.init()}).error(function(e){t.$Message.error(e.body.message||"更新失败")})},setCurrentIndex:function(t){this.currentIndex=t||0},addInfo:function(){this.$refs.add.show("添加公众号授权","add")},bandNew:function(){var t=this;this.confirm('更换默认公众号操作很简单，用个人微信扫个码就可以了，前提是您现在需要先准备好 <strong color="red">拥有公众号管理权限</strong> 的个人微信，并且公众号必须是服务号，不能是订阅号，您确定已经准备好了吗？').then(function(){var e=location.href,n=t.$store.state.user.info.product_url,r=t.$store.state.user.info.client.cid,o=t.$store.state.user.token,a=i.b.sprintf("%s/api/authorize?token=%s&cid=%s&href=%s",n,o,r,e);a=a.replace(/#/g,"$"),location.href=a})},init_wx_config:function(){var t=this,e=this.$route.query.appid;e&&(this.currentIndex=this.data.findIndex(function(t){return t.authorizer_appid==e}),this.tab="template",this.confirm("新的公众号已经授权，设置模板消息后即可正常使用").then(function(){t.$r("template").syncTemplate()}))},format_wx_img:function(t){return this.$store.state.user.info.base_url+"/api/open/wximage?url="+t}}}},2079:function(t,e,n){"use strict";var i=n(6),r=n(624),o=n(1),a=n(207),s=n(1369),u=n(751),l=n(55),c=n(224),d=n(1431),f={group_name:"默认菜单",matchrule:null,wxmp_id:0,buttons:[{name:"菜单名称",type:"media_id",sub_button:[],index:"button_1"}]};e.a={mixins:[l.a,r.b,a.a],directives:{TransferDom:c.a},props:{appId:{type:[Number,String],default:function(){return 0}},wxmpId:{type:[Number,String],default:function(){return 0}}},components:{SelectSystemLink:d.a,playVoice:u.a,chooseFile:s.a},data:function(){return{action:"add",mode:"list",active_index:0,file_type:"",active_item:{},mobile_preview:!1,rest_api:"wxmp_menus?appid="+this.appId,pk:"wm_id",modal:{show:!1,title:""},group:[],type_list:[{type:"news",icon:"images",text:"图文"},{type:"image",icon:"image",text:"图片"},{type:"voice",icon:"mic-a",text:"语音"},{type:"video",icon:"ios-videocam",text:"视频"}],active_menu:{},menu:o.b.copy(f),data:[],menu_type:[{value:"media_id",label:"发送消息"},{value:"view",label:"跳转网页"}]}},watch:{"active_menu.media_id":function(t){t&&t.length>0&&this.active_item.media_id!=t&&this.get_wx_file(t)},active_menu:function(t){if(t.sub_button&&t.sub_button.length>0){var e=this.menu.buttons.find(function(e){return e==t});i.a.delete(e,"type"),i.a.delete(e,"media_id"),i.a.delete(e,"url")}},appId:function(t){this.rest_api="wxmp_menus?appid="+t,this.init_data(),this.init_group()}},mounted:function(){this.active_menu=this.menu.buttons[0],this.params.search_field="group_name",this.init_data(),this.init_group()},methods:{tagChange:function(t){this.menu.matchrule||(this.menu.matchrule={}),this.$set(this.menu.matchrule,"group_id",t)},getGroupName:function(t){var e="所有粉丝",n=this.group;if(t&&t.group_id){var i=n.find(function(e){return e.id==t.group_id});i&&(e=i.name)}return e},init_group:function(){var t=this;this.$rest("wxmp_tags").get().success(function(e){t.group=e.tags})},get_wx_menu:function(){var t=this;this.showPageSpin(),this.$http.get("wxmp_menus/sync?appid="+this.appId).then(function(e){t.init_data(),t.hidePageSpin()},function(e){t.hidePageSpin(),t.$Notice.error({title:"错误",desc:e.body.message||"同步微信出错~"})})},get_wx_file:function(t){var e=this,n={media_id:t};this.$http.post("open/get_material",n).then(function(t){e.active_item=t.body.data},function(t){e.$Notice.warning({title:"错误",desc:t.body.message||"获取微信文件错误"})})},format_wx_img:function(t){return this.$store.state.user.info.base_url+"/api/open/wximage?url="+t},getFile:function(t){this.get_wx_file(t.media_id),this.active_menu.media_id=t.media_id},confirm_file:function(){this.$refs.cf.getFile(),this.modal.show=!1},choose_file:function(t){var e={news:"选择图文",image:"选择图片",voice:"选择语音",video:"选择视频",keyword:"选择关键字"};this.file_type=t.type,this.modal.title=e[this.file_type],this.modal.show=!0},onchange:function(t){"view"==t?(this.active_item.media_id="",i.a.delete(this.active_item,"media_id")):(this.active_item.url="",i.a.delete(this.active_item,"url"))},showMenuLink:function(){this.$r("link").show("系统链接")},setUrl:function(t){i.a.set(this.active_menu,"url",t)},add:function(){this.mode="add"},edit:function(t){this.mode="edit",this.menu=t},del_menu:function(t){var e=this;this.confirm("您确定删除菜单组["+t.group_name+"]吗？删除后将无法恢复！").then(function(n){e.$rest("wxmp_menus").delete(t[e.pk]).success(function(){e.$Message.success("删除成功！"),e.init_data(),e.init_group()})})},save:function(){var t=this,e=this.menu,n="post",i="wxmp_menus",r="添加成功";"edit"==this.mode&&(n="put",i="wxmp_menus/"+e.wm_id,r="修改成功"),e.wxmp_id=this.wxmpId,this.$http[n](i,e).then(function(e){t.$Message.success(r),t.back()},function(e){t.$Notice.error({title:"错误",desc:e.body.message||"添加自定义菜单错误"})})},doactive:function(t){var e=this;this.$http.post("wxmp_menus/"+t+"/doactive").then(function(t){e.$Message.success("启用成功"),e.init_data()},function(t){e.$Notice.error({title:"错误",desc:t.body.message||"启用失败"})})},preview:function(){this.mobile_preview=!0},del:function(){var t=[this.active_menu,-1],e=t[0],n=t[1];if(e.sub_button)(n=this.menu.buttons.indexOf(e))>-1&&this.menu.buttons.splice(n,1);else{n=this.active_index;var i=this.menu.buttons[n].sub_button.indexOf(e);i>-1&&this.menu.buttons[n].sub_button.splice(i,1),this.active_menu=this.menu.buttons[n]}},back:function(){this.menu=o.b.copy(f),this.active_menu={},this.init_data(),this.init_group(),this.mode="list"},addMenu:function(){this.menu.buttons.length;this.menu.buttons.push({name:"菜单名称",type:"media_id",media_id:"",sub_button:[]}),1===this.menu.buttons.length&&(this.active_menu=this.menu.buttons[0])},addSubMenu:function(t){var e=(t.sub_button.length,{type:"media_id",name:"子菜单名称",media_id:""});t.sub_button.push(e),this.active_menu=e}}}},2080:function(t,e,n){"use strict";var i=n(33),r=n.n(i),o=n(1),a=n(624),s=n(1369),u=n(55),l=n(751);e.a={mixins:[a.b,u.a],components:{chooseFile:s.a,playVoice:l.a},props:{wxmpId:{type:[Number,String],default:function(){return 0}}},data:function(){return{reply_type:1,active_voice:-1,rule_id:0,rule_ids:[],mode:"list",rest_api:"wxmp_rules?wxmp_id="+this.wxmpId,pk:"rule_id",data:[],modal_keyword:!1,show_advance:!1,modal_choose_word:!1,modal:{show:!1,title:"选择文件"},reply:{default:{},welcome:{}},key_item_types:[{value:1,text:"精准触发"},{value:2,text:"包含关键字触发"},{value:3,text:"正则匹配关键字触发"}],keyword:{keywords:[],replys:[],name:"",is_top:0,status:1,displayorder:0,wxmp_id:this.wxmpId},key_item:{type:1,content:""},type_list:[{type:"text",icon:"edit",text:"文字"},{type:"news",icon:"image",text:"图文"},{type:"image",icon:"image",text:"图片"},{type:"voice",icon:"mic-a",text:"语音"},{type:"video",icon:"ios-videocam",text:"视频"}],column_keys:{ck_box:{type:"selection",width:60,align:"center"},content:{title:"内容",show:!0},status:{title:"是否开启",show:!0},operate:{title:"操作",show:!0}},column_render:{content:function(t,e){var n=[e.row.keywords,[],"",0,[]],i=n[0],r=n[1],o=n[2],a=n[3],s=n[4],u={images_count:"图片",news_count:"图文",texts_count:"文字",videos_count:"视频",voices_count:"语音"},l={1:"精准触发",2:"包含触发",3:"正则匹配触发"};return i.length>0&&i.forEach(function(e){var n=t("Tooltip",{props:{content:"此关键字为"+l[e.type],placement:"bottom"}},[t("a",{attrs:{class:"keys-item mr-3"},domProps:{innerHTML:e.content}})]);r.push(n)}),["images_count","news_count","texts_count","videos_count","voices_count"].forEach(function(t){a+=e.row[t],e.row[t]&&(o+=e.row[t]+"条"+u[t]+"  ")}),e.row.displayorder>0&&s.push(t("Tag","优先级 "+e.row.displayorder)),e.row.name.length>0&&s.push(t("p",{style:{"line-height":"30px"}},"规则名:　"+e.row.name)),s.push(t("div",r),t("p","回复内容:　共"+a+"条( "+o+" )")),t("div",{attrs:{class:"name-cls"}},s)},status:function(t,e){var n=this;return t("div",[t("i-switch",{props:{value:e.row.status,"true-value":1,"false-value":0},on:{input:function(t){n.operate_keyword(t,e.row)}}})])},operate:function(t,e){var n=this;return t("div",[t("a",{attrs:{class:"mr-3 text-info"},on:{click:function(){n.edit_keyword(e.row)}}},"编辑"),t("a",{attrs:{class:"mr-3 text-info"},on:{click:function(){n.del_keyword(e.row)}}},"删除")])}}}},watch:{wxmpId:function(t){this.rest_api="wxmp_rules?wxmp_id="+t,this.init_data()}},computed:{disabled:function(){return 0===this.rule_ids.length}},mounted:function(){this.init_data(),this.params.search_field="keyword"},methods:{set_reply_message:function(){var t=this,e={2:"wxmps/welcome_message",3:"wxmps/default_message"},n={rule_id:this.rule_id,wxmp_id:this.wxmpId};this.$http.post(e[this.reply_type],n).then(function(e){t.$Message.success("设置成功！"),t.rule_id=0,t.modal_choose_word=!1,t.init_data()},function(e){t.$Notice.error({title:"错误",desc:e.body.message||"设置失败"})})},deal_data:function(t){return this.reply.default=t.default,this.reply.welcome=t.welcome,t.list},hook_get_param:function(t){""!=this.params.search_value&&(t.keyword=this.params.search_value)},selectionChange:function(t){var e=this;this.rule_ids=[],t.length>0&&t.forEach(function(t){e.rule_ids.push(t.rule_id)})},del_multi:function(){var t=this,e={ids:this.rule_ids};this.confirm("确定删除所选关键字吗？删除后将无法恢复！").then(function(n){t.$http.post("wxmp_rules/batch_delete",e).then(function(e){t.init_data(),t.rule_ids=[]},function(e){t.$Notice.error({title:"错误",desc:e.body.message||"删除失败，请重试"})})})},reset_modal:function(){var t=this.keyword;t.keywords=[],t.replys=[],t.name="",t.is_top=0,t.status=1,t.displayorder=1},back:function(){this.mode="list",this.reset_modal(),this.init_data()},edit_keyword:function(t){var e=this;this.mode="edit",this.$http.get("wxmp_rules/"+t.rule_id).then(function(t){e.keyword=t.body.data,e.keyword.name.length>0&&(e.show_advance=!0)},function(t){e.$Notice.error({title:"错误",desc:t.body.message||"编辑错误"})})},del_keyword:function(t){var e=this;this.confirm("删除后无法恢复，确认删除吗?").then(function(n){e.delete(t)})},save:function(){var t=this,e="post",n="wxmp_rules",i="添加成功！";return"edit"==this.mode&&(e="put",n="wxmp_rules/"+this.keyword.rule_id,i="修改成功！"),0===this.keyword.keywords.length?(this.$Notice.warning({title:"提示",desc:"请输入关键字"}),!1):0===this.keyword.replys.length?(this.$Notice.warning({title:"提示",desc:"请选择回复内容"}),!1):void this.$http[e](n,this.keyword).then(function(e){t.$Message.success(i),t.back()},function(e){t.$Notice.error({title:"失败",desc:e.body.message||"添加失败"})})},choose_file:function(t){var e={text:"输入文字",news:"选择图文",image:"选择图片",voice:"选择语音",video:"选择视频"};this.file_type=t.type,this.modal.title=e[this.file_type],this.modal.show=!0},getFile:function(t){var e={};e.type=this.file_type,"text"==this.file_type?r()(e,{content:t}):r()(e,t),this.keyword.replys.push(e)},confirm_file:function(){this.$refs.cf.getFile(),this.modal.show=!1},format_wx_img:function(t){return this.$store.state.user.info.base_url+"/api/open/wximage?url="+t},key_type:function(t){return this.key_item_types.find(function(e){return e.value==t}).text},del_keywords:function(t){var e=this.keyword.keywords.indexOf(t);e>-1&&this.keyword.keywords.splice(e,1)},del_replys:function(t){var e=this.keyword.replys.indexOf(t);e>-1&&this.keyword.replys.splice(e,1)},add_keywords:function(){var t=o.b.copy(this.key_item);this.keyword.keywords.push(t),this.close_keyword()},close_keyword:function(){this.key_item.content="",this.key_item.type=1,this.modal_keyword=!1},change_status:function(t){this.reply_type=t},operate_keyword:function(t,e){var n=this,i=1==t?"启用成功！":"禁用成功！";this.$http.post("wxmp_rules/"+e.rule_id+"/dochange_status",{status:t}).then(function(t){n.$Message.success(i),n.init_data()},function(t){n.$Notice.error({title:"错误",desc:t.body.message||"操作失败"})})},add:function(){this.show_advance=!1,this.mode="add"}}}},2081:function(t,e,n){"use strict";var i=n(0),r=n.n(i),o=n(1),a=n(624),s=n(207),u=n(3126),l=n(776),c=n(751),d=n(1370),f=n(1371),p=n(648),h=n(748);e.a={mixins:[a.b,s.a],components:{XUpload:h.a,QUpload:u.a,vueVideo:l.a,Waterfall:d.a,playVoice:c.a,WaterfallSlot:f.a,DateRangePicker:p.a},props:{appId:{type:[Number,String],default:function(){return 0}}},data:function(){return{active_voice:-1,source_type:1,modal_send:!1,modal_video:!1,modal_upload:!1,modal_preview:!1,group_value:null,loading:!1,rest_api:"wxmp_materials?type=news",pk:"material_id",uploadList:[],news_data:[],image_data:[],voice_data:[],video_data:[],files:[],imgName:"",params:{update_time:o.b.month_range()},groups:[{name:"全部粉丝",nums:0,value:-1},{name:"星标组",nums:9,value:2},{name:"php",nums:1,value:100},{name:"ui",nums:0,value:101}],sources:[{src:"http://125.39.7.18/vweixinp.tc.qq.com/1007_a8e5faf4b42b4e6f8246570f5c43f482.f10.mp4?vkey=0B62697DBA6B65E78A0FA819D33A6022A47F0DE7D71C11F9583492EAA12099E2C08E3D36036C672A2EF3338F1A2FF2F86B7A0233386BABB1207C49B145C90163AC09E3CAD833C4360F0F4C5094E029162BD019D3DC6EA319&sha=0&save=1",size:1371058,type:"video/mp4"}]}},filters:{format_time:function(t){return r()(t).format("YYYY年MM月DD")}},watch:{source_type:function(t){this.data_type();this.pagenation(1)},appId:function(t){this.rest_api="wxmp_materials?type="+this.data_type()+"&appid="+t,this.init_data()}},computed:{upload_header:function(){return{"x-token":this.$store.state.user.token,"x-file-key":"file"}},upload_post:function(){return{mod:"wxmp_file"}},msg_img_size:function(){var t=[this.uploadList,0],e=t[0],n=t[1];return e.length>0&&(e.forEach(function(t){n+=t.size}),n=parseFloat(n/1e3).toFixed(2)),n}},mounted:function(){this.uploadList=this.$refs.upload.fileList,this.init_data()},methods:{data_type:function(){return{1:"news",2:"image",3:"voice",4:"video"}[this.source_type]},del:function(t){var e=this;this.confirm("删除后将无法恢复，您确认要删除该素材吗？").then(function(n){e.$http.delete("wxmp_materials/"+t.material_id).then(function(t){e.init_data()},function(t){e.$Notice.error({title:"删除失败",desc:t.body.message||"删除失败,图片正在使用中！"})})})},group_wx:function(){this.modal_send=!0},format_wx_img:function(t){return this.$store.state.user.info.base_url+"/api/open/wximage?url="+t},get_wx_files:function(){var t=this;this.showPageSpin(),this.$http.get("wxmp_materials/sync?appid="+this.appId+"&type="+this.data_type()).then(function(e){t.init_data(),t.hidePageSpin()},function(e){t.hidePageSpin(),t.$Notice.error({title:"错误",desc:e.body.message||"同步微信出错~"})})},hook_get_param:function(t){var e=this.data_type();this.rest_api="wxmp_materials?appid="+this.appId+"&type="+e,t.update_time=o.b.get_date_query(this.params.update_time),this.loading=!0},dateChange:function(t){this.params.update_time=t,this.init_data()},deal_data:function(t){this.loading=!1,this[this.data_type()+"_data"]=t.list},add:function(){this.modal_upload=!0},play_video:function(t){console.log("item.url"),console.log(t.url),this.sources[0].src=t.url,this.modal_video=!0},change_status:function(t){this.source_type=t},getFiles:function(t){console.log("files"),console.log(t)},getVOptions:function(t){return{autoplay:!1,volume:.6,poster:t.src+"?vframe/jpg/offset/1/w/300/h/200"}},handleView:function(t){this.imgName=t,this.modal_preview=!0},handleRemove:function(t){var e=this.$refs.upload.fileList;this.$refs.upload.fileList.splice(e.indexOf(t),1)},hanlderSuccess:function(t,e){e.url=t.data.file_url,this.uploadList.push(e)},hanlderSuccess2:function(t,e){e.url=t.data.file_url},handleFormatError:function(t){this.$Notice.warning({title:"文件格式不正确",desc:"文件 "+t.name+" 格式不正确，请上传 jpg 或 png 格式的图片。"})},handleMaxSize:function(t){this.$Notice.warning({title:"超出文件大小限制",desc:"文件 "+t.name+" 太大，不能超过 2M。"})}}}},2082:function(t,e,n){"use strict";var i=n(3128);e.a={name:"QUpload",components:{},props:{title:String,BeforeUpload:Function,uploadSelect:Function,getFiles:Function,uploadProgress:Function,overMax:Function,domain:String,uptokenUrl:String,max:{type:Number,default:1},header:Object,files:Array},data:function(){return{uploading:0,inputId:""}},created:function(){var t=this;this.$nextTick(function(){t.uploadInit()})},methods:{uploadFiles:function(t){this.$el.querySelector("#"+t).click()},uploadInit:function(){var t=this;this.upload(),setTimeout(function(){t.inputId=t.$el.querySelector("#container input").getAttribute("id")},500)},upload:function(){var t=this,e={runtimes:"html5,flash,html4",browse_button:"pickfiles",header:this.header,uptoken_url:this.uptokenUrl,unique_names:!0,domain:this.domain,get_new_uptoken:!1,container:"container",max_file_size:"500mb",flash_swf_url:"js/plupload/Moxie.swf",max_retries:3,dragdrop:!1,drop_element:"container",chunk_size:"4mb",auto_start:!0,init:{FilesAdded:function(e,n){if(n.length>1)return t.overMax(),!1},BeforeUpload:function(e,n){t.BeforeUpload(e,n)},UploadProgress:function(e,n){t.uploadProgress(e,n)},FileUploaded:function(e,n,i){var r=e.getOption("domain"),o=JSON.parse(i.response),a=r+"/"+o.key;t.files.push({type:n.type,size:n.size,src:a}),t.getFiles(t.files),t.uploadInit()},Error:function(t,e,n){},UploadComplete:function(){t.getFiles(t.files),t.uploadInit()},Key:function(t,e){}}};i.a.uploader(e)}}}},2083:function(t,e,n){"use strict";var i=(n(1),n(209));e.a={mixins:[i.a],data:function(){return{currentIndex:-1,currentAlias:""}},methods:{setCurrentIndex:function(t,e){this.currentIndex=t,this.currentAlias=e.alias},cancel:function(){this.close()},ok:function(){this.close()}},computed:{data:function(){return this.$store.state.gvars.public_accounts}}}},2084:function(t,e,n){"use strict";var i=n(6),r=n(1),o=n(624),a=n(209),s=n(207),u=n(3136);e.a={mixins:[o.b,a.a,s.a],components:{InfoModal:u.a},props:{appId:{type:[Number,String],default:function(){return 0}}},data:function(){return{rest_api:"wxmp_templates?appid="+this.appId,pk:"wt_id",del_templates:[],customer_industry:[],default_industry:[]}},watch:{appId:function(t){this.rest_api="wxmp_templates?appid="+t,this.init_data()}},methods:{syncTemplate:function(t){var e=this,n=t?"wxmp_templates/sync?force=1":"wxmp_templates/sync";this.$rest(n).post({appid:this.appId}).success(function(t){r.a.isEmpty(t.data.info)?(e.$Message.success("设置成功"),e.init_data(),e.close()):(e.getDeltemplate(t.data.info),e.show())}).error(function(t){e.$Notice.error({title:"失败",desc:t.body.message||"设置失败"})})},getDeltemplate:function(t){this.customer_industry=t.customer_industry,this.customer_templates=t.customer_templates.filter(function(t){return t.delete}),this.default_industry=t.default_industry},ok:function(){this.syncTemplate(!0)},editInfo:function(t){this.$r("info").set("info",t).show("编辑模板","add")},switchStatus:function(t){var e={1:"禁用",0:"启用"},n=r.b.sprintf("确定%s【%s】",e[t.status],t.title);this.confirm(n).then(function(){t.status=1===t.status?0:1})}},mounted:function(){this.init_data()},computed:{wechat_template:function(){return this.$store.state.gvars.wechat_template},template_data:function(){var t=this.data,e=r.b.copy(this.wechat_template);return t.length>0&&t.forEach(function(t){i.a.set(e[t.scene],"is_set",!0)}),e}}}},2085:function(t,e,n){"use strict";var i=n(1),r=n(209),o={title:"",value:"",describe:""};e.a={mixins:[r.a],data:function(){return{info:i.b.copy(o)}},methods:{cancel:function(){this.close()},ok:function(){this.close()}}}},2086:function(t,e,n){"use strict";var i=n(1),r=n(209);e.a={mixins:[r.a],data:function(){return{info:{bids:[]},check_all:!1}},watch:{"info.bids":function(t){this.check_all=t.length===this.branchs.length}},methods:{toggleSelectAllBids:function(t){var e=this;this.info.bids=[],t&&this.branchs.forEach(function(t){e.info.bids.push(t.bid)})},bindNew:function(){var t=location.href,e=this.$store.state.user.info.product_url,n=this.$store.state.user.info.client.cid,r=this.$store.state.user.token,o=i.b.sprintf("%s/api/authorize?token=%s&cid=%s&href=%s&bids=%s",e,r,n,t,this.info.bids);o=o.replace(/#/g,"$"),location.href=o}},computed:{branchs:function(){return this.$store.state.gvars.branchs.filter(function(t){return""==t.appid})}}}},3119:function(t,e){},3120:function(t,e){},3121:function(t,e,n){"use strict";var i=n(2079),r=n(3122),o=n(11),a=o(i.a,r.a,!1,null,null,null);a.options.__file="src/views/system/configs/wxmp/custom-menu.vue",e.a=a.exports},3122:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",["list"==t.mode?n("div",[n("div",{staticClass:"box box-query"},[n("Row",[n("Col",{attrs:{span:"6"}},[n("Input",{directives:[{name:"focusme",rawName:"v-focusme",value:"searchkey",expression:"'searchkey'"}],staticClass:"input-search",attrs:{placeholder:"搜索菜单...",size:"small"},model:{value:t.params.search_value,callback:function(e){t.$set(t.params,"search_value",e)},expression:"params.search_value"}},[n("Select",{staticStyle:{width:"80px"},attrs:{slot:"prepend"},slot:"prepend",model:{value:t.params.search_field,callback:function(e){t.$set(t.params,"search_field",e)},expression:"params.search_field"}},[n("Option",{attrs:{value:"group_name"}},[t._v("菜单名")])],1),t._v(" "),n("Button-group",{staticClass:"input-search-append",staticStyle:{width:"25px"},attrs:{slot:"append"},slot:"append"},[n("Button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"查询",expression:"'查询'"}],staticClass:"btn-search",attrs:{icon:"ios-search"},on:{click:t.search}})],1)],1)],1),t._v(" "),n("Col",{attrs:{span:"8"}},[n("Button",{staticClass:"ml-3",attrs:{type:"primary",icon:"plus"},on:{click:t.add}},[t._v("新增")]),t._v(" "),n("Button",{staticClass:"ml-3",attrs:{type:"primary",icon:"ios-download-outline"},on:{click:t.get_wx_menu}},[t._v("同步微信菜单")])],1)],1)],1),t._v(" "),n("div",{staticClass:"box box-result"},[n("div",{staticClass:"content"},[n("table",{staticClass:"modal-table"},[t._m(0),t._v(" "),t._l(t.data,function(e,i){return n("tr",{key:i},[n("td",[n("div",{staticClass:"ivu-table-cell"},[t._v(t._s(e.group_name))])]),t._v(" "),n("td",[n("div",{staticClass:"ivu-table-cell"},[t._v(t._s(t.getGroupName(e.matchrule)))])]),t._v(" "),n("td",[n("div",{staticClass:"ivu-table-cell"},[1==e.status?n("span",{staticClass:"text-success"},[t._v("菜单生效中")]):n("a",{staticClass:"text-info",on:{click:function(n){t.doactive(e.wm_id)}}},[t._v("生效并置顶")])])]),t._v(" "),n("td",[n("div",{staticClass:"ivu-table-cell"},[n("a",{staticClass:"text-info mr-3",on:{click:function(n){t.edit(e)}}},[t._v("编辑")]),t._v(" "),n("a",{staticClass:"text-info",on:{click:function(n){t.del_menu(e)}}},[t._v("删除")])])])])}),t._v(" "),t.data.length?t._e():n("tr",[t._m(1)])],2),t._v(" "),n("div",{staticClass:"content-footer"},[n("div",{staticClass:"pagenation"},[n("Page",{attrs:{total:t.total,current:t.pageIndex,"show-sizer":!0,"page-size":t.pageSize,"show-total":!0},on:{"on-change":t.pagenation,"on-page-size-change":t.pagesize}})],1)])])])]):n("div",[n("div",{staticClass:"mb-3"},[n("label",{staticStyle:{width:"100px"}},[t._v("菜单组名称")]),t._v(" "),n("Input",{staticStyle:{width:"280px"},attrs:{placeholder:"菜单组名称..."},model:{value:t.menu.group_name,callback:function(e){t.$set(t.menu,"group_name",e)},expression:"menu.group_name"}}),t._v(" "),n("Button",{staticClass:"ml-3",attrs:{icon:"chevron-left"},on:{click:t.back}},[t._v("返回")])],1),t._v(" "),n("div",{staticClass:"mb-3"},[n("label",{staticStyle:{width:"100px"}},[t._v("显示对象")]),t._v(" "),n("Select",{staticStyle:{display:"inline-block",width:"280px"},attrs:{value:t.menu.matchrule?t.menu.matchrule.group_id:0},on:{"on-change":t.tagChange}},t._l(t.group,function(e,i){return n("Option",{key:i,attrs:{value:String(e.id)}},[t._v(t._s(e.name))])}))],1),t._v(" "),n("div",{staticClass:"menu-content-container box"},[n("div",{staticClass:"menu-content-left"},[n("div",{staticClass:"mobile-content-left-body"},[n("div",{staticClass:"mobile-hd"},[t._v(t._s(t.menu.group_name))]),t._v(" "),n("ul",{staticClass:"menu-list"},[t._l(t.menu.buttons,function(e,i){return n("li",{key:i,staticClass:"menu-item",on:{click:function(n){t.active_menu=e,t.active_index=i}}},[n("a",{staticClass:"menu-link",class:t.active_menu==e?"active":""},[n("span",[e.sub_button.length>0?n("i",{staticClass:"icon_menu_dot"}):t._e(),t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t\t\t\t\t")])]),t._v(" "),n("div",{staticClass:"sub-menu-box"},[n("ul",{staticClass:"sub-menu-list"},[t._l(e.sub_button,function(e,i){return n("li",{key:i,staticClass:"sub-menu-item",class:t.active_menu==e?"active":"",on:{click:function(n){n.stopPropagation(),t.active_menu=e}}},[n("span",{staticClass:"sub-menu-item-inner"},[t._v(t._s(e.name))])])}),t._v(" "),e.sub_button.length<5?n("li",{staticClass:"sub-menu-item",on:{click:function(n){n.stopPropagation(),t.addSubMenu(e)}}},[n("span",{staticClass:"sub-menu-item-inner"},[n("Icon",{attrs:{type:"plus"}})],1)]):t._e()],2),t._v(" "),n("i",{staticClass:"arrow arrow-out"}),t._v(" "),n("i",{staticClass:"arrow arrow-in"})])])}),t._v(" "),t.menu.buttons.length<3?n("li",{staticClass:"menu-item",on:{click:t.addMenu}},[n("a",{staticClass:"menu-link"},[n("Icon",{attrs:{type:"plus"}}),t._v(" "),n("span",[t._v("添加菜单")])],1)]):t._e()],2)])]),t._v(" "),n("div",{staticClass:"menu-content-right"},[n("div",{staticClass:"menu-content-right-body"},[n("div",{staticClass:"menu-form-hd"},[n("span",[t._v("当前菜单")]),t._v(" "),n("span",{staticClass:"text-info pull-right",on:{click:t.del}},[t._v("删除菜单")])]),t._v(" "),n("div",{staticClass:"mt-4"},[n("label",{staticStyle:{width:"100px","vertical-align":"top"}},[t._v("菜单名称")]),t._v(" "),n("div",{staticStyle:{display:"inline-block"}},[n("Input",{staticStyle:{width:"280px"},attrs:{placeholder:"菜单名称"},model:{value:t.active_menu.name,callback:function(e){t.$set(t.active_menu,"name",e)},expression:"active_menu.name"}}),t._v(" "),n("br"),t._v(" "),n("p",{staticClass:"mt-2",staticStyle:{color:"#80848f；"}},[t._v("字数不超过4个汉字或8个字母")])],1)]),t._v(" "),t.active_menu.sub_button&&0!==t.active_menu.sub_button.length?t._e():[n("div",{staticClass:"mt-4"},[n("label",{staticStyle:{width:"100px"}},[t._v("菜单内容")]),t._v(" "),n("RadioGroup",{on:{"on-change":t.onchange},model:{value:t.active_menu.type,callback:function(e){t.$set(t.active_menu,"type",e)},expression:"active_menu.type"}},t._l(t.menu_type,function(e,i){return n("Radio",{key:i,staticClass:"ml-3",attrs:{label:e.value}},[t._v(t._s(e.label))])}))],1),t._v(" "),"view"==t.active_menu.type?n("div",{staticClass:"ivu-card-body mt-4 b-a-1",staticStyle:{background:"#FFFFFF"}},[n("p",{staticClass:"mb-4",staticStyle:{color:"#80848f"}},[t._v("订阅者点击该子菜单会跳转到以下链接")]),t._v(" "),n("label",{staticClass:"text-gray-dark",staticStyle:{width:"100px","vertical-align":"top"}},[t._v("页面地址")]),t._v(" "),n("div",{staticStyle:{display:"inline-block"}},[n("select-system-link",{attrs:{"forbid-type":["pc"]},model:{value:t.active_menu.url,callback:function(e){t.$set(t.active_menu,"url",e)},expression:"active_menu.url"}}),t._v(" "),n("p",{staticClass:"mt-2",staticStyle:{color:"#80848f"}},[t._v("指定点击此菜单时要跳转的链接（注：链接需加http://）")])],1)]):n("Card",{staticClass:"mt-4",attrs:{"dis-hover":""}},[n("span",{attrs:{slot:"title"},slot:"title"},[t._v("回复内容")]),t._v(" "),n("div",{staticClass:"card-body"},[n("ul",{staticClass:"keyword-list"},[t.active_menu.media_id?n("li",{staticClass:"keyword-list-item"},[n("div",{staticClass:"desc"},["image"==t.active_item.type?n("div",{staticClass:"appmsgSendedItem"},[n("a",{staticClass:"title-wrap"},[n("span",{staticClass:"icon cover",style:{backgroundImage:"url("+t.format_wx_img(t.active_item.url)+")"}}),t._v(" "),n("span",{staticClass:"title"},[t._v("[图片]")])])]):t._e(),t._v(" "),"news"==t.active_item.type?n("div",{staticClass:"appmsgSendedItem"},[n("a",{staticClass:"title-wrap"},[n("span",{staticClass:"icon cover",style:{backgroundImage:"url("+t.format_wx_img(t.active_item.items[0].thumb_url)+")"}}),t._v(" "),n("span",{staticClass:"title"},[t._v("[图文消息]"+t._s(t.active_item.items[0].title))])]),t._v(" "),n("p",{staticClass:"desc"},[t._v(t._s(t.active_item.items[0].digest))])]):t._e(),t._v(" "),"voice"==t.active_item.type?n("div",{staticClass:"audio-msg"},[n("div",{staticClass:"icon-audio-wrap"},[n("playVoice",{staticClass:"icon-voice-msg",attrs:{src:"http://qms.xiao360.com/api/open/wxvoice?media_id="+t.active_item.media_id}})],1),t._v(" "),n("div",{staticClass:"audio-content"},[n("div",{staticClass:"audio-title"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[语音]\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"),n("p",{staticClass:"text-over-elips"},[t._v(t._s(t.active_item.name))])])])]):t._e(),t._v(" "),"video"==t.active_item.type?n("div",{staticClass:"appmsgSendedItem"},[n("a",{staticClass:"title-wrap"},[n("span",{staticClass:"icon over"},[n("Icon",{attrs:{type:"ios-videocam",size:"30"}})],1),t._v(" "),n("span",{staticClass:"title"},[t._v("[视频]")]),t._v(" "),n("p",[t._v(t._s(t.active_item.name))])]),t._v(" "),n("p",{staticClass:"desc"})]):t._e()])]):t._e()]),t._v(" "),n("div",{staticClass:"card-tab-nav-container"},[n("ul",{staticClass:"tab-navs"},t._l(t.type_list,function(e,i){return n("li",{key:i,staticClass:"tab-nav-item tab-appimg",on:{click:function(n){t.choose_file(e)}}},[n("a",[n("Icon",{attrs:{type:e.icon}}),t._v(" "),n("span",{staticClass:"msg-tab-item-title"},[t._v(t._s(e.text))])],1)])}))])])])]],2),t._v(" "),t._m(2)]),t._v(" "),n("div",{staticStyle:{clear:"both"}})]),t._v(" "),n("div",{staticClass:"pd-10"},[n("Button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("保存并关闭")]),t._v(" "),n("Button",{attrs:{type:"ghost"},on:{click:t.preview}},[t._v("预览")])],1)]),t._v(" "),n("Modal",{attrs:{"mask-closable":!1,title:t.modal.title,width:"900"},model:{value:t.modal.show,callback:function(e){t.$set(t.modal,"show",e)},expression:"modal.show"}},[t.modal.show?n("chooseFile",{ref:"cf",attrs:{type:t.file_type},on:{getFile:t.getFile}}):t._e(),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("span",{staticClass:"pull-left"}),t._v(" "),n("Button",{attrs:{type:"ghost"},on:{click:function(e){t.modal.show=!1}}},[t._v("取消")]),t._v(" "),n("Button",{attrs:{type:"primary"},on:{click:t.confirm_file}},[t._v("确定")])],1)],1),t._v(" "),n("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"},{name:"show",rawName:"v-show",value:t.mobile_preview,expression:"mobile_preview"}],staticClass:"custom-modal-mask",attrs:{"data-transfer":!0}},[n("div",{staticClass:"ivu-modal-mask",staticStyle:{"z-index":"2009"}}),t._v(" "),n("div",{staticClass:"mobile-preview"},[n("div",{staticClass:"mobile-preview-hd"},[n("strong",{staticClass:"nickname"},[t._v(t._s(t.menu.group_name))])]),t._v(" "),n("div",{staticClass:"mobile-preview-bd"}),t._v(" "),n("div",{staticClass:"mobile-preview-ft"},[n("ul",{staticClass:"pre-menu-list"},t._l(t.menu.buttons,function(e,i){return n("li",{key:i,staticClass:"pre-menu-item"},[n("a",[e.sub_button.length>0?n("i",{staticClass:"icon_menu_dot"}):t._e(),t._v("\n\t\t\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t\t\t")]),t._v(" "),e.sub_button.length>0?n("div",{staticClass:"sub-pre-menu-box"},[n("ul",{staticClass:"sub-pre-menu-list"},t._l(e.sub_button,function(e,i){return n("li",[n("a",[t._v(t._s(e.name))])])})),t._v(" "),n("i",{staticClass:"arrow arrow-out"}),t._v(" "),n("i",{staticClass:"arrow arrow-in"})]):t._e()])}))]),t._v(" "),n("button",{staticClass:"mobile-preview-closed",on:{click:function(e){t.mobile_preview=!1}}},[t._v("退出预览")])])])],1)},r=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("th",[n("div",{staticClass:"ivu-table-cell"},[t._v("菜单组名")])]),t._v(" "),n("th",[n("div",{staticClass:"ivu-table-cell"},[t._v("显示对象")])]),t._v(" "),n("th",[n("div",{staticClass:"ivu-table-cell"},[t._v("是否在微信生效"),n("span",{staticClass:"text-desc"},[t._v("（只能生效一个默认菜单）")])])]),t._v(" "),n("th",[n("div",{staticClass:"ivu-table-cell"},[t._v("操作")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("td",{attrs:{colspan:"4"}},[n("div",{staticClass:"ivu-table-cell al-c"},[t._v("还没有自定义菜单")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"menu-content-arrow-left"},[n("i",{staticClass:"editor-arrow editor-arrow-out"}),t._v(" "),n("i",{staticClass:"editor-arrow editor-arrow-in"})])}];i._withStripped=!0;var o={render:i,staticRenderFns:r};e.a=o},3123:function(t,e,n){"use strict";var i=n(2080),r=n(3124),o=n(11),a=o(i.a,r.a,!1,null,null,null);a.options.__file="src/views/system/configs/wxmp/auto-reply.vue",e.a=a.exports},3124:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",["list"==t.mode?n("div",[n("div",{staticClass:"box box-query mb-3"},[n("Row",{staticClass:"mb-3"},[n("Col",{attrs:{span:"6"}},[n("Button-group",[n("Button",{attrs:{size:"small",type:1===t.reply_type?"primary":"ghost",icon:"key"},on:{click:function(e){t.change_status(1)}}},[t._v("关键字回复")]),t._v(" "),n("Button",{attrs:{size:"small",type:2===t.reply_type?"primary":"ghost",icon:"ios-clock"},on:{click:function(e){t.change_status(2)}}},[t._v("首次访问回复")]),t._v(" "),n("Button",{attrs:{size:"small",type:3===t.reply_type?"primary":"ghost",icon:"chatbubbles"},on:{click:function(e){t.change_status(3)}}},[t._v("默认回复")])],1)],1)],1),t._v(" "),1===t.reply_type?n("Row",{attrs:{gutter:16}},[n("Col",{attrs:{span:"6"}},[n("Input",{directives:[{name:"focusme",rawName:"v-focusme",value:"searchkey",expression:"'searchkey'"}],staticClass:"input-search",attrs:{size:"small"},model:{value:t.params.search_value,callback:function(e){t.$set(t.params,"search_value",e)},expression:"params.search_value"}},[n("Select",{staticStyle:{width:"80px"},attrs:{slot:"prepend"},slot:"prepend",model:{value:t.params.search_field,callback:function(e){t.$set(t.params,"search_field",e)},expression:"params.search_field"}},[n("Option",{attrs:{value:"keyword"}},[t._v("关键字")])],1),t._v(" "),n("Button-group",{staticClass:"input-search-append",staticStyle:{width:"25px"},attrs:{slot:"append"},slot:"append"},[n("Button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"查询",expression:"'查询'"}],staticClass:"btn-search",attrs:{icon:"ios-search"},on:{click:t.search}})],1)],1)],1),t._v(" "),n("Col",{attrs:{span:"6"}},[n("Button",{attrs:{type:"primary",size:"small",icon:"plus"},on:{click:t.add}},[t._v("添加")]),t._v(" "),n("Button",{attrs:{disabled:t.disabled,type:"error",size:"small",icon:"ios-trash"},on:{click:t.del_multi}},[t._v("批量删除")])],1)],1):t._e()],1),t._v(" "),n("div",{staticClass:"box box-result"},[1===t.reply_type?n("div",{staticClass:"content"},[n("div",{staticClass:"content-body"},[n("Table",{directives:[{name:"loading",rawName:"v-loading.like",value:"wxmp_rules",expression:"'wxmp_rules'",modifiers:{like:!0}}],attrs:{border:!0,stripe:!0,"show-header":!0,data:t.data,columns:t.columns,"no-data-text":t.$store.state.config.EMPTY_DATA_TEXT,"no-filtered-data-text":t.$store.state.config.EMPTY_FILTER_DATA_TEXT},on:{"on-selection-change":t.selectionChange,"on-sort-change":t.sortChange}})],1),t._v(" "),n("div",{staticClass:"content-footer"},[n("div",{staticClass:"pagenation"},[n("Page",{attrs:{total:t.total,current:t.pageIndex,"show-sizer":!0,"page-size":t.pageSize,"show-total":!0},on:{"on-change":t.pagenation,"on-page-size-change":t.pagesize}})],1)])]):t._e(),t._v(" "),2===t.reply_type?n("Card",{attrs:{"dis-hover":""}},[n("span",{attrs:{slot:"title"},slot:"title"},[t._v("首次访问后自动回复")]),t._v(" "),n("Alert",[t._v("用户关注公众号时，发送的欢迎信息。")]),t._v(" "),t.reply.welcome.keywords?n("div",{staticClass:"padder-sm mb-3"},[n("div",{staticStyle:{display:"inline-block","line-height":"40px"}},[n("span",[t._v("[关键字]")]),n("br"),t._v(" "),n("span",[t._v(t._s(t.reply.welcome.keywords.join("　　")))])])]):t._e(),t._v(" "),n("ul",{staticClass:"tab-navs"},[n("li",{staticClass:"tab-nav-item"},[n("a",{on:{click:function(e){t.modal_choose_word=!0}}},[n("Icon",{attrs:{type:"ios-folder"}}),t._v(" "),n("span",{staticClass:"msg-tab-item-title"},[t._v("触发关键字")])],1)])])],1):t._e(),t._v(" "),3===t.reply_type?n("Card",{attrs:{"dis-hover":""}},[n("span",{attrs:{slot:"title"},slot:"title"},[t._v("触发后自动回复")]),t._v(" "),n("Alert",[t._v("当系统不知道该如何回复粉丝的消息时，默认发送的内容。")]),t._v(" "),t.reply.default.keywords?n("div",{staticClass:"padder-sm mb-3"},[n("div",{staticStyle:{display:"inline-block","line-height":"40px"}},[n("span",[t._v("[关键字]")]),n("br"),t._v(" "),n("span",[t._v(t._s(t.reply.default.keywords.join("　　")))])])]):t._e(),t._v(" "),n("ul",{staticClass:"tab-navs"},[n("li",{staticClass:"tab-nav-item"},[n("a",{on:{click:function(e){t.modal_choose_word=!0}}},[n("Icon",{attrs:{type:"ios-folder"}}),t._v(" "),n("span",{staticClass:"msg-tab-item-title"},[t._v("触发关键字")])],1)])])],1):t._e()],1)]):n("div",[n("table",{staticClass:"modal-table"},[t._m(0),t._v(" "),t._l(t.keyword.keywords,function(e,i){return n("tr",[n("td",[n("div",{staticClass:"ivu-table-cell"},[t._v(t._s(e.content))])]),t._v(" "),n("td",[n("div",{staticClass:"ivu-table-cell"},[t._v(t._s(t.key_type(e.type)))])]),t._v(" "),n("td",[n("div",{staticClass:"ivu-table-cell"},[n("a",{staticClass:"text-info",on:{click:function(n){t.del_keywords(e)}}},[t._v("删除")])])])])}),t._v(" "),n("tr",[n("td",{attrs:{colspan:"3"}},[n("div",{staticClass:"ivu-table-cell"},[n("Button",{attrs:{type:"primary",icon:"plus"},on:{click:function(e){t.modal_keyword=!0}}},[t._v("添加关键字")])],1)])])],2),t._v(" "),n("p",{staticClass:"text-info mt-3"},[n("a",{on:{click:function(e){t.show_advance=!t.show_advance}}},[t.show_advance?n("span",[t._v("\n\t    \t\t\t\t收起高级设置"),n("Icon",{attrs:{type:"chevron-up"}})],1):n("span",[t._v("\n\t    \t\t\t\t展开高级设置"),n("Icon",{attrs:{type:"chevron-down"}})],1)])]),t._v(" "),t.show_advance?n("Card",{staticClass:"mt-3",attrs:{"dis-hover":""}},[n("Form",{attrs:{"label-width":120,"label-position":"left"}},[n("Form-item",{attrs:{label:"规则名称"}},[n("Input",{staticStyle:{width:"380px"},attrs:{placeholder:"请输入回复规则的名称"},model:{value:t.keyword.name,callback:function(e){t.$set(t.keyword,"name",e)},expression:"keyword.name"}}),t._v(" "),n("p",{staticClass:"text-desc"},[t._v("您可以给这组触发关键字规则起一个名字, 方便下次修改和查看.")])],1),t._v(" "),n("Form-item",{attrs:{label:"全局置顶"}},[n("RadioGroup",{model:{value:t.keyword.is_top,callback:function(e){t.$set(t.keyword,"is_top",e)},expression:"keyword.is_top"}},[n("Radio",{attrs:{label:"1"}},[t._v("是")]),t._v(" "),n("Radio",{attrs:{label:"0"}},[t._v("否")])],1)],1),t._v(" "),n("Form-item",{attrs:{label:"回复优先级"}},[n("InputNumber",{staticStyle:{width:"260px"},attrs:{max:254,min:1,step:1},model:{value:t.keyword.displayorder,callback:function(e){t.$set(t.keyword,"displayorder",e)},expression:"keyword.displayorder"}}),t._v(" "),n("p",{staticClass:"text-desc"},[t._v("规则优先级，越大则越靠前，最大不得超过254.")])],1),t._v(" "),n("Form-item",{attrs:{label:"是否开启"}},[n("i-switch",{attrs:{"true-value":1},model:{value:t.keyword.status,callback:function(e){t.$set(t.keyword,"status",e)},expression:"keyword.status"}})],1)],1)],1):t._e(),t._v(" "),n("Card",{staticClass:"mt-3",attrs:{"dis-hover":""}},[n("div",{attrs:{slot:"title"},slot:"title"},[n("span",[t._v("触发后恢复内容")]),t._v(" "),n("span",{staticClass:"pull-right"},[t._v("添加多条回复内容时, 随机回复其中一条")]),t._v(" "),n("div",{staticStyle:{clear:"both"}})]),t._v(" "),n("div",{staticClass:"card-tab-nav-container"},[n("ul",{staticClass:"keyword-list"},t._l(t.keyword.replys,function(e,i){return t.keyword.replys.length>0?n("li",{key:i,staticClass:"keyword-list-item b-b-1"},[n("div",{staticClass:"desc"},["text"==e.type?n("div",[n("div",{staticClass:"desc"},[n("Tooltip",{attrs:{content:e.content}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.content)+"\n\t\t\t\t\t\t\t\t\t\t")])],1)]):t._e(),t._v(" "),"image"==e.type?n("div",{staticClass:"appmsgSendedItem"},[n("a",{staticClass:"title-wrap"},[n("span",{staticClass:"icon cover",style:{backgroundImage:"url("+t.format_wx_img(e.url)+")"}}),t._v(" "),n("span",{staticClass:"title"},[t._v("[图片]")])])]):t._e(),t._v(" "),"news"==e.type?n("div",{staticClass:"appmsgSendedItem"},[n("a",{staticClass:"title-wrap"},[n("span",{staticClass:"icon cover",style:{backgroundImage:"url("+t.format_wx_img(e.items[0].thumb_url)+")"}}),t._v(" "),n("span",{staticClass:"title"},[t._v("[图文消息]"+t._s(e.items[0].title))])]),t._v(" "),n("p",{staticClass:"desc"},[t._v(t._s(e.items[0].digest))])]):t._e(),t._v(" "),"voice"==e.type?n("div",{staticClass:"audio-msg"},[n("div",{staticClass:"icon-audio-wrap"},[n("playVoice",{staticClass:"icon-voice-msg",attrs:{active:t.active_voice===i,src:"http://qms.xiao360.com/api/open/wxvoice?media_id="+e.media_id},on:{click:function(e){t.active_voice=i}}})],1),t._v(" "),n("div",{staticClass:"audio-content"},[n("div",{staticClass:"audio-title"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t[语音]\n\t\t\t\t\t\t\t\t\t\t\t"),n("p",{staticClass:"text-over-elips"},[t._v(t._s(e.name))])])])]):t._e(),t._v(" "),"video"==e.type?n("div",{staticClass:"appmsgSendedItem"},[n("a",{staticClass:"title-wrap"},[n("span",{staticClass:"icon over"}),t._v(" "),n("span",{staticClass:"title"},[t._v("[视频]")]),t._v(" "),n("p",[t._v(t._s(e.name))])]),t._v(" "),n("p",{staticClass:"desc"})]):t._e(),t._v(" "),n("div",{staticClass:"pull-right"},[n("a",{staticClass:"text-info",on:{click:function(n){t.del_replys(e)}}},[t._v("删除")])]),t._v(" "),n("div",{staticStyle:{clear:"both"}})])]):t._e()})),t._v(" "),n("ul",{staticClass:"tab-navs"},t._l(t.type_list,function(e,i){return n("li",{key:i,staticClass:"tab-nav-item tab-appimg",on:{click:function(n){t.choose_file(e)}}},[n("a",[n("Icon",{attrs:{type:e.icon}}),t._v(" "),n("span",{staticClass:"msg-tab-item-title"},[t._v(t._s(e.text))])],1)])}))])]),t._v(" "),n("div",{staticClass:"footer-btn mt-3",staticStyle:{"padding-left":"0"}},[n("Button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("提交")]),t._v(" "),n("Button",{attrs:{type:"ghost"},on:{click:t.back}},[t._v("返回")])],1)],1),t._v(" "),n("Modal",{attrs:{title:"添加关键字","mask-closable":!1,width:"680"},on:{"on-cancel":t.close_keyword},model:{value:t.modal_keyword,callback:function(e){t.modal_keyword=e},expression:"modal_keyword"}},[n("Form",{attrs:{"label-width":150,"label-position":"left"}},[n("Form-item",{attrs:{label:"触发关键字"}},[n("RadioGroup",{model:{value:t.key_item.type,callback:function(e){t.$set(t.key_item,"type",e)},expression:"key_item.type"}},t._l(t.key_item_types,function(e,i){return n("Radio",{key:i,attrs:{label:e.value}},[t._v(t._s(e.text))])})),t._v(" "),n("Input",{staticStyle:{width:"380px"},attrs:{placeholder:"请输入关键字..."},model:{value:t.key_item.content,callback:function(e){t.$set(t.key_item,"content",e)},expression:"key_item.content"}})],1),t._v(" "),n("Form-item",[3==t.key_item.type?n("span",{staticClass:"text-desc"},[t._v("\n\t    \t\t\t\t用户进行交谈时，对话内容符合述关键字中定义的模式才会执行这条规则。"),n("br"),t._v("\n\t\t\t\t\t\t注意：如果你不明白正则表达式的工作方式，请不要使用正则匹配"),n("br"),t._v("\n\t\t\t\t\t\t注意：正则匹配使用MySQL的匹配引擎，请使用MySQL的正则语法"),n("br"),t._v("\n\t\t\t\t\t\t示例："),n("br"),t._v("\n\t\t\t\t\t\t^微信匹配以“微信”开头的语句"),n("br"),t._v("\n\t\t\t\t\t\t微信$匹配以“微信”结尾的语句"),n("br"),t._v("\n\t\t\t\t\t\t^微信$匹配等同“微信”的语句"),n("br"),t._v("\n\t\t\t\t\t\t微信匹配包含“微信”的语句"),n("br"),t._v("\n\t\t\t\t\t\t[0-9.-]匹配所有的数字，句号和减号"),n("br"),t._v("\n\t\t\t\t\t\t^[a-zA-Z_]$所有的字母和下划线"),n("br"),t._v("\n\t\t\t\t\t\t^[[:alpha:]]{3}$所有的3个字母的单词"),n("br"),t._v("\n\t\t\t\t\t\t^a{4}$aaaa"),n("br"),t._v("\n\t\t\t\t\t\t^a{2,4}$aa，aaa或aaaa"),n("br"),t._v("\n\t\t\t\t\t\t^a{2,}$匹配多于两个a的字符串\n\t    \t\t\t")]):n("span",{staticClass:"text-desc"},[t._v("多个关键字请使用逗号隔开，如天气，今日天气")])])],1),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"ghost"},on:{click:t.close_keyword}},[t._v("取消")]),t._v(" "),n("Button",{attrs:{disabled:""==t.key_item.content,type:"primary"},on:{click:t.add_keywords}},[t._v("确定")])],1)],1),t._v(" "),n("Modal",{attrs:{"mask-closable":!1,title:t.modal.title,width:"900"},model:{value:t.modal.show,callback:function(e){t.$set(t.modal,"show",e)},expression:"modal.show"}},[t.modal.show?n("chooseFile",{ref:"cf",attrs:{type:t.file_type},on:{getFile:t.getFile}}):t._e(),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("span",{staticClass:"pull-left"}),t._v(" "),n("Button",{attrs:{type:"ghost"},on:{click:function(e){t.modal.show=!1}}},[t._v("取消")]),t._v(" "),n("Button",{attrs:{type:"primary"},on:{click:t.confirm_file}},[t._v("确定")])],1)],1),t._v(" "),n("Modal",{attrs:{"mask-closable":!1,width:"680",title:"选择关键字"},model:{value:t.modal_choose_word,callback:function(e){t.modal_choose_word=e},expression:"modal_choose_word"}},[n("Row",{attrs:{gutter:10}},t._l(t.data,function(e,i){return n("Col",{key:i,attrs:{span:"6"}},[n("a",{staticClass:"keyword-item",class:t.rule_id==e.rule_id?"active":"",on:{click:function(n){t.rule_id=e.rule_id}}},[n("span",{staticClass:"mr-2"},[t._l(e.keywords,function(e,n){return[t._v("\n    \t\t\t\t\t\t\t"+t._s(e.content)+"  \n    \t\t\t\t\t\t")]})],2)])])})),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"ghost"},on:{click:function(e){t.modal_choose_word=!1,t.rule_id=0}}},[t._v("取消")]),t._v(" "),n("Button",{attrs:{type:"primary",disabled:0===t.rule_id},on:{click:t.set_reply_message}},[t._v("确认")])],1)],1)],1)},r=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("th",[n("div",{staticClass:"ivu-table-cell"},[t._v("关键字")])]),t._v(" "),n("th",[n("div",{staticClass:"ivu-table-cell"},[t._v("触发类型")])]),t._v(" "),n("th",[n("div",{staticClass:"ivu-table-cell"},[t._v("操作")])])])}];i._withStripped=!0;var o={render:i,staticRenderFns:r};e.a=o},3125:function(t,e,n){"use strict";var i=n(2081),r=n(3132),o=n(11),a=o(i.a,r.a,!1,null,null,null);a.options.__file="src/views/system/configs/wxmp/source-manage.vue",e.a=a.exports},3126:function(t,e,n){"use strict";function i(t){a||n(3127)}var r=n(2082),o=n(3131),a=!1,s=n(11),u=i,l=s(r.a,o.a,!1,u,null,null);l.options.__file="src/views/components/QUpload.vue",e.a=l.exports},3127:function(t,e){},3128:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_typeof__=__webpack_require__(27),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_typeof___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_typeof__),__WEBPACK_IMPORTED_MODULE_1__plupload__=__webpack_require__(3129);/*!
 * qiniu-js-sdk v1.0.21
 *
 * Copyright 2015 by Qiniu
 * Released under GPL V2 License.
 *
 * GitHub: http://github.com/qiniu/js-sdk
 *
 * Date: 2017-7-26
 */
!function(global){function createCookie(t,e,n){var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3);var r="; expires="+i.toGMTString();document.cookie=t+"="+e+r+"; path=/"}function readCookie(t){for(var e=t+"=",n=document.cookie.split(";"),i=0,r=n.length;i<r;i++){for(var o=n[i];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(e))return o.substring(e.length,o.length)}return null}function QiniuJsSDK(){function log(t,e){for(var n="[qiniu-js-sdk]["+t+"]",i=n,r=0;r<e.length;r++)"string"==typeof e[r]?i+=" "+e[r]:i+=" "+that.stringifyJSON(e[r]);that.detectIEVersion()?console.log(i):(e.unshift(n),console.log.apply(console,e)),document.getElementById("qiniu-js-sdk-log")&&(document.getElementById("qiniu-js-sdk-log").innerHTML+="<p>"+i+"</p>")}function makeLogFunc(t){var e=t.toLowerCase();logger[e]=function(){if(window.console&&window.console.log&&logger.level>=logger[t]){var n=Array.prototype.slice.call(arguments);log(e,n)}}}function StatisticsLogger(){function t(){for(var t=[],n=0;n<i.length;n++)i[n].status!==r.finished&&t.push(i[n]),i[n].status===r.waiting&&e(i[n]);i=t}function e(t){t.status=r.processing;var e=that.createAjax();e.open("POST",n,!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.setRequestHeader("Authorization","UpToken "+that.token),e.onreadystatechange=function(){4===e.readyState&&(200===e.status?(logger.debug("[STATISTICS] successfully report log to server"),t.status=r.finished):(logger.debug("[STATISTICS] report log to server failed"),t.status=r.waiting))},e.send(t.log)}var n="https://uplog.qbox.me/log/3",i=[],r={waiting:0,processing:1,finished:2};this.log=function(t,e,n,o,a,s,u,l,c,d){var f=Array.prototype.join.call(arguments,",");i.push({log:f,status:r.waiting}),logger.debug("[STATISTICS] send log to statistics server",f)},setInterval(t,1e3)}var that=this;this.detectIEVersion=function(){for(var t=4,e=document.createElement("div"),n=e.getElementsByTagName("i");e.innerHTML="\x3c!--[if gt IE "+t+"]><i></i><![endif]--\x3e",n[0];)t++;return t>4&&t};var logger={MUTE:0,FATA:1,ERROR:2,WARN:3,INFO:4,DEBUG:5,TRACE:6,level:0};for(var property in logger)logger.hasOwnProperty(property)&&"number"==typeof logger[property]&&!logger.hasOwnProperty(property.toLowerCase())&&makeLogFunc(property);var qiniuUploadUrl;qiniuUploadUrl="https:"===window.location.protocol?"https://up.qbox.me":"http://upload.qiniu.com";var qiniuUploadUrls=["http://upload.qiniu.com","http://up.qiniu.com"],qiniuUpHosts={http:["http://upload.qiniu.com","http://up.qiniu.com"],https:["https://up.qbox.me"]},changeUrlTimes=0,statisticsLogger=new StatisticsLogger,ExtraErrors={ZeroSizeFile:-6,InvalidToken:-5,InvalidArgument:-4,InvalidFile:-3,Cancelled:-2,NetworkError:-1,UnknownError:0,TimedOut:-1001,UnknownHost:-1003,CannotConnectToHost:-1004,NetworkConnectionLost:-1005};this.resetUploadUrl=function(){var t="https:"===window.location.protocol?qiniuUpHosts.https:qiniuUpHosts.http,e=changeUrlTimes%t.length;qiniuUploadUrl=t[e],changeUrlTimes++,logger.debug("resetUploadUrl: "+qiniuUploadUrl)},this.isImage=function(t){return t=t.split(/[?#]/)[0],/\.(png|jpg|jpeg|gif|bmp)$/i.test(t)},this.getFileExtension=function(t){var e=t.split(".");return 1===e.length||""===e[0]&&2===e.length?"":e.pop().toLowerCase()},this.utf8_encode=function(t){if(null===t||void 0===t)return"";var e,n,i=t+"",r="",o=0;e=n=0,o=i.length;for(var a=0;a<o;a++){var s=i.charCodeAt(a),u=null;if(s<128)n++;else if(s>127&&s<2048)u=String.fromCharCode(s>>6|192,63&s|128);else if(63488&s^!0)u=String.fromCharCode(s>>12|224,s>>6&63|128,63&s|128);else{if(64512&s^!0)throw new RangeError("Unmatched trail surrogate at "+a);var l=i.charCodeAt(++a);if(64512&l^!0)throw new RangeError("Unmatched lead surrogate at "+(a-1));s=((1023&s)<<10)+(1023&l)+65536,u=String.fromCharCode(s>>18|240,s>>12&63|128,s>>6&63|128,63&s|128)}null!==u&&(n>e&&(r+=i.slice(e,n)),r+=u,e=n=a+1)}return n>e&&(r+=i.slice(e,o)),r},this.base64_decode=function(t){var e,n,i,r,o,a,s,u,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c=0,d=0,f=[];if(!t)return t;t+="";do{r=l.indexOf(t.charAt(c++)),o=l.indexOf(t.charAt(c++)),a=l.indexOf(t.charAt(c++)),s=l.indexOf(t.charAt(c++)),u=r<<18|o<<12|a<<6|s,e=u>>16&255,n=u>>8&255,i=255&u,f[d++]=64===a?String.fromCharCode(e):64===s?String.fromCharCode(e,n):String.fromCharCode(e,n,i)}while(c<t.length);return f.join("")},this.base64_encode=function(t){var e,n,i,r,o,a,s,u,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c=0,d=0,f="",p=[];if(!t)return t;t=this.utf8_encode(t+"");do{e=t.charCodeAt(c++),n=t.charCodeAt(c++),i=t.charCodeAt(c++),u=e<<16|n<<8|i,r=u>>18&63,o=u>>12&63,a=u>>6&63,s=63&u,p[d++]=l.charAt(r)+l.charAt(o)+l.charAt(a)+l.charAt(s)}while(c<t.length);switch(f=p.join(""),t.length%3){case 1:f=f.slice(0,-2)+"==";break;case 2:f=f.slice(0,-1)+"="}return f},this.URLSafeBase64Encode=function(t){return t=this.base64_encode(t),t.replace(/\//g,"_").replace(/\+/g,"-")},this.URLSafeBase64Decode=function(t){return t=t.replace(/_/g,"/").replace(/-/g,"+"),this.base64_decode(t)},this.createAjax=function(t){return window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},this.parseJSON=function(data){if(window.JSON&&window.JSON.parse)return window.JSON.parse(data);var rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,text=String(data);return rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),eval("("+text+")")},this.stringifyJSON=function(t){if(window.JSON&&window.JSON.stringify)return window.JSON.stringify(t);switch(void 0===t?"undefined":__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_typeof___default()(t)){case"string":return'"'+t.replace(/(["\\])/g,"\\$1")+'"';case"array":return"["+t.map(that.stringifyJSON).join(",")+"]";case"object":if(t instanceof Array){for(var e=[],n=t.length,i=0;i<n;i++)e.push(that.stringifyJSON(t[i]));return"["+e.join(",")+"]"}if(null===t)return"null";var r=[];for(var o in t)t.hasOwnProperty(o)&&r.push(that.stringifyJSON(o)+":"+that.stringifyJSON(t[o]));return"{"+r.join(",")+"}";case"number":case!1:case"boolean":return t}},this.trim=function(t){return null===t?"":t.replace(/^\s+|\s+$/g,"")},this.uploader=function(t){var e=function(t){for(var e=[],n=-1,i=0;i<t.length;i++){var r=t[i];-1!==r.indexOf("upload")&&(n=i),0===r.indexOf("-H")?e.push(r.split(" ")[2]):e.push(r)}if(-1!==n){var o=e[n];e[n]=e[0],e[0]=o}return e},n=function(t){var e=t.split(":"),n=e[0],i=that.parseJSON(that.URLSafeBase64Decode(e[2]));return i.ak=n,i.scope.indexOf(":")>=0?(i.bucket=i.scope.split(":")[0],i.key=i.scope.split(":")[1]):i.bucket=i.scope,i},i=function(i){var r=n(i),o=window.location.protocol+"//uc.qbox.me/v1/query?ak="+r.ak+"&bucket="+r.bucket;logger.debug("putPolicy: ",r),logger.debug("get uphosts from: ",o);var a,s=that.detectIEVersion();s&&s<=9?(a=new moxie.xhr.XMLHttpRequest,moxie.core.utils.Env.swf_url=t.flash_swf_url):a=that.createAjax(),a.open("GET",o,!1);var u=function(){if(logger.debug("ajax.readyState: ",a.readyState),4===a.readyState)if(logger.debug("ajax.status: ",a.status),a.status<400){var t=that.parseJSON(a.responseText);qiniuUpHosts.http=e(t.http.up),qiniuUpHosts.https=e(t.https.up),logger.debug("get new uphosts: ",qiniuUpHosts),that.resetUploadUrl()}else logger.error("get uphosts error: ",a.responseText)};s&&s<=9?a.bind("readystatechange",u):a.onreadystatechange=u,a.send()},r=function(e){return!that.token||t.uptoken_url&&that.tokenInfo.isExpired()?o(e):that.token},o=function(e){if(t.uptoken)that.token=t.uptoken;else if(t.uptoken_url){logger.debug("get uptoken from: ",that.uptoken_url);var n=that.createAjax();if(n.open("GET",that.uptoken_url+"?"+ +new Date,!1),t.header)for(var r in t.header)n.setRequestHeader(r,t.header[r]);if(n.send(),200===n.status){var o=that.parseJSON(n.responseText);that.token=o.uptoken;var a=that.token.split(":"),s=that.parseJSON(that.URLSafeBase64Decode(a[2]));that.tokenMap||(that.tokenMap={});var u=function(t){return Math.ceil(t.getTime()/1e3)},l=u(new Date(n.getResponseHeader("date"))),c=u(new Date);that.tokenInfo={serverDelay:c-l,deadline:s.deadline,isExpired:function(){return this.deadline-u(new Date)+this.serverDelay<600}},logger.debug("get new uptoken: ",that.token),logger.debug("get token info: ",that.tokenInfo)}else logger.error("get uptoken error: ",n.responseText)}else t.uptoken_func?(logger.debug("get uptoken from uptoken_func"),that.token=t.uptoken_func(e),logger.debug("get new uptoken: ",that.token)):logger.error("one of [uptoken, uptoken_url, uptoken_func] settings in options is required!");return that.token&&i(that.token),that.token},a=function(e,n,i){var r="",o=!1;if(!t.save_key)if(o=e.getOption&&e.getOption("unique_names"),o=o||e.settings&&e.settings.unique_names){var a=that.getFileExtension(n.name);r=a?n.id+"."+a:n.id}else r="function"==typeof i?i(e,n):n.name;return r},s=function(t){if(t&&t.match){var e=t.match(/^https?:\/\/([^:^\/]*)/);return e?e[1]:""}return""},u=function(t){if(t&&t.match){var e=t.match(/(^https?)/);if(!e)return"";var n=e[1];return e=t.match(/^https?:\/\/([^:^\/]*):(\d*)/),e?e[2]:"http"===n?"80":"443"}return""};if(t.log_level&&(logger.level=t.log_level),!t.domain)throw"domain setting in options is required!";if(!t.browse_button)throw"browse_button setting in options is required!";if(!t.uptoken&&!t.uptoken_url&&!t.uptoken_func)throw"one of [uptoken, uptoken_url, uptoken_func] settings in options is required!";logger.debug("init uploader start"),logger.debug("environment: ",moxie.core.utils.Env),logger.debug("userAgent: ",navigator.userAgent);var l={},c=t.init&&t.init.Error,d=t.init&&t.init.FileUploaded;t.init.Error=function(){},t.init.FileUploaded=function(){},that.uptoken_url=t.uptoken_url,that.token="",that.key_handler="function"==typeof t.init.Key?t.init.Key:"",this.domain=t.domain;var f="",p={isResumeUpload:!1,resumeFilesize:0,startTime:"",currentTime:""};!function(){var e,n,i=that.detectIEVersion(),r="Safari"===moxie.core.utils.Env.browser&&moxie.core.utils.Env.version<=5&&"Windows"===moxie.core.utils.Env.os&&"7"===moxie.core.utils.Env.osVersion||"Safari"===moxie.core.utils.Env.browser&&"iOS"===moxie.core.utils.Env.os&&"7"===moxie.core.utils.Env.osVersion;i&&i<9&&t.chunk_size&&t.runtimes.indexOf("flash")>=0?t.chunk_size=0:r?t.chunk_size=0:(e=20,n=4<<e,__WEBPACK_IMPORTED_MODULE_1__plupload__.a.parseSize(t.chunk_size)>n&&(t.chunk_size=n))}(),logger.debug("invoke reset_chunk_size()"),logger.debug("op.chunk_size: ",t.chunk_size);var h={url:qiniuUploadUrl,multipart_params:{token:""}},m=that.detectIEVersion();m&&m<=9&&(h.multipart_params.accept="text/plain; charset=utf-8",logger.debug("add accept text/plain in multipart params")),__WEBPACK_IMPORTED_MODULE_1__plupload__.a.extend(l,t,h),logger.debug("option: ",l);var g=new __WEBPACK_IMPORTED_MODULE_1__plupload__.a.Uploader(l);logger.debug("new plupload.Uploader(option)"),g.bind("Init",function(e,n){logger.debug("Init event activated"),t.get_new_uptoken||o(null)}),logger.debug("bind Init event"),g.bind("FilesAdded",function(t,e){logger.debug("FilesAdded event activated");var n=t.getOption&&t.getOption("auto_start");n=n||t.settings&&t.settings.auto_start,logger.debug("auto_start: ",n),logger.debug("files: ",e);if(function(){return"ios"===moxie.core.utils.Env.OS.toLowerCase()}())for(var i=0;i<e.length;i++){var r=e[i],o=that.getFileExtension(r.name);r.name=r.id+"."+o}n&&setTimeout(function(){t.start(),logger.debug("invoke up.start()")},0),t.refresh()}),logger.debug("bind FilesAdded event"),g.bind("BeforeUpload",function(e,n){logger.debug("BeforeUpload event activated"),n._start_at=new Date,n.speed=n.speed||0,f="",t.get_new_uptoken&&o(n);var i=function(e,n,i){p.startTime=(new Date).getTime();var r;r=t.save_key?{token:that.token}:{key:a(e,n,i),token:that.token};var o=that.detectIEVersion();o&&o<=9&&(r.accept="text/plain; charset=utf-8",logger.debug("add accept text/plain in multipart params")),logger.debug("directUpload multipart_params_obj: ",r);var u=t.x_vars;if(void 0!==u&&"object"===(void 0===u?"undefined":__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_typeof___default()(u)))for(var l in u)u.hasOwnProperty(l)&&("function"==typeof u[l]?r["x:"+l]=u[l](e,n):"object"!==__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_typeof___default()(u[l])&&(r["x:"+l]=u[l]));e.setOption({url:qiniuUploadUrl,multipart:!0,chunk_size:s()?t.max_file_size:void 0,multipart_params:r})},s=function(){var t=navigator.userAgent.toLowerCase();return!(!t.match(/MicroMessenger/i)&&"QQBrowser"!==moxie.core.utils.Env.browser&&!t.match(/V1_AND_SQ/i)||"android"!==moxie.core.utils.Env.OS.toLowerCase())},u=e.getOption&&e.getOption("chunk_size");if(u=u||e.settings&&e.settings.chunk_size,logger.debug("uploader.runtime: ",g.runtime),logger.debug("chunk_size: ",u),"html5"!==g.runtime&&"flash"!==g.runtime||!u)logger.debug("directUpload because uploader.runtime !== 'html5' || uploader.runtime !== 'flash' || !chunk_size"),i(e,n,that.key_handler);else if(n.size<u||s())logger.debug("directUpload because file.size < chunk_size || is_android_weixin_or_qq()"),i(e,n,that.key_handler);else{var l=localStorage.getItem(n.name),c=u;if(l){l=that.parseJSON(l);var d=(new Date).getTime(),h=l.time||0;d-h<864e5&&100!==l.percent&&n.size===l.total?(n.percent=l.percent,n.loaded=l.offset,f=l.ctx,p.isResumeUpload=!0,p.resumeFilesize=l.offset,l.offset+c>n.size&&(c=n.size-l.offset)):localStorage.removeItem(n.name)}p.startTime=(new Date).getTime();var m={},v=that.detectIEVersion();v&&v<=9&&(m.accept="text/plain; charset=utf-8",logger.debug("add accept text/plain in multipart params")),e.setOption({url:qiniuUploadUrl+"/mkblk/"+c,multipart:!1,chunk_size:u,required_features:"chunks",headers:{Authorization:"UpToken "+r(n)},multipart_params:m})}}),logger.debug("bind BeforeUpload event"),g.bind("UploadProgress",function(t,e){logger.trace("UploadProgress event activated"),p.currentTime=(new Date).getTime();var n=p.currentTime-p.startTime,i=e.loaded||0;p.isResumeUpload&&(i=e.loaded-p.resumeFilesize),e.speed=(i/n*1e3).toFixed(0)||0}),logger.debug("bind UploadProgress event"),g.bind("ChunkUploaded",function(t,e,n){logger.debug("ChunkUploaded event activated"),logger.debug("ChunkUploaded file: ",e),logger.debug("ChunkUploaded info: ",n);var i=that.parseJSON(n.response);logger.debug("ChunkUploaded res: ",i),f=f?f+","+i.ctx:i.ctx;var o=n.total-n.offset,a=t.getOption&&t.getOption("chunk_size");a=a||t.settings&&t.settings.chunk_size,o<a&&(t.setOption({url:qiniuUploadUrl+"/mkblk/"+o}),logger.debug("up.setOption url: ",qiniuUploadUrl+"/mkblk/"+o)),t.setOption({headers:{Authorization:"UpToken "+r(e)}}),localStorage.setItem(e.name,that.stringifyJSON({ctx:f,percent:e.percent,total:n.total,offset:n.offset,time:(new Date).getTime()}))}),logger.debug("bind ChunkUploaded event");var v=qiniuUploadUrls.length,_=function(t){return v-- >0?(setTimeout(function(){that.resetUploadUrl(),t.status=__WEBPACK_IMPORTED_MODULE_1__plupload__.a.QUEUED,g.stop(),g.start()},0),!0):(v=qiniuUploadUrls.length,!1)};return g.bind("Error",function(e){return function(n,i){logger.error("Error event activated"),logger.error("err: ",i);var r=new Date,o="",a=i.file;if(a){switch(i.code){case __WEBPACK_IMPORTED_MODULE_1__plupload__.a.FAILED:o="上传失败。请稍后再试。";break;case __WEBPACK_IMPORTED_MODULE_1__plupload__.a.FILE_SIZE_ERROR:var l=n.getOption&&n.getOption("max_file_size");l=l||n.settings&&n.settings.max_file_size,o="浏览器最大可上传"+l+"。更大文件请使用命令行工具。";break;case __WEBPACK_IMPORTED_MODULE_1__plupload__.a.FILE_EXTENSION_ERROR:o="文件验证失败。请稍后重试。";break;case __WEBPACK_IMPORTED_MODULE_1__plupload__.a.HTTP_ERROR:if(""===i.response){if(o=i.message||"未知网络错误。",!_(a))return;break}var c=that.parseJSON(i.response),d=c.error;switch(i.status){case 400:o="请求报文格式错误。";break;case 401:o="客户端认证授权失败。请重试或提交反馈。";break;case 405:o="客户端请求错误。请重试或提交反馈。";break;case 579:o="资源上传成功，但回调失败。";break;case 599:if(o="网络连接异常。请重试或提交反馈。",!_(a))return;break;case 614:o="文件已存在。";try{c=that.parseJSON(c.error),d=c.error||"file exists"}catch(t){d=c.error||"file exists"}break;case 631:o="指定空间不存在。";break;case 701:o="上传数据块校验出错。请重试或提交反馈。";break;default:if(o="未知错误。",!_(a))return}o=o+"("+i.status+"："+d+")";break;case __WEBPACK_IMPORTED_MODULE_1__plupload__.a.SECURITY_ERROR:o="安全配置错误。请联系网站管理员。";break;case __WEBPACK_IMPORTED_MODULE_1__plupload__.a.GENERIC_ERROR:case __WEBPACK_IMPORTED_MODULE_1__plupload__.a.IO_ERROR:o="上传失败。请稍后再试。";break;case __WEBPACK_IMPORTED_MODULE_1__plupload__.a.INIT_ERROR:o="网站配置错误。请联系网站管理员。",g.destroy();break;default:if(o=i.message+i.details,!_(a))return}e&&e(n,i,o)}if(n.refresh(),!t.disable_statistics_report){var f=i&&i.responseHeaders&&i.responseHeaders.match?i.responseHeaders.match(/(X-Reqid\:\ )([\w\.\%-]*)/):[],p=f[2],h=__WEBPACK_IMPORTED_MODULE_1__plupload__.a.HTTP_ERROR?i.status:i.code,m=a._start_at?a._start_at.getTime():r.getTime();statisticsLogger.log(0===h?ExtraErrors.NetworkError:h,p,s(n.settings.url),void 0,u(n.settings.url),r.getTime()-m,m,i.file.size*(i.file.percent/100),"jssdk-"+n.runtime,a.size)}}}(c)),logger.debug("bind Error event"),g.bind("FileUploaded",function(e){return function(n,i,r){logger.debug("FileUploaded event activated"),logger.debug("FileUploaded file: ",i),logger.debug("FileUploaded info: ",r);var o=new Date,l=function(n,i,r){if(logger.debug("FileUploaded last step:",r),t.downtoken_url){var o=that.createAjax();o.open("POST",t.downtoken_url,!0),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.onreadystatechange=function(){if(4===o.readyState)if(200===o.status){var t;try{t=that.parseJSON(o.responseText)}catch(t){throw"invalid json format"}var a={};__WEBPACK_IMPORTED_MODULE_1__plupload__.a.extend(a,that.parseJSON(r.response),t),r.response=that.stringifyJSON(a),e&&e(n,i,r)}else g.trigger("Error",{status:o.status,response:o.responseText,file:i,code:__WEBPACK_IMPORTED_MODULE_1__plupload__.a.HTTP_ERROR})},o.send("key="+that.parseJSON(r.response).key+"&domain="+t.domain)}else e&&e(n,i,r)},c=that.parseJSON(r.response);if(f=f||c.ctx,logger.debug("ctx: ",f),f){var d="";logger.debug("save_key: ",t.save_key),t.save_key||(d=a(n,i,that.key_handler),d=d?"/key/"+that.URLSafeBase64Encode(d):"");var p="/fname/"+that.URLSafeBase64Encode(i.name);logger.debug("op.x_vars: ",t.x_vars);var h=t.x_vars,m="",v="";if(void 0!==h&&"object"===(void 0===h?"undefined":__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_typeof___default()(h)))for(var _ in h)h.hasOwnProperty(_)&&("function"==typeof h[_]?m=that.URLSafeBase64Encode(h[_](n,i)):"object"!==__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_typeof___default()(h[_])&&(m=that.URLSafeBase64Encode(h[_])),v+="/x:"+_+"/"+m);var y,w=qiniuUploadUrl+"/mkfile/"+i.size+d+p+v,b=that.detectIEVersion();b&&b<=9?(y=new moxie.xhr.XMLHttpRequest,moxie.core.utils.Env.swf_url=t.flash_swf_url):y=that.createAjax(),y.open("POST",w,!0),y.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),y.setRequestHeader("Authorization","UpToken "+that.token);var x=function(){if(logger.debug("ajax.readyState: ",y.readyState),4===y.readyState){localStorage.removeItem(i.name);var t;200===y.status?(t={status:y.status,response:y.responseText,responseHeaders:y.getAllResponseHeaders()},logger.debug("mkfile is success: ",t),l(n,i,t)):(t={status:y.status,response:y.responseText,file:i,code:-200,responseHeaders:y.getAllResponseHeaders()},logger.debug("mkfile is error: ",t),g.trigger("Error",t))}};b&&b<=9?y.bind("readystatechange",x):y.onreadystatechange=x,y.send(f),logger.debug("mkfile: ",w)}else l(n,i,r);if(!t.disable_statistics_report){var E=r.responseHeaders.match(/(X-Reqid\:\ )([\w\.\%-]*)/)[2],C=i._start_at?i._start_at.getTime():o.getTime();statisticsLogger.log(r.status,E,s(n.settings.url),void 0,u(n.settings.url),o.getTime()-C,C,i.size,"jssdk-"+n.runtime,i.size)}}}(d)),logger.debug("bind FileUploaded event"),g.bind("FilesRemoved",function(e,n){var i=new Date;if(!t.disable_statistics_report)for(var r=0;r<n.length;r++)statisticsLogger.log(ExtraErrors.Cancelled,void 0,s(e.settings.url),void 0,u(e.settings.url),i.getTime()-n[r]._start_at.getTime(),n[r]._start_at.getTime(),n[r].size*n[r].percent/100,"jssdk-"+e.runtime,n[r].size)}),logger.debug("bind FilesRemoved event"),g.init(),logger.debug("invoke uploader.init()"),logger.debug("init uploader end"),g},this.getUrl=function(t){if(!t)return!1;t=encodeURI(t);var e=this.domain;return"/"!==e.slice(e.length-1)&&(e+="/"),e+t},this.imageView2=function(t,e){if(!/^\d$/.test(t.mode))return!1;var n=t.mode,i=t.w||"",r=t.h||"",o=t.q||"",a=t.format||"";if(!i&&!r)return!1;var s="imageView2/"+n;return s+=i?"/w/"+i:"",s+=r?"/h/"+r:"",s+=o?"/q/"+o:"",s+=a?"/format/"+a:"",e&&(s=this.getUrl(e)+"?"+s),s},this.imageMogr2=function(t,e){var n=t["auto-orient"]||"",i=t.thumbnail||"",r=t.strip||"",o=t.gravity||"",a=t.crop||"",s=t.quality||"",u=t.rotate||"",l=t.format||"",c=t.blur||"",d="imageMogr2";return d+=n?"/auto-orient":"",d+=i?"/thumbnail/"+i:"",d+=r?"/strip":"",d+=o?"/gravity/"+o:"",d+=s?"/quality/"+s:"",d+=a?"/crop/"+a:"",d+=u?"/rotate/"+u:"",d+=l?"/format/"+l:"",d+=c?"/blur/"+c:"",e&&(d=this.getUrl(e)+"?"+d),d},this.watermark=function(t,e){var n=t.mode;if(!n)return!1;var i="watermark/"+n;if(1===n){var r=t.image||"";if(!r)return!1;i+=r?"/image/"+this.URLSafeBase64Encode(r):""}else{if(2!==n)return!1;var o=t.text?t.text:"",a=t.font?t.font:"",s=t.fontsize?t.fontsize:"",u=t.fill?t.fill:"";if(!o)return!1;i+=o?"/text/"+this.URLSafeBase64Encode(o):"",i+=a?"/font/"+this.URLSafeBase64Encode(a):"",i+=s?"/fontsize/"+s:"",i+=u?"/fill/"+this.URLSafeBase64Encode(u):""}var l=t.dissolve||"",c=t.gravity||"",d=t.dx||"",f=t.dy||"";return i+=l?"/dissolve/"+l:"",i+=c?"/gravity/"+c:"",i+=d?"/dx/"+d:"",i+=f?"/dy/"+f:"",e&&(i=this.getUrl(e)+"?"+i),i},this.imageInfo=function(t){if(!t)return!1;var e,n=this.getUrl(t)+"?imageInfo",i=this.createAjax(),r=this;return i.open("GET",n,!1),i.onreadystatechange=function(){4===i.readyState&&200===i.status&&(e=r.parseJSON(i.responseText))},i.send(),e},this.exif=function(t){if(!t)return!1;var e,n=this.getUrl(t)+"?exif",i=this.createAjax(),r=this;return i.open("GET",n,!1),i.onreadystatechange=function(){4===i.readyState&&200===i.status&&(e=r.parseJSON(i.responseText))},i.send(),e},this.get=function(t,e){return!(!e||!t)&&("exif"===t?this.exif(e):"imageInfo"===t&&this.imageInfo(e))},this.pipeline=function(t,e){var n,i,r="[object Array]"===Object.prototype.toString.call(t),o="";if(r){for(var a=0,s=t.length;a<s;a++){if(n=t[a],!n.fop)return!1;switch(n.fop){case"watermark":o+=this.watermark(n)+"|";break;case"imageView2":o+=this.imageView2(n)+"|";break;case"imageMogr2":o+=this.imageMogr2(n)+"|";break;default:i=!0}if(i)return!1}if(e){o=this.getUrl(e)+"?"+o;var u=o.length;"|"===o.slice(u-1)&&(o=o.slice(0,u-1))}return o}return!1}}window.localStorage||(window.localStorage={setItem:function(t,e){createCookie(t,e,30)},getItem:function(t){return readCookie(t)},removeItem:function(t){createCookie(t,"",-1)}});var Qiniu=new QiniuJsSDK;global.Qiniu=Qiniu,global.QiniuJsSDK=QiniuJsSDK}(window),__webpack_exports__.a=window.Qiniu},3129:function(t,e,n){"use strict";var i=n(27),r=n.n(i),o=n(3130);!function(t,e,n){function i(t){function e(t,e,n){var r={chunks:"slice_blob",jpgresize:"send_binary_string",pngresize:"send_binary_string",progress:"report_upload_progress",multi_selection:"select_multiple",dragdrop:"drag_and_drop",drop_element:"drag_and_drop",headers:"send_custom_headers",urlstream_upload:"send_binary_string",canSendBinary:"send_binary",triggerDialog:"summon_file_dialog"};r[t]?i[r[t]]=e:n||(i[t]=e)}var n=t.required_features,i={};return"string"==typeof n?s.each(n.split(/\s*,\s*/),function(t){e(t,!0)}):"object"===(void 0===n?"undefined":r()(n))?s.each(n,function(t,n){e(n,t)}):!0===n&&(t.chunk_size>0&&(i.slice_blob=!0),!t.resize.enabled&&t.multipart||(i.send_binary_string=!0),s.each(t,function(t,n){e(n,!!t,!0)})),i}var o=t.setTimeout,a={},s={VERSION:"2.1.2",STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,FILE_DUPLICATE_ERROR:-602,IMAGE_FORMAT_ERROR:-700,MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,mimeTypes:e.mimes,ua:e.ua,typeOf:e.typeOf,extend:e.extend,guid:e.guid,get:function(t){var n,i=[];"array"!==e.typeOf(t)&&(t=[t]);for(var r=t.length;r--;)(n=e.get(t[r]))&&i.push(n);return i.length?i:null},each:e.each,getPos:e.getPos,getSize:e.getSize,xmlEncode:function(t){var e={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},n=/[<>&\"\']/g;return t?(""+t).replace(n,function(t){return e[t]?"&"+e[t]+";":t}):t},toArray:e.toArray,inArray:e.inArray,addI18n:e.addI18n,translate:e.translate,isEmptyObj:e.isEmptyObj,hasClass:e.hasClass,addClass:e.addClass,removeClass:e.removeClass,getStyle:e.getStyle,addEvent:e.addEvent,removeEvent:e.removeEvent,removeAllEvents:e.removeAllEvents,cleanName:function(t){var e,n;for(n=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"],e=0;e<n.length;e+=2)t=t.replace(n[e],n[e+1]);return t=t.replace(/\s+/g,"_"),t=t.replace(/[^a-z0-9_\-\.]+/gi,"")},buildUrl:function(t,e){var n="";return s.each(e,function(t,e){n+=(n?"&":"")+encodeURIComponent(e)+"="+encodeURIComponent(t)}),n&&(t+=(t.indexOf("?")>0?"&":"?")+n),t},formatSize:function(t){function e(t,e){return Math.round(t*Math.pow(10,e))/Math.pow(10,e)}if(t===n||/\D/.test(t))return s.translate("N/A");var i=Math.pow(1024,4);return t>i?e(t/i,1)+" "+s.translate("tb"):t>(i/=1024)?e(t/i,1)+" "+s.translate("gb"):t>(i/=1024)?e(t/i,1)+" "+s.translate("mb"):t>1024?Math.round(t/1024)+" "+s.translate("kb"):t+" "+s.translate("b")},parseSize:e.parseSizeStr,predictRuntime:function(t,n){var i,r;return i=new s.Uploader(t),r=e.Runtime.thatCan(i.getOption().required_features,n||t.runtimes),i.destroy(),r},addFileFilter:function(t,e){a[t]=e}};s.addFileFilter("mime_types",function(t,e,n){t.length&&!t.regexp.test(e.name)?(this.trigger("Error",{code:s.FILE_EXTENSION_ERROR,message:s.translate("File extension error."),file:e}),n(!1)):n(!0)}),s.addFileFilter("max_file_size",function(t,e,n){t=s.parseSize(t),void 0!==e.size&&t&&e.size>t?(this.trigger("Error",{code:s.FILE_SIZE_ERROR,message:s.translate("File size error."),file:e}),n(!1)):n(!0)}),s.addFileFilter("prevent_duplicates",function(t,e,n){if(t)for(var i=this.files.length;i--;)if(e.name===this.files[i].name&&e.size===this.files[i].size)return this.trigger("Error",{code:s.FILE_DUPLICATE_ERROR,message:s.translate("Duplicate file error."),file:e}),void n(!1);n(!0)}),s.Uploader=function(t){function u(){var t,e,n=0;if(this.state==s.STARTED){for(e=0;e<A.length;e++)t||A[e].status!=s.QUEUED?n++:(t=A[e],this.trigger("BeforeUpload",t)&&(t.status=s.UPLOADING,this.trigger("UploadFile",t)));n==A.length&&(this.state!==s.STOPPED&&(this.state=s.STOPPED,this.trigger("StateChanged")),this.trigger("UploadComplete",A))}}function l(t){t.percent=t.size>0?Math.ceil(t.loaded/t.size*100):100,c()}function c(){var t,e;for(R.reset(),t=0;t<A.length;t++)e=A[t],e.size!==n?(R.size+=e.origSize,R.loaded+=e.loaded*e.origSize/e.size):R.size=n,e.status==s.DONE?R.uploaded++:e.status==s.FAILED?R.failed++:R.queued++;R.size===n?R.percent=A.length>0?Math.ceil(R.uploaded/A.length*100):0:(R.bytesPerSec=Math.ceil(R.loaded/((+new Date-k||1)/1e3)),R.percent=R.size>0?Math.ceil(R.loaded/R.size*100):0)}function d(){var t=F[0]||M[0];return!!t&&t.getRuntime().uid}function f(t,n){if(t.ruid){var i=e.Runtime.getInfo(t.ruid);if(i)return i.can(n)}return!1}function p(){this.bind("FilesAdded FilesRemoved",function(t){t.trigger("QueueChanged"),t.refresh()}),this.bind("CancelUpload",b),this.bind("BeforeUpload",v),this.bind("UploadFile",_),this.bind("UploadProgress",y),this.bind("StateChanged",w),this.bind("QueueChanged",c),this.bind("Error",E),this.bind("FileUploaded",x),this.bind("Destroy",C)}function h(t,n){var i=this,r=0,o=[],a={runtime_order:t.runtimes,required_caps:t.required_features,preferred_caps:O,swf_url:t.flash_swf_url,xap_url:t.silverlight_xap_url};s.each(t.runtimes.split(/\s*,\s*/),function(e){t[e]&&(a[e]=t[e])}),t.browse_button&&s.each(t.browse_button,function(n){o.push(function(o){var u=new e.FileInput(s.extend({},a,{accept:t.filters.mime_types,name:t.file_data_name,multiple:t.multi_selection,container:t.container,browse_button:n}));u.onready=function(){var t=e.Runtime.getInfo(this.ruid);e.extend(i.features,{chunks:t.can("slice_blob"),multipart:t.can("send_multipart"),multi_selection:t.can("select_multiple")}),r++,F.push(this),o()},u.onchange=function(){i.addFile(this.files)},u.bind("mouseenter mouseleave mousedown mouseup",function(i){L||(t.browse_button_hover&&("mouseenter"===i.type?e.addClass(n,t.browse_button_hover):"mouseleave"===i.type&&e.removeClass(n,t.browse_button_hover)),t.browse_button_active&&("mousedown"===i.type?e.addClass(n,t.browse_button_active):"mouseup"===i.type&&e.removeClass(n,t.browse_button_active)))}),u.bind("mousedown",function(){i.trigger("Browse")}),u.bind("error runtimeerror",function(){u=null,o()}),u.init()})}),t.drop_element&&s.each(t.drop_element,function(t){o.push(function(n){var o=new e.FileDrop(s.extend({},a,{drop_zone:t}));o.onready=function(){var t=e.Runtime.getInfo(this.ruid);i.features.dragdrop=t.can("drag_and_drop"),r++,M.push(this),n()},o.ondrop=function(){i.addFile(this.files)},o.bind("error runtimeerror",function(){o=null,n()}),o.init()})}),e.inSeries(o,function(){"function"==typeof n&&n(r)})}function m(t,i,r){var o=new e.Image;try{o.onload=function(){if(i.width>this.width&&i.height>this.height&&i.quality===n&&i.preserve_headers&&!i.crop)return this.destroy(),r(t);o.downsize(i.width,i.height,i.crop,i.preserve_headers)},o.onresize=function(){r(this.getAsBlob(t.type,i.quality)),this.destroy()},o.onerror=function(){r(t)},o.load(t)}catch(e){r(t)}}function g(t,n,o){function a(t,e,n){var i=S[t];switch(t){case"max_file_size":"max_file_size"===t&&(S.max_file_size=S.filters.max_file_size=e);break;case"chunk_size":(e=s.parseSize(e))&&(S[t]=e,S.send_file_name=!0);break;case"multipart":S[t]=e,e||(S.send_file_name=!0);break;case"unique_names":S[t]=e,e&&(S.send_file_name=!0);break;case"filters":"array"===s.typeOf(e)&&(e={mime_types:e}),n?s.extend(S.filters,e):S.filters=e,e.mime_types&&(S.filters.mime_types.regexp=function(t){var e=[];return s.each(t,function(t){s.each(t.extensions.split(/,/),function(t){/^\s*\*\s*$/.test(t)?e.push("\\.*"):e.push("\\."+t.replace(new RegExp("["+"/^$.*+?|()[]{}\\".replace(/./g,"\\$&")+"]","g"),"\\$&"))})}),new RegExp("("+e.join("|")+")$","i")}(S.filters.mime_types));break;case"resize":n?s.extend(S.resize,e,{enabled:!0}):S.resize=e;break;case"prevent_duplicates":S.prevent_duplicates=S.filters.prevent_duplicates=!!e;break;case"browse_button":case"drop_element":e=s.get(e);case"container":case"runtimes":case"multi_selection":case"flash_swf_url":case"silverlight_xap_url":S[t]=e,n||(l=!0);break;default:S[t]=e}n||u.trigger("OptionChanged",t,e,i)}var u=this,l=!1;"object"===(void 0===t?"undefined":r()(t))?s.each(t,function(t,e){a(e,t,o)}):a(t,n,o),o?(S.required_features=i(s.extend({},S)),O=i(s.extend({},S,{required_features:!0}))):l&&(u.trigger("Destroy"),h.call(u,S,function(t){t?(u.runtime=e.Runtime.getInfo(d()).type,u.trigger("Init",{runtime:u.runtime}),u.trigger("PostInit")):u.trigger("Error",{code:s.INIT_ERROR,message:s.translate("Init error.")})}))}function v(t,e){if(t.settings.unique_names){var n=e.name.match(/\.([^.]+)$/),i="part";n&&(i=n[1]),e.target_name=e.id+"."+i}}function _(t,n){function i(){d-- >0?o(r,1e3):(n.loaded=h,t.trigger("Error",{code:s.HTTP_ERROR,message:s.translate("HTTP Error."),file:n,response:I.responseText,status:I.status,responseHeaders:I.getAllResponseHeaders()}))}function r(){var e,i,r={};n.status===s.UPLOADING&&t.state!==s.STOPPED&&(t.settings.send_file_name&&(r.name=n.target_name||n.name),c&&p.chunks&&u.size>c?(i=Math.min(c,u.size-h),e=u.slice(h,h+i)):(i=u.size,e=u),c&&p.chunks&&(t.settings.send_chunk_number?(r.chunk=Math.ceil(h/c),r.chunks=Math.ceil(u.size/c)):(r.offset=h,r.total=u.size)),t.trigger("BeforeChunkUpload",n,r,e,h)&&t.trigger("UploadChunk",r,e,i))}function a(t,a,c,f){var m;I=new e.XMLHttpRequest,I.upload&&(I.upload.onprogress=function(e){n.loaded=Math.min(n.size,h+e.loaded),t.trigger("UploadProgress",n)}),I.onload=function(){if(I.status>=400)return void i();d=t.settings.max_retries,f<u.size?(c.destroy(),h+=f,n.loaded=Math.min(h,u.size),t.trigger("ChunkUploaded",n,{offset:n.loaded,total:u.size,response:I.responseText,status:I.status,responseHeaders:I.getAllResponseHeaders()}),"Android Browser"===e.Env.browser&&t.trigger("UploadProgress",n)):n.loaded=n.size,c=m=null,!h||h>=u.size?(n.size!=n.origSize&&(u.destroy(),u=null),t.trigger("UploadProgress",n),n.status=s.DONE,t.trigger("FileUploaded",n,{response:I.responseText,status:I.status,responseHeaders:I.getAllResponseHeaders()})):o(r,1)},I.onerror=function(){i()},I.onloadend=function(){this.destroy(),I=null},t.settings.multipart&&p.multipart?(I.open("post",l,!0),s.each(t.settings.headers,function(t,e){I.setRequestHeader(e,t)}),m=new e.FormData,s.each(s.extend(a,t.settings.multipart_params),function(t,e){m.append(e,t)}),m.append(t.settings.file_data_name,c),I.send(m,{runtime_order:t.settings.runtimes,required_caps:t.settings.required_features,preferred_caps:O,swf_url:t.settings.flash_swf_url,xap_url:t.settings.silverlight_xap_url})):(l=s.buildUrl(t.settings.url,s.extend(a,t.settings.multipart_params)),I.open("post",l,!0),I.setRequestHeader("Content-Type","application/octet-stream"),s.each(t.settings.headers,function(t,e){I.setRequestHeader(e,t)}),I.send(c,{runtime_order:t.settings.runtimes,required_caps:t.settings.required_features,preferred_caps:O,swf_url:t.settings.flash_swf_url,xap_url:t.settings.silverlight_xap_url}))}var u,l=t.settings.url,c=t.settings.chunk_size,d=t.settings.max_retries,p=t.features,h=0;n.loaded&&(h=n.loaded=c?c*Math.floor(n.loaded/c):0),t.unbind("UploadChunk"),t.bind("UploadChunk",a),u=n.getSource(),t.settings.resize.enabled&&f(u,"send_binary_string")&&~e.inArray(u.type,["image/jpeg","image/png"])?m.call(this,u,t.settings.resize,function(t){u=t,n.size=t.size,r()}):r()}function y(t,e){l(e)}function w(t){if(t.state==s.STARTED)k=+new Date;else if(t.state==s.STOPPED)for(var e=t.files.length-1;e>=0;e--)t.files[e].status==s.UPLOADING&&(t.files[e].status=s.QUEUED,c())}function b(){I&&I.abort()}function x(t){c(),o(function(){u.call(t)},1)}function E(t,e){e.code===s.INIT_ERROR?t.destroy():e.file&&(e.file.status=s.FAILED,l(e.file),t.state==s.STARTED&&(t.trigger("CancelUpload"),o(function(){u.call(t)},1)))}function C(t){t.stop(),s.each(A,function(t){t.destroy()}),A=[],F.length&&(s.each(F,function(t){t.destroy()}),F=[]),M.length&&(s.each(M,function(t){t.destroy()}),M=[]),O={},L=!1,k=I=null,R.reset()}var S,k,R,I,T=s.guid(),A=[],O={},F=[],M=[],L=!1;S={runtimes:e.Runtime.order,max_retries:0,chunk_size:0,multipart:!0,multi_selection:!0,file_data_name:"file",flash_swf_url:"js/Moxie.swf",silverlight_xap_url:"js/Moxie.xap",filters:{mime_types:[],prevent_duplicates:!1,max_file_size:0},resize:{enabled:!1,preserve_headers:!0,crop:!1},send_file_name:!0,send_chunk_number:!0},g.call(this,t,null,!0),R=new s.QueueProgress,s.extend(this,{id:T,uid:T,state:s.STOPPED,features:{},runtime:null,files:A,settings:S,total:R,init:function(){var t=this;if("function"==typeof S.preinit?S.preinit(t):s.each(S.preinit,function(e,n){t.bind(n,e)}),p.call(this),!S.browse_button||!S.url)return void this.trigger("Error",{code:s.INIT_ERROR,message:s.translate("Init error.")});h.call(this,S,function(n){"function"==typeof S.init?S.init(t):s.each(S.init,function(e,n){t.bind(n,e)}),n?(t.runtime=e.Runtime.getInfo(d()).type,t.trigger("Init",{runtime:t.runtime}),t.trigger("PostInit")):t.trigger("Error",{code:s.INIT_ERROR,message:s.translate("Init error.")})})},setOption:function(t,e){g.call(this,t,e,!this.runtime)},getOption:function(t){return t?S[t]:S},refresh:function(){F.length&&s.each(F,function(t){t.trigger("Refresh")}),this.trigger("Refresh")},start:function(){this.state!=s.STARTED&&(this.state=s.STARTED,this.trigger("StateChanged"),u.call(this))},stop:function(){this.state!=s.STOPPED&&(this.state=s.STOPPED,this.trigger("StateChanged"),this.trigger("CancelUpload"))},disableBrowse:function(){L=arguments[0]===n||arguments[0],F.length&&s.each(F,function(t){t.disable(L)}),this.trigger("DisableBrowse",L)},getFile:function(t){var e;for(e=A.length-1;e>=0;e--)if(A[e].id===t)return A[e]},addFile:function(t,n){function i(t,n){var i=[];e.each(l.settings.filters,function(e,n){a[n]&&i.push(function(i){a[n].call(l,e,t,function(t){i(!t)})})}),e.inSeries(i,n)}function r(t){var a=e.typeOf(t);if(t instanceof e.File){if(!t.ruid&&!t.isDetached()){if(!u)return!1;t.ruid=u,t.connectRuntime(u)}r(new s.File(t))}else t instanceof e.Blob?(r(t.getSource()),t.destroy()):t instanceof s.File?(n&&(t.name=n),c.push(function(e){i(t,function(n){n||(A.push(t),f.push(t),l.trigger("FileFiltered",t)),o(e,1)})})):-1!==e.inArray(a,["file","blob"])?r(new e.File(null,t)):"node"===a&&"filelist"===e.typeOf(t.files)?e.each(t.files,r):"array"===a&&(n=null,e.each(t,r))}var u,l=this,c=[],f=[];u=d(),r(t),c.length&&e.inSeries(c,function(){f.length&&l.trigger("FilesAdded",f)})},removeFile:function(t){for(var e="string"==typeof t?t:t.id,n=A.length-1;n>=0;n--)if(A[n].id===e)return this.splice(n,1)[0]},splice:function(t,e){var i=A.splice(t===n?0:t,e===n?A.length:e),r=!1;return this.state==s.STARTED&&(s.each(i,function(t){if(t.status===s.UPLOADING)return r=!0,!1}),r&&this.stop()),this.trigger("FilesRemoved",i),s.each(i,function(t){t.destroy()}),r&&this.start(),i},bind:function(t,e,n){var i=this;s.Uploader.prototype.bind.call(this,t,function(){var t=[].slice.call(arguments);return t.splice(0,1,i),e.apply(this,t)},0,n)},destroy:function(){this.trigger("Destroy"),S=R=null,this.unbindAll()}})},s.Uploader.prototype=e.EventTarget.instance,s.File=function(){function t(t){s.extend(this,{id:s.guid(),name:t.name||t.fileName,type:t.type||"",size:t.size||t.fileSize,origSize:t.size||t.fileSize,loaded:0,percent:0,status:s.QUEUED,lastModifiedDate:t.lastModifiedDate||(new Date).toLocaleString(),getNative:function(){var t=this.getSource().getSource();return-1!==e.inArray(e.typeOf(t),["blob","file"])?t:null},getSource:function(){return n[this.id]?n[this.id]:null},destroy:function(){var t=this.getSource();t&&(t.destroy(),delete n[this.id])}}),n[this.id]=t}var n={};return t}(),s.QueueProgress=function(){var t=this;t.size=0,t.loaded=0,t.uploaded=0,t.failed=0,t.queued=0,t.percent=0,t.bytesPerSec=0,t.reset=function(){t.size=t.loaded=t.uploaded=t.failed=t.queued=t.percent=t.bytesPerSec=0}},t.plupload=s}(window,o.a),e.a=window.plupload},3130:function(t,e,n){"use strict";var i=n(27),r=n.n(i);!function(t,e){function n(t,e){for(var n,i=[],r=0;r<t.length;++r){if(!(n=a[t[r]]||o(t[r])))throw"module definition dependecy not found: "+t[r];i.push(n)}e.apply(null,i)}function i(t,i,r){if("string"!=typeof t)throw"invalid module definition, module id must be defined and be a string";if(i===e)throw"invalid module definition, dependencies must be specified";if(r===e)throw"invalid module definition, definition function must be specified";n(i,function(){a[t]=r.apply(null,arguments)})}function o(e){for(var n=t,i=e.split(/[.\/]/),r=0;r<i.length;++r){if(!n[i[r]])return;n=n[i[r]]}return n}var a={};i("moxie/core/utils/Basic",[],function(){var t=function(t){return void 0===t?"undefined":null===t?"null":t.nodeType?"node":{}.toString.call(t).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},e=function e(i){return n(arguments,function(r,o){o>0&&n(r,function(n,r){void 0!==n&&(t(i[r])===t(n)&&~a(t(n),["array","object"])?e(i[r],n):i[r]=n)})}),i},n=function(t,e){var n,i,r;if(t){try{n=t.length}catch(t){n=void 0}if(void 0===n){for(i in t)if(t.hasOwnProperty(i)&&!1===e(t[i],i))return}else for(r=0;r<n;r++)if(!1===e(t[r],r))return}},i=function(e){var n;if(!e||"object"!==t(e))return!0;for(n in e)return!1;return!0},r=function(e,n){function i(o){"function"===t(e[o])&&e[o](function(t){++o<r&&!t?i(o):n(t)})}var r=e.length;"function"!==t(n)&&(n=function(){}),e&&e.length||n(),i(0)},o=function(t,e){var i=0,r=t.length,o=new Array(r);n(t,function(t,n){t(function(t){if(t)return e(t);var a=[].slice.call(arguments);a.shift(),o[n]=a,++i===r&&(o.unshift(null),e.apply(this,o))})})},a=function(t,e){if(e){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(e,t);for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n}return-1},s=function(e,n){var i=[];"array"!==t(e)&&(e=[e]),"array"!==t(n)&&(n=[n]);for(var r in e)-1===a(e[r],n)&&i.push(e[r]);return!!i.length&&i},u=function(t,e){var i=[];return n(t,function(t){-1!==a(t,e)&&i.push(t)}),i.length?i:null},l=function(t){var e,n=[];for(e=0;e<t.length;e++)n[e]=t[e];return n};return{guid:function(){var t=0;return function(e){var n,i=(new Date).getTime().toString(32);for(n=0;n<5;n++)i+=Math.floor(65535*Math.random()).toString(32);return(e||"o_")+i+(t++).toString(32)}}(),typeOf:t,extend:e,each:n,isEmptyObj:i,inSeries:r,inParallel:o,inArray:a,arrayDiff:s,arrayIntersect:u,toArray:l,trim:function(t){return t?String.prototype.trim?String.prototype.trim.call(t):t.toString().replace(/^\s*/,"").replace(/\s*$/,""):t},parseSizeStr:function(t){if("string"!=typeof t)return t;var e,n={t:1099511627776,g:1073741824,m:1048576,k:1024};return t=/^([0-9]+)([mgk]?)$/.exec(t.toLowerCase().replace(/[^0-9mkg]/g,"")),e=t[2],t=+t[1],n.hasOwnProperty(e)&&(t*=n[e]),t}}}),i("moxie/core/I18n",["moxie/core/utils/Basic"],function(t){var e={};return{addI18n:function(n){return t.extend(e,n)},translate:function(t){return e[t]||t},_:function(t){return this.translate(t)},sprintf:function(e){var n=[].slice.call(arguments,1);return e.replace(/%[a-z]/g,function(){var e=n.shift();return"undefined"!==t.typeOf(e)?e:""})}}}),i("moxie/core/utils/Mime",["moxie/core/utils/Basic","moxie/core/I18n"],function(t,e){var n={mimes:{},extensions:{},addMimeType:function(t){var e,n,i,r=t.split(/,/);for(e=0;e<r.length;e+=2){for(i=r[e+1].split(/ /),n=0;n<i.length;n++)this.mimes[i[n]]=r[e];this.extensions[r[e]]=i}},extList2mimes:function(e,n){var i,r,o,a,s=this,u=[];for(r=0;r<e.length;r++)for(i=e[r].extensions.split(/\s*,\s*/),o=0;o<i.length;o++){if("*"===i[o])return[];if(a=s.mimes[i[o]])-1===t.inArray(a,u)&&u.push(a);else{if(!n||!/^\w+$/.test(i[o]))return[];u.push("."+i[o])}}return u},mimes2exts:function(e){var n=this,i=[];return t.each(e,function(e){if("*"===e)return i=[],!1;var r=e.match(/^(\w+)\/(\*|\w+)$/);r&&("*"===r[2]?t.each(n.extensions,function(t,e){new RegExp("^"+r[1]+"/").test(e)&&[].push.apply(i,n.extensions[e])}):n.extensions[e]&&[].push.apply(i,n.extensions[e]))}),i},mimes2extList:function(n){var i=[],r=[];return"string"===t.typeOf(n)&&(n=t.trim(n).split(/\s*,\s*/)),r=this.mimes2exts(n),i.push({title:e.translate("Files"),extensions:r.length?r.join(","):"*"}),i.mimes=n,i},getFileExtension:function(t){var e=t&&t.match(/\.([^.]+)$/);return e?e[1].toLowerCase():""},getFileMime:function(t){return this.mimes[this.getFileExtension(t)]||""}};return n.addMimeType("application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.template,potx,application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,application/x-javascript,js,application/json,json,audio/mpeg,mp3 mpga mpega mp2,audio/x-wav,wav,audio/x-m4a,m4a,audio/ogg,oga ogg,audio/aiff,aiff aif,audio/flac,flac,audio/aac,aac,audio/ac3,ac3,audio/x-ms-wma,wma,image/bmp,bmp,image/gif,gif,image/jpeg,jpg jpeg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/plain,asc txt text diff log,text/html,htm html xhtml,text/css,css,text/csv,csv,text/rtf,rtf,video/mpeg,mpeg mpg mpe m2v,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/3gpp,3gpp 3gp,video/3gpp2,3g2,video/vnd.rn-realvideo,rv,video/ogg,ogv,video/x-matroska,mkv,application/vnd.oasis.opendocument.formula-template,otf,application/octet-stream,exe"),n}),i("moxie/core/utils/Env",["moxie/core/utils/Basic"],function(t){function e(t,e,n){var i=0,r=0,o=0,a={dev:-6,alpha:-5,a:-5,beta:-4,b:-4,RC:-3,rc:-3,"#":-2,p:1,pl:1},s=function(t){return t=(""+t).replace(/[_\-+]/g,"."),t=t.replace(/([^.\d]+)/g,".$1.").replace(/\.{2,}/g,"."),t.length?t.split("."):[-8]},u=function(t){return t?isNaN(t)?a[t]||-7:parseInt(t,10):0};for(t=s(t),e=s(e),r=Math.max(t.length,e.length),i=0;i<r;i++)if(t[i]!=e[i]){if(t[i]=u(t[i]),e[i]=u(e[i]),t[i]<e[i]){o=-1;break}if(t[i]>e[i]){o=1;break}}if(!n)return o;switch(n){case">":case"gt":return o>0;case">=":case"ge":return o>=0;case"<=":case"le":return o<=0;case"==":case"=":case"eq":return 0===o;case"<>":case"!=":case"ne":return 0!==o;case"":case"<":case"lt":return o<0;default:return null}}var n=function(t){var e="major",n="name",i="version",o={has:function(t,e){return-1!==e.toLowerCase().indexOf(t.toLowerCase())},lowerize:function(t){return t.toLowerCase()}},a={rgx:function(){for(var t,e,n,i,o,a,s,u=0,l=arguments;u<l.length;u+=2){var c=l[u],d=l[u+1];if("undefined"===(void 0===t?"undefined":r()(t))){t={};for(i in d)o=d[i],"object"===(void 0===o?"undefined":r()(o))?t[o[0]]=void 0:t[o]=void 0}for(e=n=0;e<c.length;e++)if(a=c[e].exec(this.getUA())){for(i=0;i<d.length;i++)s=a[++n],o=d[i],"object"===(void 0===o?"undefined":r()(o))&&o.length>0?2==o.length?"function"==r()(o[1])?t[o[0]]=o[1].call(this,s):t[o[0]]=o[1]:3==o.length?"function"!==r()(o[1])||o[1].exec&&o[1].test?t[o[0]]=s?s.replace(o[1],o[2]):void 0:t[o[0]]=s?o[1].call(this,s,o[2]):void 0:4==o.length&&(t[o[0]]=s?o[3].call(this,s.replace(o[1],o[2])):void 0):t[o]=s||void 0;break}if(a)break}return t},str:function(t,e){for(var n in e)if("object"===r()(e[n])&&e[n].length>0){for(var i=0;i<e[n].length;i++)if(o.has(e[n][i],t))return"?"===n?void 0:n}else if(o.has(e[n],t))return"?"===n?void 0:n;return t}},s={browser:{oldsafari:{major:{1:["/8","/1","/3"],2:"/4","?":"/"},version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",RT:"ARM"}}}},u={browser:[[/(opera\smini)\/((\d+)?[\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/((\d+)?[\w\.-]+)/i,/(opera).+version\/((\d+)?[\w\.]+)/i,/(opera)[\/\s]+((\d+)?[\w\.]+)/i],[n,i,e],[/\s(opr)\/((\d+)?[\w\.]+)/i],[[n,"Opera"],i,e],[/(kindle)\/((\d+)?[\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?((\d+)?[\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?((\d+)?[\w\.]*)/i,/(?:ms|\()(ie)\s((\d+)?[\w\.]+)/i,/(rekonq)((?:\/)[\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron)\/((\d+)?[\w\.-]+)/i],[n,i,e],[/(trident).+rv[:\s]((\d+)?[\w\.]+).+like\sgecko/i],[[n,"IE"],i,e],[/(yabrowser)\/((\d+)?[\w\.]+)/i],[[n,"Yandex"],i,e],[/(comodo_dragon)\/((\d+)?[\w\.]+)/i],[[n,/_/g," "],i,e],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?((\d+)?[\w\.]+)/i],[n,i,e],[/(dolfin)\/((\d+)?[\w\.]+)/i],[[n,"Dolphin"],i,e],[/((?:android.+)crmo|crios)\/((\d+)?[\w\.]+)/i],[[n,"Chrome"],i,e],[/((?:android.+))version\/((\d+)?[\w\.]+)\smobile\ssafari/i],[[n,"Android Browser"],i,e],[/version\/((\d+)?[\w\.]+).+?mobile\/\w+\s(safari)/i],[i,e,[n,"Mobile Safari"]],[/version\/((\d+)?[\w\.]+).+?(mobile\s?safari|safari)/i],[i,e,n],[/webkit.+?(mobile\s?safari|safari)((\/[\w\.]+))/i],[n,[e,a.str,s.browser.oldsafari.major],[i,a.str,s.browser.oldsafari.version]],[/(konqueror)\/((\d+)?[\w\.]+)/i,/(webkit|khtml)\/((\d+)?[\w\.]+)/i],[n,i,e],[/(navigator|netscape)\/((\d+)?[\w\.-]+)/i],[[n,"Netscape"],i,e],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?((\d+)?[\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/((\d+)?[\w\.-]+)/i,/(mozilla)\/((\d+)?[\w\.]+).+rv\:.+gecko\/\d+/i,/(uc\s?browser|polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|qqbrowser)[\/\s]?((\d+)?[\w\.]+)/i,/(links)\s\(((\d+)?[\w\.]+)/i,/(gobrowser)\/?((\d+)?[\w\.]+)*/i,/(ice\s?browser)\/v?((\d+)?[\w\._]+)/i,/(mosaic)[\/\s]((\d+)?[\w\.]+)/i],[n,i,e]],engine:[[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[n,i],[/rv\:([\w\.]+).*(gecko)/i],[i,n]],os:[[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[n,[i,a.str,s.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[n,"Windows"],[i,a.str,s.os.windows.version]],[/\((bb)(10);/i],[[n,"BlackBerry"],i],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)\/([\w\.]+)/i,/(android|webos|palm\os|qnx|bada|rim\stablet\sos|meego)[\/\s-]?([\w\.]+)*/i],[n,i],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[n,"Symbian"],i],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[n,"Firefox OS"],i],[/(nintendo|playstation)\s([wids3portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[n,i],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[n,"Chromium OS"],i],[/(sunos)\s?([\w\.]+\d)*/i],[[n,"Solaris"],i],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[n,i],[/(ip[honead]+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[n,"iOS"],[i,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i],[n,[i,/_/g,"."]],[/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(macintosh|mac(?=_powerpc)|plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos)/i,/(unix)\s?([\w\.]+)*/i],[n,i]]};return(new function(t){var e=t||(window&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:"");this.getBrowser=function(){return a.rgx.apply(this,u.browser)},this.getEngine=function(){return a.rgx.apply(this,u.engine)},this.getOS=function(){return a.rgx.apply(this,u.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS()}},this.getUA=function(){return e},this.setUA=function(t){return e=t,this},this.setUA(e)}).getResult()}(),i=function(){var e={define_property:!1,create_canvas:function(){var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))}(),return_response_type:function(e){try{if(-1!==t.inArray(e,["","text","document"]))return!0;if(window.XMLHttpRequest){var n=new XMLHttpRequest;if(n.open("get","/"),"responseType"in n)return n.responseType=e,n.responseType===e}}catch(t){}return!1},use_data_uri:function(){var t=new Image;return t.onload=function(){e.use_data_uri=1===t.width&&1===t.height},setTimeout(function(){t.src="data:image/gif;base64,R0lGODlhAQABAIAAAP8AAAAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw=="},1),!1}(),use_data_uri_over32kb:function(){return e.use_data_uri&&("IE"!==o.browser||o.version>=9)},use_data_uri_of:function(t){return e.use_data_uri&&t<33e3||e.use_data_uri_over32kb()},use_fileinput:function(){var t=document.createElement("input");return t.setAttribute("type","file"),!t.disabled}};return function(n){var i=[].slice.call(arguments);return i.shift(),"function"===t.typeOf(e[n])?e[n].apply(this,i):!!e[n]}}(),o={can:i,browser:n.browser.name,version:parseFloat(n.browser.major),os:n.os.name,osVersion:n.os.version,verComp:e,swf_url:"../flash/Moxie.swf",xap_url:"../silverlight/Moxie.xap",global_event_dispatcher:"moxie.core.EventTarget.instance.dispatchEvent"};return o.OS=o.os,o}),i("moxie/core/utils/Dom",["moxie/core/utils/Env"],function(t){var e=function(t){return"string"!=typeof t?t:document.getElementById(t)},n=function(t,e){return!!t.className&&new RegExp("(^|\\s+)"+e+"(\\s+|$)").test(t.className)};return{get:e,hasClass:n,addClass:function(t,e){n(t,e)||(t.className=t.className?t.className.replace(/\s+$/,"")+" "+e:e)},removeClass:function(t,e){if(t.className){var n=new RegExp("(^|\\s+)"+e+"(\\s+|$)");t.className=t.className.replace(n,function(t,e,n){return" "===e&&" "===n?" ":""})}},getStyle:function(t,e){return t.currentStyle?t.currentStyle[e]:window.getComputedStyle?window.getComputedStyle(t,null)[e]:void 0},getPos:function(e,n){function i(t){var e,n,i=0,r=0;return t&&(n=t.getBoundingClientRect(),e="CSS1Compat"===l.compatMode?l.documentElement:l.body,i=n.left+e.scrollLeft,r=n.top+e.scrollTop),{x:i,y:r}}var r,o,a,s=0,u=0,l=document;if(e=e,n=n||l.body,e&&e.getBoundingClientRect&&"IE"===t.browser&&(!l.documentMode||l.documentMode<8))return o=i(e),a=i(n),{x:o.x-a.x,y:o.y-a.y};for(r=e;r&&r!=n&&r.nodeType;)s+=r.offsetLeft||0,u+=r.offsetTop||0,r=r.offsetParent;for(r=e.parentNode;r&&r!=n&&r.nodeType;)s-=r.scrollLeft||0,u-=r.scrollTop||0,r=r.parentNode;return{x:s,y:u}},getSize:function(t){return{w:t.offsetWidth||t.clientWidth,h:t.offsetHeight||t.clientHeight}}}}),i("moxie/core/Exceptions",["moxie/core/utils/Basic"],function(t){function e(t,e){var n;for(n in t)if(t[n]===e)return n;return null}return{RuntimeError:function(){function n(t){this.code=t,this.name=e(i,t),this.message=this.name+": RuntimeError "+this.code}var i={NOT_INIT_ERR:1,NOT_SUPPORTED_ERR:9,JS_ERR:4};return t.extend(n,i),n.prototype=Error.prototype,n}(),OperationNotAllowedException:function(){function e(t){this.code=t,this.name="OperationNotAllowedException"}return t.extend(e,{NOT_ALLOWED_ERR:1}),e.prototype=Error.prototype,e}(),ImageError:function(){function n(t){this.code=t,this.name=e(i,t),this.message=this.name+": ImageError "+this.code}var i={WRONG_FORMAT:1,MAX_RESOLUTION_ERR:2};return t.extend(n,i),n.prototype=Error.prototype,n}(),FileException:function(){function n(t){this.code=t,this.name=e(i,t),this.message=this.name+": FileException "+this.code}var i={NOT_FOUND_ERR:1,SECURITY_ERR:2,ABORT_ERR:3,NOT_READABLE_ERR:4,ENCODING_ERR:5,NO_MODIFICATION_ALLOWED_ERR:6,INVALID_STATE_ERR:7,SYNTAX_ERR:8};return t.extend(n,i),n.prototype=Error.prototype,n}(),DOMException:function(){function n(t){this.code=t,this.name=e(i,t),this.message=this.name+": DOMException "+this.code}var i={INDEX_SIZE_ERR:1,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,INVALID_CHARACTER_ERR:5,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:11,SYNTAX_ERR:12,INVALID_MODIFICATION_ERR:13,NAMESPACE_ERR:14,INVALID_ACCESS_ERR:15,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:17,SECURITY_ERR:18,NETWORK_ERR:19,ABORT_ERR:20,URL_MISMATCH_ERR:21,QUOTA_EXCEEDED_ERR:22,TIMEOUT_ERR:23,INVALID_NODE_TYPE_ERR:24,DATA_CLONE_ERR:25};return t.extend(n,i),n.prototype=Error.prototype,n}(),EventException:function(){function e(t){this.code=t,this.name="EventException"}return t.extend(e,{UNSPECIFIED_EVENT_TYPE_ERR:0}),e.prototype=Error.prototype,e}()}}),i("moxie/core/EventTarget",["moxie/core/Exceptions","moxie/core/utils/Basic"],function(t,e){function n(){var n={};e.extend(this,{uid:null,init:function(){this.uid||(this.uid=e.guid("uid_"))},addEventListener:function(t,i,r,o){var a,s=this;if(t=e.trim(t),/\s/.test(t))return void e.each(t.split(/\s+/),function(t){s.addEventListener(t,i,r,o)});t=t.toLowerCase(),r=parseInt(r,10)||0,a=n[this.uid]&&n[this.uid][t]||[],a.push({fn:i,priority:r,scope:o||this}),n[this.uid]||(n[this.uid]={}),n[this.uid][t]=a},hasEventListener:function(t){return t?!(!n[this.uid]||!n[this.uid][t]):!!n[this.uid]},removeEventListener:function(t,i){t=t.toLowerCase();var r,o=n[this.uid]&&n[this.uid][t];if(o){if(i){for(r=o.length-1;r>=0;r--)if(o[r].fn===i){o.splice(r,1);break}}else o=[];o.length||(delete n[this.uid][t],e.isEmptyObj(n[this.uid])&&delete n[this.uid])}},removeAllEventListeners:function(){n[this.uid]&&delete n[this.uid]},dispatchEvent:function(i){var r,o,a,s,u={},l=!0;if("string"!==e.typeOf(i)){if(s=i,"string"!==e.typeOf(s.type))throw new t.EventException(t.EventException.UNSPECIFIED_EVENT_TYPE_ERR);i=s.type,void 0!==s.total&&void 0!==s.loaded&&(u.total=s.total,u.loaded=s.loaded),u.async=s.async||!1}if(-1!==i.indexOf("::")?function(t){r=t[0],i=t[1]}(i.split("::")):r=this.uid,i=i.toLowerCase(),o=n[r]&&n[r][i]){o.sort(function(t,e){return e.priority-t.priority}),a=[].slice.call(arguments),a.shift(),u.type=i,a.unshift(u);var c=[];e.each(o,function(t){a[0].target=t.scope,u.async?c.push(function(e){setTimeout(function(){e(!1===t.fn.apply(t.scope,a))},1)}):c.push(function(e){e(!1===t.fn.apply(t.scope,a))})}),c.length&&e.inSeries(c,function(t){l=!t})}return l},bind:function(){this.addEventListener.apply(this,arguments)},unbind:function(){this.removeEventListener.apply(this,arguments)},unbindAll:function(){this.removeAllEventListeners.apply(this,arguments)},trigger:function(){return this.dispatchEvent.apply(this,arguments)},convertEventPropsToHandlers:function(t){var n;"array"!==e.typeOf(t)&&(t=[t]);for(var i=0;i<t.length;i++)n="on"+t[i],"function"===e.typeOf(this[n])?this.addEventListener(t[i],this[n]):"undefined"===e.typeOf(this[n])&&(this[n]=null)}})}return n.instance=new n,n}),i("moxie/core/utils/Encode",[],function(){var t=function(t){return unescape(encodeURIComponent(t))},e=function(t){return decodeURIComponent(escape(t))};return{utf8_encode:t,utf8_decode:e,atob:function(t,n){if("function"==typeof window.atob)return n?e(window.atob(t)):window.atob(t);var i,r,o,a,s,u,l,c,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",f=0,p=0,h="",m=[];if(!t)return t;t+="";do{a=d.indexOf(t.charAt(f++)),s=d.indexOf(t.charAt(f++)),u=d.indexOf(t.charAt(f++)),l=d.indexOf(t.charAt(f++)),c=a<<18|s<<12|u<<6|l,i=c>>16&255,r=c>>8&255,o=255&c,m[p++]=64==u?String.fromCharCode(i):64==l?String.fromCharCode(i,r):String.fromCharCode(i,r,o)}while(f<t.length);return h=m.join(""),n?e(h):h},btoa:function(e,n){if(n&&t(e),"function"==typeof window.btoa)return window.btoa(e);var i,r,o,a,s,u,l,c,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",f=0,p=0,h="",m=[];if(!e)return e;do{i=e.charCodeAt(f++),r=e.charCodeAt(f++),o=e.charCodeAt(f++),c=i<<16|r<<8|o,a=c>>18&63,s=c>>12&63,u=c>>6&63,l=63&c,m[p++]=d.charAt(a)+d.charAt(s)+d.charAt(u)+d.charAt(l)}while(f<e.length);h=m.join("");var g=e.length%3;return(g?h.slice(0,g-3):h)+"===".slice(g||3)}}}),i("moxie/runtime/Runtime",["moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/EventTarget"],function(t,e,n){function i(n,r,a,s,u){var l,c=this,d=t.guid(r+"_"),f=u||"browser";n=n||{},o[d]=this,a=t.extend({access_binary:!1,access_image_binary:!1,display_media:!1,do_cors:!1,drag_and_drop:!1,filter_by_extension:!0,resize_image:!1,report_upload_progress:!1,return_response_headers:!1,return_response_type:!1,return_status_code:!0,send_custom_headers:!1,select_file:!1,select_folder:!1,select_multiple:!0,send_binary_string:!1,send_browser_cookies:!0,send_multipart:!0,slice_blob:!1,stream_upload:!1,summon_file_dialog:!1,upload_filesize:!0,use_http_method:!0},a),n.preferred_caps&&(f=i.getMode(s,n.preferred_caps,f)),l=function(){var e={};return{exec:function(t,n,i,r){if(l[n]&&(e[t]||(e[t]={context:this,instance:new l[n]}),e[t].instance[i]))return e[t].instance[i].apply(this,r)},removeInstance:function(t){delete e[t]},removeAllInstances:function(){var n=this;t.each(e,function(e,i){"function"===t.typeOf(e.instance.destroy)&&e.instance.destroy.call(e.context),n.removeInstance(i)})}}}(),t.extend(this,{initialized:!1,uid:d,type:r,mode:i.getMode(s,n.required_caps,f),shimid:d+"_container",clients:0,options:n,can:function(e,n){var r=arguments[2]||a;if("string"===t.typeOf(e)&&"undefined"===t.typeOf(n)&&(e=i.parseCaps(e)),"object"===t.typeOf(e)){for(var o in e)if(!this.can(o,e[o],r))return!1;return!0}return"function"===t.typeOf(r[e])?r[e].call(this,n):n===r[e]},getShimContainer:function(){var n,i=e.get(this.shimid);return i||(n=this.options.container?e.get(this.options.container):document.body,i=document.createElement("div"),i.id=this.shimid,i.className="moxie-shim moxie-shim-"+this.type,t.extend(i.style,{position:"absolute",top:"0px",left:"0px",width:"1px",height:"1px",overflow:"hidden"}),n.appendChild(i),n=null),i},getShim:function(){return l},shimExec:function(t,e){var n=[].slice.call(arguments,2);return c.getShim().exec.call(this,this.uid,t,e,n)},exec:function(t,e){var n=[].slice.call(arguments,2);return c[t]&&c[t][e]?c[t][e].apply(this,n):c.shimExec.apply(this,arguments)},destroy:function(){if(c){var t=e.get(this.shimid);t&&t.parentNode.removeChild(t),l&&l.removeAllInstances(),this.unbindAll(),delete o[this.uid],this.uid=null,d=c=l=t=null}}}),this.mode&&n.required_caps&&!this.can(n.required_caps)&&(this.mode=!1)}var r={},o={};return i.order="html5,flash,silverlight,html4",i.getRuntime=function(t){return!!o[t]&&o[t]},i.addConstructor=function(t,e){e.prototype=n.instance,r[t]=e},i.getConstructor=function(t){return r[t]||null},i.getInfo=function(t){var e=i.getRuntime(t);return e?{uid:e.uid,type:e.type,mode:e.mode,can:function(){return e.can.apply(e,arguments)}}:null},i.parseCaps=function(e){var n={};return"string"!==t.typeOf(e)?e||{}:(t.each(e.split(","),function(t){n[t]=!0}),n)},i.can=function(t,e){var n,r,o=i.getConstructor(t);return!!o&&(n=new o({required_caps:e}),r=n.mode,n.destroy(),!!r)},i.thatCan=function(t,e){var n=(e||i.order).split(/\s*,\s*/);for(var r in n)if(i.can(n[r],t))return n[r];return null},i.getMode=function(e,n,i){var r=null;if("undefined"===t.typeOf(i)&&(i="browser"),n&&!t.isEmptyObj(e)){if(t.each(n,function(n,i){if(e.hasOwnProperty(i)){var o=e[i](n);if("string"==typeof o&&(o=[o]),r){if(!(r=t.arrayIntersect(r,o)))return r=!1}else r=o}}),r)return-1!==t.inArray(i,r)?i:r[0];if(!1===r)return!1}return i},i.capTrue=function(){return!0},i.capFalse=function(){return!1},i.capTest=function(t){return function(){return!!t}},i}),i("moxie/runtime/RuntimeClient",["moxie/core/Exceptions","moxie/core/utils/Basic","moxie/runtime/Runtime"],function(t,e,n){return function(){var i;e.extend(this,{connectRuntime:function(r){function o(e){var a,u;return e.length?(a=e.shift(),(u=n.getConstructor(a))?(i=new u(r),i.bind("Init",function(){i.initialized=!0,setTimeout(function(){i.clients++,s.trigger("RuntimeInit",i)},1)}),i.bind("Error",function(){i.destroy(),o(e)}),i.mode?void i.init():void i.trigger("Error")):void o(e)):(s.trigger("RuntimeError",new t.RuntimeError(t.RuntimeError.NOT_INIT_ERR)),void(i=null))}var a,s=this;if("string"===e.typeOf(r)?a=r:"string"===e.typeOf(r.ruid)&&(a=r.ruid),a){if(i=n.getRuntime(a))return i.clients++,i;throw new t.RuntimeError(t.RuntimeError.NOT_INIT_ERR)}o((r.runtime_order||n.order).split(/\s*,\s*/))},getRuntime:function(){return i&&i.uid?i:(i=null,null)},disconnectRuntime:function(){i&&--i.clients<=0&&(i.destroy(),i=null)}})}}),i("moxie/file/Blob",["moxie/core/utils/Basic","moxie/core/utils/Encode","moxie/runtime/RuntimeClient"],function(t,e,n){function i(o,a){function s(e,n,o){var a,s=r[this.uid];return"string"===t.typeOf(s)&&s.length?(a=new i(null,{type:o,size:n-e}),a.detach(s.substr(e,a.size)),a):null}n.call(this),o&&this.connectRuntime(o),a?"string"===t.typeOf(a)&&(a={data:a}):a={},t.extend(this,{uid:a.uid||t.guid("uid_"),ruid:o,size:a.size||0,type:a.type||"",slice:function(t,e,n){return this.isDetached()?s.apply(this,arguments):this.getRuntime().exec.call(this,"Blob","slice",this.getSource(),t,e,n)},getSource:function(){return r[this.uid]?r[this.uid]:null},detach:function(t){this.ruid&&(this.getRuntime().exec.call(this,"Blob","destroy"),this.disconnectRuntime(),this.ruid=null),t=t||"";var n=t.match(/^data:([^;]*);base64,/);n&&(this.type=n[1],t=e.atob(t.substring(t.indexOf("base64,")+7))),this.size=t.length,r[this.uid]=t},isDetached:function(){return!this.ruid&&"string"===t.typeOf(r[this.uid])},destroy:function(){this.detach(),delete r[this.uid]}}),a.data?this.detach(a.data):r[this.uid]=a}var r={};return i}),i("moxie/file/File",["moxie/core/utils/Basic","moxie/core/utils/Mime","moxie/file/Blob"],function(t,e,n){function i(i,r){var o,a;if(r||(r={}),a=r.type&&""!==r.type?r.type:e.getFileMime(r.name),r.name)o=r.name.replace(/\\/g,"/"),o=o.substr(o.lastIndexOf("/")+1);else{var s=a.split("/")[0];o=t.guid((""!==s?s:"file")+"_"),e.extensions[a]&&(o+="."+e.extensions[a][0])}n.apply(this,arguments),t.extend(this,{type:a||"",name:o||t.guid("file_"),lastModifiedDate:r.lastModifiedDate||(new Date).toLocaleString()})}return i.prototype=n.prototype,i}),i("moxie/file/FileInput",["moxie/core/utils/Basic","moxie/core/utils/Mime","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/core/EventTarget","moxie/core/I18n","moxie/file/File","moxie/runtime/Runtime","moxie/runtime/RuntimeClient"],function(t,e,n,i,r,o,a,s,u){function l(r){var l,d,f,p=this;if(-1!==t.inArray(t.typeOf(r),["string","node"])&&(r={browse_button:r}),!(d=n.get(r.browse_button)))throw new i.DOMException(i.DOMException.NOT_FOUND_ERR);f={accept:[{title:o.translate("All Files"),extensions:"*"}],name:"file",multiple:!1,required_caps:!1,container:d.parentNode||document.body},r=t.extend({},f,r),"string"==typeof r.required_caps&&(r.required_caps=s.parseCaps(r.required_caps)),"string"==typeof r.accept&&(r.accept=e.mimes2extList(r.accept)),l=n.get(r.container),l||(l=document.body),"static"===n.getStyle(l,"position")&&(l.style.position="relative"),l=d=null,u.call(p),t.extend(p,{uid:t.guid("uid_"),ruid:null,shimid:null,files:null,init:function(){p.convertEventPropsToHandlers(c),p.bind("RuntimeInit",function(e,i){p.ruid=i.uid,p.shimid=i.shimid,p.bind("Ready",function(){p.trigger("Refresh")},999),p.bind("Change",function(){var e=i.exec.call(p,"FileInput","getFiles");p.files=[],t.each(e,function(t){if(0===t.size)return!0;p.files.push(new a(p.ruid,t))})},999),p.bind("Refresh",function(){var e,o,a,s;a=n.get(r.browse_button),s=n.get(i.shimid),a&&(e=n.getPos(a,n.get(r.container)),o=n.getSize(a),s&&t.extend(s.style,{top:e.y+"px",left:e.x+"px",width:o.w+"px",height:o.h+"px"})),s=a=null}),i.exec.call(p,"FileInput","init",r)}),p.connectRuntime(t.extend({},r,{required_caps:{select_file:!0}}))},disable:function(e){var n=this.getRuntime();n&&n.exec.call(this,"FileInput","disable","undefined"===t.typeOf(e)||e)},refresh:function(){p.trigger("Refresh")},destroy:function(){var e=this.getRuntime();e&&(e.exec.call(this,"FileInput","destroy"),this.disconnectRuntime()),"array"===t.typeOf(this.files)&&t.each(this.files,function(t){t.destroy()}),this.files=null}})}var c=["ready","change","cancel","mouseenter","mouseleave","mousedown","mouseup"];return l.prototype=r.instance,l}),i("moxie/file/FileDrop",["moxie/core/I18n","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/core/utils/Basic","moxie/file/File","moxie/runtime/RuntimeClient","moxie/core/EventTarget","moxie/core/utils/Mime"],function(t,e,n,i,o,a,s,u){function l(n){var s,l=this;"string"==typeof n&&(n={drop_zone:n}),s={accept:[{title:t.translate("All Files"),extensions:"*"}],required_caps:{drag_and_drop:!0}},n="object"===(void 0===n?"undefined":r()(n))?i.extend({},s,n):s,n.container=e.get(n.drop_zone)||document.body,"static"===e.getStyle(n.container,"position")&&(n.container.style.position="relative"),"string"==typeof n.accept&&(n.accept=u.mimes2extList(n.accept)),a.call(l),i.extend(l,{uid:i.guid("uid_"),ruid:null,files:null,init:function(){l.convertEventPropsToHandlers(c),l.bind("RuntimeInit",function(t,e){l.ruid=e.uid,l.bind("Drop",function(){var t=e.exec.call(l,"FileDrop","getFiles");l.files=[],i.each(t,function(t){l.files.push(new o(l.ruid,t))})},999),e.exec.call(l,"FileDrop","init",n),l.dispatchEvent("ready")}),l.connectRuntime(n)},destroy:function(){var t=this.getRuntime();t&&(t.exec.call(this,"FileDrop","destroy"),this.disconnectRuntime()),this.files=null}})}var c=["ready","dragenter","dragleave","drop","error"];return l.prototype=s.instance,l}),i("moxie/runtime/RuntimeTarget",["moxie/core/utils/Basic","moxie/runtime/RuntimeClient","moxie/core/EventTarget"],function(t,e,n){function i(){this.uid=t.guid("uid_"),e.call(this),this.destroy=function(){this.disconnectRuntime(),this.unbindAll()}}return i.prototype=n.instance,i}),i("moxie/file/FileReader",["moxie/core/utils/Basic","moxie/core/utils/Encode","moxie/core/Exceptions","moxie/core/EventTarget","moxie/file/Blob","moxie/file/File","moxie/runtime/RuntimeTarget"],function(t,e,n,i,r,o,a){function s(){function i(t,i){function c(t){l.readyState=s.DONE,l.error=t,l.trigger("error"),d()}function d(){o.destroy(),o=null,l.trigger("loadend")}if(o=new a,this.convertEventPropsToHandlers(u),this.readyState===s.LOADING)return c(new n.DOMException(n.DOMException.INVALID_STATE_ERR));if(this.readyState=s.LOADING,this.trigger("loadstart"),i instanceof r)if(i.isDetached()){var f=i.getSource();switch(t){case"readAsText":case"readAsBinaryString":this.result=f;break;case"readAsDataURL":this.result="data:"+i.type+";base64,"+e.btoa(f)}this.readyState=s.DONE,this.trigger("load"),d()}else!function(e){o.bind("Error",function(t,e){c(e)}),o.bind("Progress",function(t){l.result=e.exec.call(o,"FileReader","getResult"),l.trigger(t)}),o.bind("Load",function(t){l.readyState=s.DONE,l.result=e.exec.call(o,"FileReader","getResult"),l.trigger(t),d()}),e.exec.call(o,"FileReader","read",t,i)}(o.connectRuntime(i.ruid));else c(new n.DOMException(n.DOMException.NOT_FOUND_ERR))}var o,l=this;t.extend(this,{uid:t.guid("uid_"),readyState:s.EMPTY,result:null,error:null,readAsBinaryString:function(t){i.call(this,"readAsBinaryString",t)},readAsDataURL:function(t){i.call(this,"readAsDataURL",t)},readAsText:function(t){i.call(this,"readAsText",t)},abort:function(){this.result=null,-1===t.inArray(this.readyState,[s.EMPTY,s.DONE])&&(this.readyState===s.LOADING&&(this.readyState=s.DONE),o&&o.getRuntime().exec.call(this,"FileReader","abort"),this.trigger("abort"),this.trigger("loadend"))},destroy:function(){this.abort(),o&&(o.getRuntime().exec.call(this,"FileReader","destroy"),o.disconnectRuntime()),l=o=null}})}var u=["loadstart","progress","load","abort","error","loadend"];return s.EMPTY=0,s.LOADING=1,s.DONE=2,s.prototype=i.instance,s}),i("moxie/core/utils/Url",[],function(){var t=function t(e,n){for(var i=["source","scheme","authority","userInfo","user","pass","host","port","relative","path","directory","file","query","fragment"],r=i.length,o={http:80,https:443},a={},s=/^(?:([^:\/?#]+):)?(?:\/\/()(?:(?:()(?:([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?()(?:(()(?:(?:[^?#\/]*\/)*)()(?:[^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/,u=s.exec(e||"");r--;)u[r]&&(a[i[r]]=u[r]);if(!a.scheme){n&&"string"!=typeof n||(n=t(n||document.location.href)),a.scheme=n.scheme,a.host=n.host,a.port=n.port;var l="";/^[^\/]/.test(a.path)&&(l=n.path,/(\/|\/[^\.]+)$/.test(l)?l+="/":l=l.replace(/\/[^\/]+$/,"/")),a.path=l+(a.path||"")}return a.port||(a.port=o[a.scheme]||80),a.port=parseInt(a.port,10),a.path||(a.path="/"),delete a.source,a};return{parseUrl:t,resolveUrl:function(e){var n={http:80,https:443},i=t(e);return i.scheme+"://"+i.host+(i.port!==n[i.scheme]?":"+i.port:"")+i.path+(i.query?i.query:"")},hasSameOrigin:function(e){function n(t){return[t.scheme,t.host,t.port].join("/")}return"string"==typeof e&&(e=t(e)),n(t())===n(e)}}}),i("moxie/file/FileReaderSync",["moxie/core/utils/Basic","moxie/runtime/RuntimeClient","moxie/core/utils/Encode"],function(t,e,n){return function(){function i(t,e){if(!e.isDetached()){var i=this.connectRuntime(e.ruid).exec.call(this,"FileReaderSync","read",t,e);return this.disconnectRuntime(),i}var r=e.getSource();switch(t){case"readAsBinaryString":return r;case"readAsDataURL":return"data:"+e.type+";base64,"+n.btoa(r);case"readAsText":for(var o="",a=0,s=r.length;a<s;a++)o+=String.fromCharCode(r[a]);return o}}e.call(this),t.extend(this,{uid:t.guid("uid_"),readAsBinaryString:function(t){return i.call(this,"readAsBinaryString",t)},readAsDataURL:function(t){return i.call(this,"readAsDataURL",t)},readAsText:function(t){return i.call(this,"readAsText",t)}})}}),i("moxie/xhr/FormData",["moxie/core/Exceptions","moxie/core/utils/Basic","moxie/file/Blob"],function(t,e,n){function i(){var t,i=[];e.extend(this,{append:function(r,o){var a=this,s=e.typeOf(o);o instanceof n?t={name:r,value:o}:"array"===s?(r+="[]",e.each(o,function(t){a.append(r,t)})):"object"===s?e.each(o,function(t,e){a.append(r+"["+e+"]",t)}):"null"===s||"undefined"===s||"number"===s&&isNaN(o)?a.append(r,"false"):i.push({name:r,value:o.toString()})},hasBlob:function(){return!!this.getBlob()},getBlob:function(){return t&&t.value||null},getBlobName:function(){return t&&t.name||null},each:function(n){e.each(i,function(t){n(t.value,t.name)}),t&&n(t.value,t.name)},destroy:function(){t=null,i=[]}})}return i}),i("moxie/xhr/XMLHttpRequest",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/core/EventTarget","moxie/core/utils/Encode","moxie/core/utils/Url","moxie/runtime/Runtime","moxie/runtime/RuntimeTarget","moxie/file/Blob","moxie/file/FileReaderSync","moxie/xhr/FormData","moxie/core/utils/Env","moxie/core/utils/Mime"],function(t,e,n,i,r,o,a,s,u,l,c,d){function f(){this.uid=t.guid("uid_")}function p(){function n(t,e){if(k.hasOwnProperty(t))return 1===arguments.length?c.can("define_property")?k[t]:S[t]:void(c.can("define_property")?k[t]=e:S[t]=e)}function u(e){function i(){E&&(E.destroy(),E=null),s.dispatchEvent("loadend"),s=null}function r(r){E.bind("LoadStart",function(t){n("readyState",p.LOADING),s.dispatchEvent("readystatechange"),s.dispatchEvent(t),M&&s.upload.dispatchEvent(t)}),E.bind("Progress",function(t){n("readyState")!==p.LOADING&&(n("readyState",p.LOADING),s.dispatchEvent("readystatechange")),s.dispatchEvent(t)}),E.bind("UploadProgress",function(t){M&&s.upload.dispatchEvent({type:"progress",lengthComputable:!1,total:t.total,loaded:t.loaded})}),E.bind("Load",function(e){n("readyState",p.DONE),n("status",Number(r.exec.call(E,"XMLHttpRequest","getStatus")||0)),n("statusText",h[n("status")]||""),n("response",r.exec.call(E,"XMLHttpRequest","getResponse",n("responseType"))),~t.inArray(n("responseType"),["text",""])?n("responseText",n("response")):"document"===n("responseType")&&n("responseXML",n("response")),z=r.exec.call(E,"XMLHttpRequest","getAllResponseHeaders"),s.dispatchEvent("readystatechange"),n("status")>0?(M&&s.upload.dispatchEvent(e),s.dispatchEvent(e)):(D=!0,s.dispatchEvent("error")),i()}),E.bind("Abort",function(t){s.dispatchEvent(t),i()}),E.bind("Error",function(t){D=!0,n("readyState",p.DONE),s.dispatchEvent("readystatechange"),L=!0,s.dispatchEvent(t),i()}),r.exec.call(E,"XMLHttpRequest","send",{url:v,method:_,async:R,user:y,password:w,headers:I,mimeType:A,encoding:T,responseType:s.responseType,withCredentials:s.withCredentials,options:N},e)}var s=this;b=(new Date).getTime(),E=new a,"string"==typeof N.required_caps&&(N.required_caps=o.parseCaps(N.required_caps)),N.required_caps=t.extend({},N.required_caps,{return_response_type:s.responseType}),e instanceof l&&(N.required_caps.send_multipart=!0),U||(N.required_caps.do_cors=!0),N.ruid?r(E.connectRuntime(N)):(E.bind("RuntimeInit",function(t,e){r(e)}),E.bind("RuntimeError",function(t,e){s.dispatchEvent("RuntimeError",e)}),E.connectRuntime(N))}function g(){n("responseText",""),n("responseXML",null),n("response",null),n("status",0),n("statusText",""),b=x=null}var v,_,y,w,b,x,E,C,S=this,k={timeout:0,readyState:p.UNSENT,withCredentials:!1,status:0,statusText:"",responseType:"",responseXML:null,responseText:null,response:null},R=!0,I={},T=null,A=null,O=!1,F=!1,M=!1,L=!1,D=!1,U=!1,P=null,B=null,N={},z="";t.extend(this,k,{uid:t.guid("uid_"),upload:new f,open:function(o,a,s,u,l){var c;if(!o||!a)throw new e.DOMException(e.DOMException.SYNTAX_ERR);if(/[\u0100-\uffff]/.test(o)||i.utf8_encode(o)!==o)throw new e.DOMException(e.DOMException.SYNTAX_ERR);if(~t.inArray(o.toUpperCase(),["CONNECT","DELETE","GET","HEAD","OPTIONS","POST","PUT","TRACE","TRACK"])&&(_=o.toUpperCase()),~t.inArray(_,["CONNECT","TRACE","TRACK"]))throw new e.DOMException(e.DOMException.SECURITY_ERR);if(a=i.utf8_encode(a),c=r.parseUrl(a),U=r.hasSameOrigin(c),v=r.resolveUrl(a),(u||l)&&!U)throw new e.DOMException(e.DOMException.INVALID_ACCESS_ERR);if(y=u||c.user,w=l||c.pass,!1===(R=s||!0)&&(n("timeout")||n("withCredentials")||""!==n("responseType")))throw new e.DOMException(e.DOMException.INVALID_ACCESS_ERR);O=!R,F=!1,I={},g.call(this),n("readyState",p.OPENED),this.convertEventPropsToHandlers(["readystatechange"]),this.dispatchEvent("readystatechange")},setRequestHeader:function(r,o){var a=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","content-transfer-encoding","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"];if(n("readyState")!==p.OPENED||F)throw new e.DOMException(e.DOMException.INVALID_STATE_ERR);if(/[\u0100-\uffff]/.test(r)||i.utf8_encode(r)!==r)throw new e.DOMException(e.DOMException.SYNTAX_ERR);return r=t.trim(r).toLowerCase(),!~t.inArray(r,a)&&!/^(proxy\-|sec\-)/.test(r)&&(I[r]?I[r]+=", "+o:I[r]=o,!0)},getAllResponseHeaders:function(){return z||""},getResponseHeader:function(e){return e=e.toLowerCase(),D||~t.inArray(e,["set-cookie","set-cookie2"])?null:z&&""!==z&&(C||(C={},t.each(z.split(/\r\n/),function(e){var n=e.split(/:\s+/);2===n.length&&(n[0]=t.trim(n[0]),C[n[0].toLowerCase()]={header:n[0],value:t.trim(n[1])})})),C.hasOwnProperty(e))?C[e].header+": "+C[e].value:null},overrideMimeType:function(i){var r,o;if(~t.inArray(n("readyState"),[p.LOADING,p.DONE]))throw new e.DOMException(e.DOMException.INVALID_STATE_ERR);if(i=t.trim(i.toLowerCase()),/;/.test(i)&&(r=i.match(/^([^;]+)(?:;\scharset\=)?(.*)$/))&&(i=r[1],r[2]&&(o=r[2])),!d.mimes[i])throw new e.DOMException(e.DOMException.SYNTAX_ERR);P=i,B=o},send:function(n,r){if(N="string"===t.typeOf(r)?{ruid:r}:r||{},this.convertEventPropsToHandlers(m),this.upload.convertEventPropsToHandlers(m),this.readyState!==p.OPENED||F)throw new e.DOMException(e.DOMException.INVALID_STATE_ERR);if(n instanceof s)N.ruid=n.ruid,A=n.type||"application/octet-stream";else if(n instanceof l){if(n.hasBlob()){var o=n.getBlob();N.ruid=o.ruid,A=o.type||"application/octet-stream"}}else"string"==typeof n&&(T="UTF-8",A="text/plain;charset=UTF-8",n=i.utf8_encode(n));this.withCredentials||(this.withCredentials=N.required_caps&&N.required_caps.send_browser_cookies&&!U),M=!O&&this.upload.hasEventListener(),D=!1,L=!n,O||(F=!0),u.call(this,n)},abort:function(){if(D=!0,O=!1,~t.inArray(n("readyState"),[p.UNSENT,p.OPENED,p.DONE]))n("readyState",p.UNSENT);else{if(n("readyState",p.DONE),F=!1,!E)throw new e.DOMException(e.DOMException.INVALID_STATE_ERR);E.getRuntime().exec.call(E,"XMLHttpRequest","abort",L),L=!0}},destroy:function(){E&&("function"===t.typeOf(E.destroy)&&E.destroy(),E=null),this.unbindAll(),this.upload&&(this.upload.unbindAll(),this.upload=null)}})}var h={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"Reserved",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",426:"Upgrade Required",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",510:"Not Extended"};f.prototype=n.instance;var m=["loadstart","progress","abort","error","load","timeout","loadend"];return p.UNSENT=0,p.OPENED=1,p.HEADERS_RECEIVED=2,p.LOADING=3,p.DONE=4,p.prototype=n.instance,p}),i("moxie/runtime/Transporter",["moxie/core/utils/Basic","moxie/core/utils/Encode","moxie/runtime/RuntimeClient","moxie/core/EventTarget"],function(t,e,n,i){function r(){function i(){c=d=0,l=this.result=null}function o(e,n){var i=this;u=n,i.bind("TransportingProgress",function(e){(d=e.loaded)<c&&-1===t.inArray(i.state,[r.IDLE,r.DONE])&&a.call(i)},999),i.bind("TransportingComplete",function(){d=c,i.state=r.DONE,l=null,i.result=u.exec.call(i,"Transporter","getAsBlob",e||"")},999),i.state=r.BUSY,i.trigger("TransportingStarted"),a.call(i)}function a(){var t,n=this,i=c-d;f>i&&(f=i),t=e.btoa(l.substr(d,f)),u.exec.call(n,"Transporter","receive",t,c)}var s,u,l,c,d,f;n.call(this),t.extend(this,{uid:t.guid("uid_"),state:r.IDLE,result:null,transport:function(e,n,r){var a=this;if(r=t.extend({chunk_size:204798},r),(s=r.chunk_size%3)&&(r.chunk_size+=3-s),f=r.chunk_size,i.call(this),l=e,c=e.length,"string"===t.typeOf(r)||r.ruid)o.call(a,n,this.connectRuntime(r));else{var u=function t(e,i){a.unbind("RuntimeInit",t),o.call(a,n,i)};this.bind("RuntimeInit",u),this.connectRuntime(r)}},abort:function(){var t=this;t.state=r.IDLE,u&&(u.exec.call(t,"Transporter","clear"),t.trigger("TransportingAborted")),i.call(t)},destroy:function(){this.unbindAll(),u=null,this.disconnectRuntime(),i.call(this)}})}return r.IDLE=0,r.BUSY=1,r.DONE=2,r.prototype=i.instance,r}),i("moxie/image/Image",["moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/file/FileReaderSync","moxie/xhr/XMLHttpRequest","moxie/runtime/Runtime","moxie/runtime/RuntimeClient","moxie/runtime/Transporter","moxie/core/utils/Env","moxie/core/EventTarget","moxie/file/Blob","moxie/file/File","moxie/core/utils/Encode"],function(t,e,n,i,o,a,s,u,l,c,d,f,p){function h(){function i(t){t||(t=this.getRuntime().exec.call(this,"Image","getInfo")),this.size=t.size,this.width=t.width,this.height=t.height,this.type=t.type,this.meta=t.meta,""===this.name&&(this.name=t.name)}function c(e){var i=t.typeOf(e);try{if(e instanceof h){if(!e.size)throw new n.DOMException(n.DOMException.INVALID_STATE_ERR);g.apply(this,arguments)}else if(e instanceof d){if(!~t.inArray(e.type,["image/jpeg","image/png"]))throw new n.ImageError(n.ImageError.WRONG_FORMAT);v.apply(this,arguments)}else if(-1!==t.inArray(i,["blob","file"]))c.call(this,new f(null,e),arguments[1]);else if("string"===i)/^data:[^;]*;base64,/.test(e)?c.call(this,new d(null,{data:e}),arguments[1]):_.apply(this,arguments);else{if("node"!==i||"img"!==e.nodeName.toLowerCase())throw new n.DOMException(n.DOMException.TYPE_MISMATCH_ERR);c.call(this,e.src,arguments[1])}}catch(t){this.trigger("error",t.code)}}function g(e,n){var i=this.connectRuntime(e.ruid);this.ruid=i.uid,i.exec.call(this,"Image","loadFromImage",e,"undefined"===t.typeOf(n)||n)}function v(e,n){function i(t){r.ruid=t.uid,t.exec.call(r,"Image","loadFromBlob",e)}var r=this;r.name=e.name||"",e.isDetached()?(this.bind("RuntimeInit",function(t,e){i(e)}),n&&"string"==typeof n.required_caps&&(n.required_caps=a.parseCaps(n.required_caps)),this.connectRuntime(t.extend({required_caps:{access_image_binary:!0,resize_image:!0}},n))):i(this.connectRuntime(e.ruid))}function _(t,e){var n,i=this;n=new o,n.open("get",t),n.responseType="blob",n.onprogress=function(t){i.trigger(t)},n.onload=function(){v.call(i,n.response,!0)},n.onerror=function(t){i.trigger(t)},n.onloadend=function(){n.destroy()},n.bind("RuntimeError",function(t,e){i.trigger("RuntimeError",e)}),n.send(null,e)}s.call(this),t.extend(this,{uid:t.guid("uid_"),ruid:null,name:"",size:0,width:0,height:0,type:"",meta:{},clone:function(){this.load.apply(this,arguments)},load:function(){this.bind("Load Resize",function(){i.call(this)},999),this.convertEventPropsToHandlers(m),c.apply(this,arguments)},downsize:function(e){var i={width:this.width,height:this.height,crop:!1,preserveHeaders:!0};e="object"===(void 0===e?"undefined":r()(e))?t.extend(i,e):t.extend(i,{width:arguments[0],height:arguments[1],crop:arguments[2],preserveHeaders:arguments[3]});try{if(!this.size)throw new n.DOMException(n.DOMException.INVALID_STATE_ERR);if(this.width>h.MAX_RESIZE_WIDTH||this.height>h.MAX_RESIZE_HEIGHT)throw new n.ImageError(n.ImageError.MAX_RESOLUTION_ERR);this.getRuntime().exec.call(this,"Image","downsize",e.width,e.height,e.crop,e.preserveHeaders)}catch(t){this.trigger("error",t.code)}},crop:function(t,e,n){this.downsize(t,e,!0,n)},getAsCanvas:function(){if(!l.can("create_canvas"))throw new n.RuntimeError(n.RuntimeError.NOT_SUPPORTED_ERR);return this.connectRuntime(this.ruid).exec.call(this,"Image","getAsCanvas")},getAsBlob:function(t,e){if(!this.size)throw new n.DOMException(n.DOMException.INVALID_STATE_ERR);return t||(t="image/jpeg"),"image/jpeg"!==t||e||(e=90),this.getRuntime().exec.call(this,"Image","getAsBlob",t,e)},getAsDataURL:function(t,e){if(!this.size)throw new n.DOMException(n.DOMException.INVALID_STATE_ERR);return this.getRuntime().exec.call(this,"Image","getAsDataURL",t,e)},getAsBinaryString:function(t,e){var n=this.getAsDataURL(t,e);return p.atob(n.substring(n.indexOf("base64,")+7))},embed:function(i){function r(){if(l.can("create_canvas")){var e=o.getAsCanvas();if(e)return i.appendChild(e),e=null,o.destroy(),void f.trigger("embedded")}var r=o.getAsDataURL(a,s);if(!r)throw new n.ImageError(n.ImageError.WRONG_FORMAT);if(l.can("use_data_uri_of",r.length))i.innerHTML='<img src="'+r+'" width="'+o.width+'" height="'+o.height+'" />',o.destroy(),f.trigger("embedded");else{var c=new u;c.bind("TransportingComplete",function(){d=f.connectRuntime(this.result.ruid),f.bind("Embedded",function(){t.extend(d.getShimContainer().style,{top:"0px",left:"0px",width:o.width+"px",height:o.height+"px"}),d=null},999),d.exec.call(f,"ImageView","display",this.result.uid,g,v),o.destroy()}),c.transport(p.atob(r.substring(r.indexOf("base64,")+7)),a,t.extend({},m,{required_caps:{display_media:!0},runtime_order:"flash,silverlight",container:i}))}}var o,a,s,c,d,f=this,m=arguments[1]||{},g=this.width,v=this.height;try{if(!(i=e.get(i)))throw new n.DOMException(n.DOMException.INVALID_NODE_TYPE_ERR);if(!this.size)throw new n.DOMException(n.DOMException.INVALID_STATE_ERR);if(this.width>h.MAX_RESIZE_WIDTH||this.height>h.MAX_RESIZE_HEIGHT)throw new n.ImageError(n.ImageError.MAX_RESOLUTION_ERR);if(a=m.type||this.type||"image/jpeg",s=m.quality||90,c="undefined"!==t.typeOf(m.crop)&&m.crop,m.width)g=m.width,v=m.height||g;else{var _=e.getSize(i);_.w&&_.h&&(g=_.w,v=_.h)}return o=new h,o.bind("Resize",function(){r.call(f)}),o.bind("Load",function(){o.downsize(g,v,c,!1)}),o.clone(this,!1),o}catch(t){this.trigger("error",t.code)}},destroy:function(){this.ruid&&(this.getRuntime().exec.call(this,"Image","destroy"),this.disconnectRuntime()),this.unbindAll()}})}var m=["progress","load","error","resize","embedded"];return h.MAX_RESIZE_WIDTH=6500,h.MAX_RESIZE_HEIGHT=6500,h.prototype=c.instance,h}),i("moxie/runtime/html5/Runtime",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/Runtime","moxie/core/utils/Env"],function(t,e,n,i){function r(e){var r=this,s=n.capTest,u=n.capTrue,l=t.extend({access_binary:s(window.FileReader||window.File&&window.File.getAsDataURL),access_image_binary:function(){return r.can("access_binary")&&!!a.Image},display_media:s(i.can("create_canvas")||i.can("use_data_uri_over32kb")),do_cors:s(window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest),drag_and_drop:s(function(){var t=document.createElement("div");return("draggable"in t||"ondragstart"in t&&"ondrop"in t)&&("IE"!==i.browser||i.version>9)}()),filter_by_extension:s(function(){return"Chrome"===i.browser&&i.version>=28||"IE"===i.browser&&i.version>=10}()),return_response_headers:u,return_response_type:function(t){return!("json"!==t||!window.JSON)||i.can("return_response_type",t)},return_status_code:u,report_upload_progress:s(window.XMLHttpRequest&&(new XMLHttpRequest).upload),resize_image:function(){return r.can("access_binary")&&i.can("create_canvas")},select_file:function(){return i.can("use_fileinput")&&window.File},select_folder:function(){return r.can("select_file")&&"Chrome"===i.browser&&i.version>=21},select_multiple:function(){return r.can("select_file")&&!("Safari"===i.browser&&"Windows"===i.os)&&!("iOS"===i.os&&i.verComp(i.osVersion,"7.0.4","<"))},send_binary_string:s(window.XMLHttpRequest&&((new XMLHttpRequest).sendAsBinary||window.Uint8Array&&window.ArrayBuffer)),send_custom_headers:s(window.XMLHttpRequest),send_multipart:function(){return!!(window.XMLHttpRequest&&(new XMLHttpRequest).upload&&window.FormData)||r.can("send_binary_string")},slice_blob:s(window.File&&(File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice)),stream_upload:function(){return r.can("slice_blob")&&r.can("send_multipart")},summon_file_dialog:s(function(){return"Firefox"===i.browser&&i.version>=4||"Opera"===i.browser&&i.version>=12||"IE"===i.browser&&i.version>=10||!!~t.inArray(i.browser,["Chrome","Safari"])}()),upload_filesize:u},arguments[2]);n.call(this,e,arguments[1]||o,l),t.extend(this,{init:function(){this.trigger("Init")},destroy:function(t){return function(){t.call(r),t=r=null}}(this.destroy)}),t.extend(this.getShim(),a)}var o="html5",a={};return n.addConstructor(o,r),a}),i("moxie/runtime/html5/file/Blob",["moxie/runtime/html5/Runtime","moxie/file/Blob"],function(t,e){function n(){function t(t,e,n){var i;if(!window.File.prototype.slice)return(i=window.File.prototype.webkitSlice||window.File.prototype.mozSlice)?i.call(t,e,n):null;try{return t.slice(),t.slice(e,n)}catch(i){return t.slice(e,n-e)}}this.slice=function(){return new e(this.getRuntime().uid,t.apply(this,arguments))}}return t.Blob=n}),i("moxie/core/utils/Events",["moxie/core/utils/Basic"],function(t){function e(){this.returnValue=!1}function n(){this.cancelBubble=!0}var i={},r="moxie_"+t.guid(),o=function(o,a,s,u){var l,c;a=a.toLowerCase(),o.addEventListener?(l=s,o.addEventListener(a,l,!1)):o.attachEvent&&(l=function(){var t=window.event;t.target||(t.target=t.srcElement),t.preventDefault=e,t.stopPropagation=n,s(t)},o.attachEvent("on"+a,l)),o[r]||(o[r]=t.guid()),i.hasOwnProperty(o[r])||(i[o[r]]={}),c=i[o[r]],c.hasOwnProperty(a)||(c[a]=[]),c[a].push({func:l,orig:s,key:u})},a=function(e,n,o){var a;if(n=n.toLowerCase(),e[r]&&i[e[r]]&&i[e[r]][n]){a=i[e[r]][n];for(var s=a.length-1;s>=0&&(a[s].orig!==o&&a[s].key!==o||(e.removeEventListener?e.removeEventListener(n,a[s].func,!1):e.detachEvent&&e.detachEvent("on"+n,a[s].func),a[s].orig=null,a[s].func=null,a.splice(s,1),void 0===o));s--);if(a.length||delete i[e[r]][n],t.isEmptyObj(i[e[r]])){delete i[e[r]];try{delete e[r]}catch(t){e[r]=void 0}}}};return{addEvent:o,removeEvent:a,removeAllEvents:function(e,n){e&&e[r]&&t.each(i[e[r]],function(t,i){a(e,i,n)})}}}),i("moxie/runtime/html5/file/FileInput",["moxie/runtime/html5/Runtime","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/utils/Events","moxie/core/utils/Mime","moxie/core/utils/Env"],function(t,e,n,i,r,o){function a(){var t,a=[];e.extend(this,{init:function(s){var u,l,c,d,f,p,h=this,m=h.getRuntime();t=s,a=[],c=t.accept.mimes||r.extList2mimes(t.accept,m.can("filter_by_extension")),l=m.getShimContainer(),l.innerHTML='<input id="'+m.uid+'" type="file" style="font-size:999px;opacity:0;"'+(t.multiple&&m.can("select_multiple")?"multiple":"")+(t.directory&&m.can("select_folder")?"webkitdirectory directory":"")+(c?' accept="'+c.join(",")+'"':"")+" />",u=n.get(m.uid),e.extend(u.style,{position:"absolute",top:0,left:0,width:"100%",height:"100%"}),d=n.get(t.browse_button),m.can("summon_file_dialog")&&("static"===n.getStyle(d,"position")&&(d.style.position="relative"),f=parseInt(n.getStyle(d,"z-index"),10)||1,d.style.zIndex=f,l.style.zIndex=f-1,i.addEvent(d,"click",function(t){var e=n.get(m.uid);e&&!e.disabled&&e.click(),t.preventDefault()},h.uid)),p=m.can("summon_file_dialog")?d:l,i.addEvent(p,"mouseover",function(){h.trigger("mouseenter")},h.uid),i.addEvent(p,"mouseout",function(){h.trigger("mouseleave")},h.uid),i.addEvent(p,"mousedown",function(){h.trigger("mousedown")},h.uid),i.addEvent(n.get(t.container),"mouseup",function(){h.trigger("mouseup")},h.uid),u.onchange=function n(){if(a=[],t.directory?e.each(this.files,function(t){"."!==t.name&&a.push(t)}):a=[].slice.call(this.files),"IE"!==o.browser&&"IEMobile"!==o.browser)this.value="";else{var i=this.cloneNode(!0);this.parentNode.replaceChild(i,this),i.onchange=n}h.trigger("change")},h.trigger({type:"ready",async:!0}),l=null},getFiles:function(){return a},disable:function(t){var e,i=this.getRuntime();(e=n.get(i.uid))&&(e.disabled=!!t)},destroy:function(){var e=this.getRuntime(),r=e.getShim(),o=e.getShimContainer();i.removeAllEvents(o,this.uid),i.removeAllEvents(t&&n.get(t.container),this.uid),i.removeAllEvents(t&&n.get(t.browse_button),this.uid),o&&(o.innerHTML=""),r.removeInstance(this.uid),a=t=o=r=null}})}return t.FileInput=a}),i("moxie/runtime/html5/file/FileDrop",["moxie/runtime/html5/Runtime","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/utils/Events","moxie/core/utils/Mime"],function(t,e,n,i,r){function o(){function t(t){if(!t.dataTransfer||!t.dataTransfer.types)return!1;var n=e.toArray(t.dataTransfer.types||[]);return-1!==e.inArray("Files",n)||-1!==e.inArray("public.file-url",n)||-1!==e.inArray("application/x-moz-file",n)}function o(t){for(var n=[],i=0;i<t.length;i++)[].push.apply(n,t[i].extensions.split(/\s*,\s*/));return-1===e.inArray("*",n)?n:[]}function a(t){if(!p.length)return!0;var n=r.getFileExtension(t.name);return!n||-1!==e.inArray(n,p)}function s(t,n){var i=[];e.each(t,function(t){var e=t.webkitGetAsEntry();if(e)if(e.isFile){var n=t.getAsFile();a(n)&&f.push(n)}else i.push(e)}),i.length?u(i,n):n()}function u(t,n){var i=[];e.each(t,function(t){i.push(function(e){l(t,e)})}),e.inSeries(i,function(){n()})}function l(t,e){t.isFile?t.file(function(t){a(t)&&f.push(t),e()},function(){e()}):t.isDirectory?c(t,e):e()}function c(t,e){function n(t){r.readEntries(function(e){e.length?([].push.apply(i,e),n(t)):t()},t)}var i=[],r=t.createReader();n(function(){u(i,e)})}var d,f=[],p=[];e.extend(this,{init:function(n){var r,u=this;d=n,p=o(d.accept),r=d.container,i.addEvent(r,"dragover",function(e){t(e)&&(e.preventDefault(),e.dataTransfer.dropEffect="copy")},u.uid),i.addEvent(r,"drop",function(n){t(n)&&(n.preventDefault(),f=[],n.dataTransfer.items&&n.dataTransfer.items[0].webkitGetAsEntry?s(n.dataTransfer.items,function(){u.trigger("drop")}):(e.each(n.dataTransfer.files,function(t){a(t)&&f.push(t)}),u.trigger("drop")))},u.uid),i.addEvent(r,"dragenter",function(t){u.trigger("dragenter")},u.uid),i.addEvent(r,"dragleave",function(t){u.trigger("dragleave")},u.uid)},getFiles:function(){return f},destroy:function(){i.removeAllEvents(d&&n.get(d.container),this.uid),f=p=d=null}})}return t.FileDrop=o}),i("moxie/runtime/html5/file/FileReader",["moxie/runtime/html5/Runtime","moxie/core/utils/Encode","moxie/core/utils/Basic"],function(t,e,n){function i(){function t(t){return e.atob(t.substring(t.indexOf("base64,")+7))}var i,r=!1;n.extend(this,{read:function(t,e){var o=this;i=new window.FileReader,i.addEventListener("progress",function(t){o.trigger(t)}),i.addEventListener("load",function(t){o.trigger(t)}),i.addEventListener("error",function(t){o.trigger(t,i.error)}),i.addEventListener("loadend",function(){i=null}),"function"===n.typeOf(i[t])?(r=!1,i[t](e.getSource())):"readAsBinaryString"===t&&(r=!0,i.readAsDataURL(e.getSource()))},getResult:function(){return i&&i.result?r?t(i.result):i.result:null},abort:function(){i&&i.abort()},destroy:function(){i=null}})}return t.FileReader=i}),i("moxie/runtime/html5/xhr/XMLHttpRequest",["moxie/runtime/html5/Runtime","moxie/core/utils/Basic","moxie/core/utils/Mime","moxie/core/utils/Url","moxie/file/File","moxie/file/Blob","moxie/xhr/FormData","moxie/core/Exceptions","moxie/core/utils/Env"],function(t,e,n,i,r,o,a,s,u){function l(){function t(t,e){var n,i,r=this;n=e.getBlob().getSource(),i=new window.FileReader,i.onload=function(){e.append(e.getBlobName(),new o(null,{type:n.type,data:i.result})),h.send.call(r,t,e)},i.readAsBinaryString(n)}function l(){return!window.XMLHttpRequest||"IE"===u.browser&&u.version<8?function(){for(var t=["Msxml2.XMLHTTP.6.0","Microsoft.XMLHTTP"],e=0;e<t.length;e++)try{return new ActiveXObject(t[e])}catch(t){}}():new window.XMLHttpRequest}function c(t){var e=t.responseXML,n=t.responseText;return"IE"===u.browser&&n&&e&&!e.documentElement&&/[^\/]+\/[^\+]+\+xml/.test(t.getResponseHeader("Content-Type"))&&(e=new window.ActiveXObject("Microsoft.XMLDOM"),e.async=!1,e.validateOnParse=!1,e.loadXML(n)),e&&("IE"===u.browser&&0!==e.parseError||!e.documentElement||"parsererror"===e.documentElement.tagName)?null:e}function d(t){var e="----moxieboundary"+(new Date).getTime(),n="\r\n",i="";if(!this.getRuntime().can("send_binary_string"))throw new s.RuntimeError(s.RuntimeError.NOT_SUPPORTED_ERR);return f.setRequestHeader("Content-Type","multipart/form-data; boundary="+e),t.each(function(t,r){i+=t instanceof o?"--"+e+n+'Content-Disposition: form-data; name="'+r+'"; filename="'+unescape(encodeURIComponent(t.name||"blob"))+'"'+n+"Content-Type: "+(t.type||"application/octet-stream")+n+n+t.getSource()+n:"--"+e+n+'Content-Disposition: form-data; name="'+r+'"'+n+n+unescape(encodeURIComponent(t))+n}),i+="--"+e+"--"+n}var f,p,h=this;e.extend(this,{send:function(n,r){var s=this,c="Mozilla"===u.browser&&u.version>=4&&u.version<7,h="Android Browser"===u.browser,m=!1;if(p=n.url.replace(/^.+?\/([\w\-\.]+)$/,"$1").toLowerCase(),f=l(),f.open(n.method,n.url,n.async,n.user,n.password),r instanceof o)r.isDetached()&&(m=!0),r=r.getSource();else if(r instanceof a){if(r.hasBlob())if(r.getBlob().isDetached())r=d.call(s,r),m=!0;else if((c||h)&&"blob"===e.typeOf(r.getBlob().getSource())&&window.FileReader)return void t.call(s,n,r);if(r instanceof a){var g=new window.FormData;r.each(function(t,e){t instanceof o?g.append(e,t.getSource()):g.append(e,t)}),r=g}}f.upload?(n.withCredentials&&(f.withCredentials=!0),f.addEventListener("load",function(t){s.trigger(t)}),f.addEventListener("error",function(t){s.trigger(t)}),f.addEventListener("progress",function(t){s.trigger(t)}),f.upload.addEventListener("progress",function(t){s.trigger({type:"UploadProgress",loaded:t.loaded,total:t.total})})):f.onreadystatechange=function(){switch(f.readyState){case 1:case 2:break;case 3:var t,e;try{i.hasSameOrigin(n.url)&&(t=f.getResponseHeader("Content-Length")||0),f.responseText&&(e=f.responseText.length)}catch(n){t=e=0}s.trigger({type:"progress",lengthComputable:!!t,total:parseInt(t,10),loaded:e});break;case 4:f.onreadystatechange=function(){},0===f.status?s.trigger("error"):s.trigger("load")}},e.isEmptyObj(n.headers)||e.each(n.headers,function(t,e){f.setRequestHeader(e,t)}),""!==n.responseType&&"responseType"in f&&("json"!==n.responseType||u.can("return_response_type","json")?f.responseType=n.responseType:f.responseType="text"),m?f.sendAsBinary?f.sendAsBinary(r):function(){for(var t=new Uint8Array(r.length),e=0;e<r.length;e++)t[e]=255&r.charCodeAt(e);f.send(t.buffer)}():f.send(r),s.trigger("loadstart")},getStatus:function(){try{if(f)return f.status}catch(t){}return 0},getResponse:function(t){var e=this.getRuntime();try{switch(t){case"blob":var i=new r(e.uid,f.response),o=f.getResponseHeader("Content-Disposition");if(o){var a=o.match(/filename=([\'\"'])([^\1]+)\1/);a&&(p=a[2])}return i.name=p,i.type||(i.type=n.getFileMime(p)),i;case"json":return u.can("return_response_type","json")?f.response:200===f.status&&window.JSON?JSON.parse(f.responseText):null;case"document":return c(f);default:return""!==f.responseText?f.responseText:null}}catch(t){return null}},getAllResponseHeaders:function(){try{return f.getAllResponseHeaders()}catch(t){}return""},abort:function(){f&&f.abort()},destroy:function(){h=p=null}})}return t.XMLHttpRequest=l}),i("moxie/runtime/html5/utils/BinaryReader",[],function(){return function(){function t(t,e){var n,i=o?0:-8*(e-1),a=0;for(n=0;n<e;n++)a|=r.charCodeAt(t+n)<<Math.abs(i+8*n);return a}function n(t,e,n){n=3===arguments.length?n:r.length-e-1,r=r.substr(0,e)+t+r.substr(n+e)}function i(t,e,i){var r,a="",s=o?0:-8*(i-1);for(r=0;r<i;r++)a+=String.fromCharCode(e>>Math.abs(s+8*r)&255);n(a,t,i)}var r,o=!1;return{II:function(t){if(t===e)return o;o=t},init:function(t){o=!1,r=t},SEGMENT:function(t,e,i){switch(arguments.length){case 1:return r.substr(t,r.length-t-1);case 2:return r.substr(t,e);case 3:n(i,t,e);break;default:return r}},BYTE:function(e){return t(e,1)},SHORT:function(e){return t(e,2)},LONG:function(n,r){if(r===e)return t(n,4);i(n,r,4)},SLONG:function(e){var n=t(e,4);return n>2147483647?n-4294967296:n},STRING:function(e,n){var i="";for(n+=e;e<n;e++)i+=String.fromCharCode(t(e,1));return i}}}}),i("moxie/runtime/html5/image/JPEGHeaders",["moxie/runtime/html5/utils/BinaryReader"],function(t){return function e(n){var i,r,o,a=[],s=0;if(i=new t,i.init(n),65496===i.SHORT(0)){for(r=2;r<=n.length;)if((o=i.SHORT(r))>=65488&&o<=65495)r+=2;else{if(65498===o||65497===o)break;s=i.SHORT(r+2)+2,o>=65505&&o<=65519&&a.push({hex:o,name:"APP"+(15&o),start:r,length:s,segment:i.SEGMENT(r,s)}),r+=s}return i.init(null),{headers:a,restore:function(t){var e,n;for(i.init(t),r=65504==i.SHORT(2)?4+i.SHORT(4):2,n=0,e=a.length;n<e;n++)i.SEGMENT(r,0,a[n].segment),r+=a[n].length;return t=i.SEGMENT(),i.init(null),t},strip:function(t){var n,r,o;for(r=new e(t),n=r.headers,r.purge(),i.init(t),o=n.length;o--;)i.SEGMENT(n[o].start,n[o].length,"");return t=i.SEGMENT(),i.init(null),t},get:function(t){for(var e=[],n=0,i=a.length;n<i;n++)a[n].name===t.toUpperCase()&&e.push(a[n].segment);return e},set:function(t,e){var n,i,r,o=[];for("string"==typeof e?o.push(e):o=e,n=i=0,r=a.length;n<r&&(a[n].name===t.toUpperCase()&&(a[n].segment=o[i],a[n].length=o[i].length,i++),!(i>=o.length));n++);},purge:function(){a=[],i.init(null),i=null}}}}}),i("moxie/runtime/html5/image/ExifParser",["moxie/core/utils/Basic","moxie/runtime/html5/utils/BinaryReader"],function(t,n){return function(){function i(t,n){var i,o,a,u,l,f,p,h=s.SHORT(t),m=[],g={};for(i=0;i<h;i++)if(f=t+12*i+2,(a=n[s.SHORT(f)])!==e){switch(u=s.SHORT(f+=2),l=s.LONG(f+=2),f+=4,m=[],u){case 1:case 7:for(l>4&&(f=s.LONG(f)+d.tiffHeader),o=0;o<l;o++)m[o]=s.BYTE(f+o);break;case 2:l>4&&(f=s.LONG(f)+d.tiffHeader),g[a]=s.STRING(f,l-1);continue;case 3:for(l>2&&(f=s.LONG(f)+d.tiffHeader),o=0;o<l;o++)m[o]=s.SHORT(f+2*o);break;case 4:for(l>1&&(f=s.LONG(f)+d.tiffHeader),o=0;o<l;o++)m[o]=s.LONG(f+4*o);break;case 5:for(f=s.LONG(f)+d.tiffHeader,o=0;o<l;o++)m[o]=s.LONG(f+4*o)/s.LONG(f+4*o+4);break;case 9:for(f=s.LONG(f)+d.tiffHeader,o=0;o<l;o++)m[o]=s.SLONG(f+4*o);break;case 10:for(f=s.LONG(f)+d.tiffHeader,o=0;o<l;o++)m[o]=s.SLONG(f+4*o)/s.SLONG(f+4*o+4);break;default:continue}p=1==l?m[0]:m,c.hasOwnProperty(a)&&"object"!=(void 0===p?"undefined":r()(p))?g[a]=c[a][p]:g[a]=p}return g}function o(){var t=d.tiffHeader;return s.II(18761==s.SHORT(t)),42===s.SHORT(t+=2)&&(d.IFD0=d.tiffHeader+s.LONG(t+=2),l=i(d.IFD0,u.tiff),"ExifIFDPointer"in l&&(d.exifIFD=d.tiffHeader+l.ExifIFDPointer,delete l.ExifIFDPointer),"GPSInfoIFDPointer"in l&&(d.gpsIFD=d.tiffHeader+l.GPSInfoIFDPointer,delete l.GPSInfoIFDPointer),!0)}function a(t,e,n){var i,r,o,a=0;if("string"==typeof e){var l=u[t.toLowerCase()];for(var c in l)if(l[c]===e){e=c;break}}i=d[t.toLowerCase()+"IFD"],r=s.SHORT(i);for(var f=0;f<r;f++)if(o=i+12*f+2,s.SHORT(o)==e){a=o+8;break}return!!a&&(s.LONG(a,n),!0)}var s,u,l,c,d={};return s=new n,u={tiff:{274:"Orientation",270:"ImageDescription",271:"Make",272:"Model",305:"Software",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"}},c={ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire.",1:"Flash fired.",5:"Strobe return light not detected.",7:"Strobe return light detected.",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}},{init:function(t){return d={tiffHeader:10},!(t===e||!t.length)&&(s.init(t),65505===s.SHORT(0)&&"EXIF\0"===s.STRING(4,5).toUpperCase()&&o())},TIFF:function(){return l},EXIF:function(){var e;if(e=i(d.exifIFD,u.exif),e.ExifVersion&&"array"===t.typeOf(e.ExifVersion)){for(var n=0,r="";n<e.ExifVersion.length;n++)r+=String.fromCharCode(e.ExifVersion[n]);e.ExifVersion=r}return e},GPS:function(){var e;return e=i(d.gpsIFD,u.gps),e.GPSVersionID&&"array"===t.typeOf(e.GPSVersionID)&&(e.GPSVersionID=e.GPSVersionID.join(".")),e},setExif:function(t,e){return("PixelXDimension"===t||"PixelYDimension"===t)&&a("exif",t,e)},getBinary:function(){return s.SEGMENT()},purge:function(){s.init(null),s=l=null,d={}}}}}),i("moxie/runtime/html5/image/JPEG",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/html5/image/JPEGHeaders","moxie/runtime/html5/utils/BinaryReader","moxie/runtime/html5/image/ExifParser"],function(t,e,n,i,r){function o(o){function a(){for(var t,e,n=0;n<=u.length;){if((t=l.SHORT(n+=2))>=65472&&t<=65475)return n+=5,{height:l.SHORT(n),width:l.SHORT(n+=2)};e=l.SHORT(n+=2),n+=e-2}return null}function s(){d&&c&&l&&(d.purge(),c.purge(),l.init(null),u=f=c=d=l=null)}var u,l,c,d,f,p;if(u=o,l=new i,l.init(u),65496!==l.SHORT(0))throw new e.ImageError(e.ImageError.WRONG_FORMAT);c=new n(o),d=new r,p=!!d.init(c.get("app1")[0]),f=a.call(this),t.extend(this,{type:"image/jpeg",size:u.length,width:f&&f.width||0,height:f&&f.height||0,setExif:function(e,n){if(!p)return!1;"object"===t.typeOf(e)?t.each(e,function(t,e){d.setExif(e,t)}):d.setExif(e,n),c.set("app1",d.getBinary())},writeHeaders:function(){return arguments.length?c.restore(arguments[0]):u=c.restore(u)},stripHeaders:function(t){return c.strip(t)},purge:function(){s.call(this)}}),p&&(this.meta={tiff:d.TIFF(),exif:d.EXIF(),gps:d.GPS()})}return o}),i("moxie/runtime/html5/image/PNG",["moxie/core/Exceptions","moxie/core/utils/Basic","moxie/runtime/html5/utils/BinaryReader"],function(t,e,n){function i(i){function r(){var t,e;return t=a.call(this,8),"IHDR"==t.type?(e=t.start,{width:u.LONG(e),height:u.LONG(e+=4)}):null}function o(){u&&(u.init(null),s=d=l=c=u=null)}function a(t){var e,n,i,r;return e=u.LONG(t),n=u.STRING(t+=4,4),i=t+=4,r=u.LONG(t+e),{length:e,type:n,start:i,CRC:r}}var s,u,l,c,d;s=i,u=new n,u.init(s),function(){var e=0,n=0,i=[35152,20039,3338,6666];for(n=0;n<i.length;n++,e+=2)if(i[n]!=u.SHORT(e))throw new t.ImageError(t.ImageError.WRONG_FORMAT)}(),d=r.call(this),e.extend(this,{type:"image/png",size:s.length,width:d.width,height:d.height,purge:function(){o.call(this)}}),o.call(this)}return i}),i("moxie/runtime/html5/image/ImageInfo",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/html5/image/JPEG","moxie/runtime/html5/image/PNG"],function(t,e,n,i){return function(r){var o,a=[n,i];o=function(){for(var t=0;t<a.length;t++)try{return new a[t](r)}catch(t){}throw new e.ImageError(e.ImageError.WRONG_FORMAT)}(),t.extend(this,{type:"",size:0,width:0,height:0,setExif:function(){},writeHeaders:function(t){return t},stripHeaders:function(t){return t},purge:function(){}}),t.extend(this,o),this.purge=function(){o.purge(),o=null}}}),i("moxie/runtime/html5/image/MegaPixel",[],function(){function t(t,i,r){var o=t.naturalWidth,a=t.naturalHeight,s=r.width,u=r.height,l=r.x||0,c=r.y||0,d=i.getContext("2d");e(t)&&(o/=2,a/=2);var f=1024,p=document.createElement("canvas");p.width=p.height=f;for(var h=p.getContext("2d"),m=n(t,o,a),g=0;g<a;){for(var v=g+f>a?a-g:f,_=0;_<o;){var y=_+f>o?o-_:f;h.clearRect(0,0,f,f),h.drawImage(t,-_,-g);var w=_*s/o+l<<0,b=Math.ceil(y*s/o),x=g*u/a/m+c<<0,E=Math.ceil(v*u/a/m);d.drawImage(p,0,0,y,v,w,x,b,E),_+=f}g+=f}p=h=null}function e(t){var e=t.naturalWidth;if(e*t.naturalHeight>1048576){var n=document.createElement("canvas");n.width=n.height=1;var i=n.getContext("2d");return i.drawImage(t,1-e,0),0===i.getImageData(0,0,1,1).data[3]}return!1}function n(t,e,n){var i=document.createElement("canvas");i.width=1,i.height=n;var r=i.getContext("2d");r.drawImage(t,0,0);for(var o=r.getImageData(0,0,1,n).data,a=0,s=n,u=n;u>a;){0===o[4*(u-1)+3]?s=u:a=u,u=s+a>>1}i=null;var l=u/n;return 0===l?1:l}return{isSubsampled:e,renderTo:t}}),i("moxie/runtime/html5/image/Image",["moxie/runtime/html5/Runtime","moxie/core/utils/Basic","moxie/core/Exceptions","moxie/core/utils/Encode","moxie/file/File","moxie/runtime/html5/image/ImageInfo","moxie/runtime/html5/image/MegaPixel","moxie/core/utils/Mime","moxie/core/utils/Env"],function(t,e,n,i,r,o,a,s,u){function l(){function t(){if(!y&&!v)throw new n.ImageError(n.DOMException.INVALID_STATE_ERR);return y||v}function l(t){return i.atob(t.substring(t.indexOf("base64,")+7))}function c(t,e){return"data:"+(e||"")+";base64,"+i.btoa(t)}function d(t){var e=this;v=new Image,v.onerror=function(){g.call(this),e.trigger("error",n.ImageError.WRONG_FORMAT)},v.onload=function(){e.trigger("load")},v.src=/^data:[^;]*;base64,/.test(t)?t:c(t,b.type)}function f(t,e){var i,r=this;if(!window.FileReader)return e(t.getAsDataURL());i=new FileReader,i.onload=function(){e(this.result)},i.onerror=function(){r.trigger("error",n.ImageError.WRONG_FORMAT)},i.readAsDataURL(t)}function p(n,i,r,o){var a,s,u,l,c,d=this,f=0,p=0;if(C=o,c=this.meta&&this.meta.tiff&&this.meta.tiff.Orientation||1,-1!==e.inArray(c,[5,6,7,8])){var g=n;n=i,i=g}if(s=t(),r?(n=Math.min(n,s.width),i=Math.min(i,s.height),a=Math.max(n/s.width,i/s.height)):a=Math.min(n/s.width,i/s.height),a>1&&!r&&o)return void this.trigger("Resize");y||(y=document.createElement("canvas")),u=Math.round(s.width*a),l=Math.round(s.height*a),r?(y.width=n,y.height=i,u>n&&(f=Math.round((u-n)/2)),l>i&&(p=Math.round((l-i)/2))):(y.width=u,y.height=l),C||m(y.width,y.height,c),h.call(this,s,y,-f,-p,u,l),this.width=y.width,this.height=y.height,E=!0,d.trigger("Resize")}function h(t,e,n,i,r,o){if("iOS"===u.OS)a.renderTo(t,e,{width:r,height:o,x:n,y:i});else{e.getContext("2d").drawImage(t,n,i,r,o)}}function m(t,e,n){switch(n){case 5:case 6:case 7:case 8:y.width=e,y.height=t;break;default:y.width=t,y.height=e}var i=y.getContext("2d");switch(n){case 2:i.translate(t,0),i.scale(-1,1);break;case 3:i.translate(t,e),i.rotate(Math.PI);break;case 4:i.translate(0,e),i.scale(1,-1);break;case 5:i.rotate(.5*Math.PI),i.scale(1,-1);break;case 6:i.rotate(.5*Math.PI),i.translate(0,-e);break;case 7:i.rotate(.5*Math.PI),i.translate(t,-e),i.scale(-1,1);break;case 8:i.rotate(-.5*Math.PI),i.translate(-t,0)}}function g(){_&&(_.purge(),_=null),w=v=y=b=null,E=!1}var v,_,y,w,b,x=this,E=!1,C=!0;e.extend(this,{loadFromBlob:function(t){var e=this,i=e.getRuntime(),r=!(arguments.length>1)||arguments[1];if(!i.can("access_binary"))throw new n.RuntimeError(n.RuntimeError.NOT_SUPPORTED_ERR);if(b=t,t.isDetached())return w=t.getSource(),void d.call(this,w);f.call(this,t.getSource(),function(t){r&&(w=l(t)),d.call(e,t)})},loadFromImage:function(t,e){this.meta=t.meta,b=new r(null,{name:t.name,size:t.size,type:t.type}),d.call(this,e?w=t.getAsBinaryString():t.getAsDataURL())},getInfo:function(){var e=this.getRuntime();return!_&&w&&e.can("access_image_binary")&&(_=new o(w)),{width:t().width||0,height:t().height||0,type:b.type||s.getFileMime(b.name),size:w&&w.length||b.size||0,name:b.name||"",meta:_&&_.meta||this.meta||{}}},downsize:function(){p.apply(this,arguments)},getAsCanvas:function(){return y&&(y.id=this.uid+"_canvas"),y},getAsBlob:function(t,e){return t!==this.type&&p.call(this,this.width,this.height,!1),new r(null,{name:b.name||"",type:t,data:x.getAsBinaryString.call(this,t,e)})},getAsDataURL:function(t){var e=arguments[1]||90;if(!E)return v.src;if("image/jpeg"!==t)return y.toDataURL("image/png");try{return y.toDataURL("image/jpeg",e/100)}catch(t){return y.toDataURL("image/jpeg")}},getAsBinaryString:function(t,e){if(!E)return w||(w=l(x.getAsDataURL(t,e))),w;if("image/jpeg"!==t)w=l(x.getAsDataURL(t,e));else{var n;e||(e=90);try{n=y.toDataURL("image/jpeg",e/100)}catch(t){n=y.toDataURL("image/jpeg")}w=l(n),_&&(w=_.stripHeaders(w),C&&(_.meta&&_.meta.exif&&_.setExif({PixelXDimension:this.width,PixelYDimension:this.height}),w=_.writeHeaders(w)),_.purge(),_=null)}return E=!1,w},destroy:function(){x=null,g.call(this),this.getRuntime().getShim().removeInstance(this.uid)}})}return t.Image=l}),i("moxie/runtime/flash/Runtime",["moxie/core/utils/Basic","moxie/core/utils/Env","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/runtime/Runtime"],function(t,e,n,i,r){function o(){var t;try{t=navigator.plugins["Shockwave Flash"],t=t.description}catch(e){try{t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(e){t="0.0"}}return t=t.match(/\d+/g),parseFloat(t[0]+"."+t[1])}function a(a){var l,c=this;a=t.extend({swf_url:e.swf_url},a),r.call(this,a,s,{access_binary:function(t){return t&&"browser"===c.mode},access_image_binary:function(t){return t&&"browser"===c.mode},display_media:r.capTrue,do_cors:r.capTrue,drag_and_drop:!1,report_upload_progress:function(){return"client"===c.mode},resize_image:r.capTrue,return_response_headers:!1,return_response_type:function(e){return!("json"!==e||!window.JSON)||(!t.arrayDiff(e,["","text","document"])||"browser"===c.mode)},return_status_code:function(e){return"browser"===c.mode||!t.arrayDiff(e,[200,404])},select_file:r.capTrue,select_multiple:r.capTrue,send_binary_string:function(t){return t&&"browser"===c.mode},send_browser_cookies:function(t){return t&&"browser"===c.mode},send_custom_headers:function(t){return t&&"browser"===c.mode},send_multipart:r.capTrue,slice_blob:function(t){return t&&"browser"===c.mode},stream_upload:function(t){return t&&"browser"===c.mode},summon_file_dialog:!1,upload_filesize:function(e){return t.parseSizeStr(e)<=2097152||"client"===c.mode},use_http_method:function(e){return!t.arrayDiff(e,["GET","POST"])}},{access_binary:function(t){return t?"browser":"client"},access_image_binary:function(t){return t?"browser":"client"},report_upload_progress:function(t){return t?"browser":"client"},return_response_type:function(e){return t.arrayDiff(e,["","text","json","document"])?"browser":["client","browser"]},return_status_code:function(e){return t.arrayDiff(e,[200,404])?"browser":["client","browser"]},send_binary_string:function(t){return t?"browser":"client"},send_browser_cookies:function(t){return t?"browser":"client"},send_custom_headers:function(t){return t?"browser":"client"},stream_upload:function(t){return t?"client":"browser"},upload_filesize:function(e){return t.parseSizeStr(e)>=2097152?"client":"browser"}},"client"),o()<10&&(this.mode=!1),t.extend(this,{getShim:function(){return n.get(this.uid)},shimExec:function(t,e){var n=[].slice.call(arguments,2);return c.getShim().exec(this.uid,t,e,n)},init:function(){var n,r,o;o=this.getShimContainer(),t.extend(o.style,{position:"absolute",top:"-8px",left:"-8px",width:"9px",height:"9px",overflow:"hidden"}),n='<object id="'+this.uid+'" type="application/x-shockwave-flash" data="'+a.swf_url+'" ',"IE"===e.browser&&(n+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '),n+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+a.swf_url+'" /><param name="flashvars" value="uid='+escape(this.uid)+"&target="+e.global_event_dispatcher+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>',"IE"===e.browser?(r=document.createElement("div"),o.appendChild(r),r.outerHTML=n,r=o=null):o.innerHTML=n,l=setTimeout(function(){c&&!c.initialized&&c.trigger("Error",new i.RuntimeError(i.RuntimeError.NOT_INIT_ERR))},5e3)},destroy:function(t){return function(){t.call(c),clearTimeout(l),a=l=t=c=null}}(this.destroy)},u)}var s="flash",u={};return r.addConstructor(s,a),u}),i("moxie/runtime/flash/file/Blob",["moxie/runtime/flash/Runtime","moxie/file/Blob"],function(t,e){var n={slice:function(t,n,i,r){var o=this.getRuntime();return n<0?n=Math.max(t.size+n,0):n>0&&(n=Math.min(n,t.size)),i<0?i=Math.max(t.size+i,0):i>0&&(i=Math.min(i,t.size)),t=o.shimExec.call(this,"Blob","slice",n,i,r||""),t&&(t=new e(o.uid,t)),t}};return t.Blob=n}),i("moxie/runtime/flash/file/FileInput",["moxie/runtime/flash/Runtime"],function(t){var e={init:function(t){this.getRuntime().shimExec.call(this,"FileInput","init",{name:t.name,accept:t.accept,multiple:t.multiple}),this.trigger("ready")}};return t.FileInput=e}),i("moxie/runtime/flash/file/FileReader",["moxie/runtime/flash/Runtime","moxie/core/utils/Encode"],function(t,e){function n(t,n){switch(n){case"readAsText":return e.atob(t,"utf8");case"readAsBinaryString":return e.atob(t);case"readAsDataURL":return t}return null}var i="",r={read:function(t,e){var r=this,o=r.getRuntime();return"readAsDataURL"===t&&(i="data:"+(e.type||"")+";base64,"),r.bind("Progress",function(e,r){r&&(i+=n(r,t))}),o.shimExec.call(this,"FileReader","readAsBase64",e.uid)},getResult:function(){return i},destroy:function(){i=null}};return t.FileReader=r}),i("moxie/runtime/flash/file/FileReaderSync",["moxie/runtime/flash/Runtime","moxie/core/utils/Encode"],function(t,e){function n(t,n){switch(n){case"readAsText":return e.atob(t,"utf8");case"readAsBinaryString":return e.atob(t);case"readAsDataURL":return t}return null}var i={read:function(t,e){var i;return(i=this.getRuntime().shimExec.call(this,"FileReaderSync","readAsBase64",e.uid))?("readAsDataURL"===t&&(i="data:"+(e.type||"")+";base64,"+i),n(i,t,e.type)):null}};return t.FileReaderSync=i}),i("moxie/runtime/flash/xhr/XMLHttpRequest",["moxie/runtime/flash/Runtime","moxie/core/utils/Basic","moxie/file/Blob","moxie/file/File","moxie/file/FileReaderSync","moxie/xhr/FormData","moxie/runtime/Transporter"],function(t,e,n,i,r,o,a){var s={send:function(t,i){function r(){t.transport=c.mode,c.shimExec.call(l,"XMLHttpRequest","send",t,i)}function s(t,e){c.shimExec.call(l,"XMLHttpRequest","appendBlob",t,e.uid),i=null,r()}function u(t,e){var n=new a;n.bind("TransportingComplete",function(){e(this.result)}),n.transport(t.getSource(),t.type,{ruid:c.uid})}var l=this,c=l.getRuntime();if(e.isEmptyObj(t.headers)||e.each(t.headers,function(t,e){c.shimExec.call(l,"XMLHttpRequest","setRequestHeader",e,t.toString())}),i instanceof o){var d;if(i.each(function(t,e){t instanceof n?d=e:c.shimExec.call(l,"XMLHttpRequest","append",e,t)}),i.hasBlob()){var f=i.getBlob();f.isDetached()?u(f,function(t){f.destroy(),s(d,t)}):s(d,f)}else i=null,r()}else i instanceof n?i.isDetached()?u(i,function(t){i.destroy(),i=t.uid,r()}):(i=i.uid,r()):r()},getResponse:function(t){var n,o,a=this.getRuntime();if(o=a.shimExec.call(this,"XMLHttpRequest","getResponseAsBlob")){if(o=new i(a.uid,o),"blob"===t)return o;try{if(n=new r,~e.inArray(t,["","text"]))return n.readAsText(o);if("json"===t&&window.JSON)return JSON.parse(n.readAsText(o))}finally{o.destroy()}}return null},abort:function(t){this.getRuntime().shimExec.call(this,"XMLHttpRequest","abort"),this.dispatchEvent("readystatechange"),this.dispatchEvent("abort")}};return t.XMLHttpRequest=s}),i("moxie/runtime/flash/runtime/Transporter",["moxie/runtime/flash/Runtime","moxie/file/Blob"],function(t,e){var n={getAsBlob:function(t){var n=this.getRuntime(),i=n.shimExec.call(this,"Transporter","getAsBlob",t);return i?new e(n.uid,i):null}};return t.Transporter=n}),i("moxie/runtime/flash/image/Image",["moxie/runtime/flash/Runtime","moxie/core/utils/Basic","moxie/runtime/Transporter","moxie/file/Blob","moxie/file/FileReaderSync"],function(t,e,n,i,r){var o={loadFromBlob:function(t){function e(t){r.shimExec.call(i,"Image","loadFromBlob",t.uid),i=r=null}var i=this,r=i.getRuntime();if(t.isDetached()){var o=new n;o.bind("TransportingComplete",function(){e(o.result.getSource())}),o.transport(t.getSource(),t.type,{ruid:r.uid})}else e(t.getSource())},loadFromImage:function(t){return this.getRuntime().shimExec.call(this,"Image","loadFromImage",t.uid)},getAsBlob:function(t,e){var n=this.getRuntime(),r=n.shimExec.call(this,"Image","getAsBlob",t,e);return r?new i(n.uid,r):null},getAsDataURL:function(){var t,e=this.getRuntime(),n=e.Image.getAsBlob.apply(this,arguments);return n?(t=new r,t.readAsDataURL(n)):null}};return t.Image=o}),i("moxie/runtime/silverlight/Runtime",["moxie/core/utils/Basic","moxie/core/utils/Env","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/runtime/Runtime"],function(t,e,n,i,r){function o(t){var e,n,i,r,o,a=!1,s=null,u=0;try{try{s=new ActiveXObject("AgControl.AgControl"),s.IsVersionSupported(t)&&(a=!0),s=null}catch(s){var l=navigator.plugins["Silverlight Plug-In"];if(l){for(e=l.description,"1.0.30226.2"===e&&(e="2.0.30226.2"),n=e.split(".");n.length>3;)n.pop();for(;n.length<4;)n.push(0);for(i=t.split(".");i.length>4;)i.pop();do{r=parseInt(i[u],10),o=parseInt(n[u],10),u++}while(u<i.length&&r===o);r<=o&&!isNaN(r)&&(a=!0)}}}catch(t){a=!1}return a}function a(a){var l,c=this;a=t.extend({xap_url:e.xap_url},a),r.call(this,a,s,{access_binary:r.capTrue,access_image_binary:r.capTrue,display_media:r.capTrue,do_cors:r.capTrue,drag_and_drop:!1,report_upload_progress:r.capTrue,resize_image:r.capTrue,return_response_headers:function(t){return t&&"client"===c.mode},return_response_type:function(t){return"json"!==t||!!window.JSON},return_status_code:function(e){return"client"===c.mode||!t.arrayDiff(e,[200,404])},select_file:r.capTrue,select_multiple:r.capTrue,send_binary_string:r.capTrue,send_browser_cookies:function(t){return t&&"browser"===c.mode},send_custom_headers:function(t){return t&&"client"===c.mode},send_multipart:r.capTrue,slice_blob:r.capTrue,stream_upload:!0,summon_file_dialog:!1,upload_filesize:r.capTrue,use_http_method:function(e){return"client"===c.mode||!t.arrayDiff(e,["GET","POST"])}},{return_response_headers:function(t){return t?"client":"browser"},return_status_code:function(e){return t.arrayDiff(e,[200,404])?"client":["client","browser"]},send_browser_cookies:function(t){return t?"browser":"client"},send_custom_headers:function(t){return t?"client":"browser"},use_http_method:function(e){return t.arrayDiff(e,["GET","POST"])?"client":["client","browser"]}}),o("2.0.31005.0")&&"Opera"!==e.browser||(this.mode=!1),t.extend(this,{getShim:function(){return n.get(this.uid).content.Moxie},shimExec:function(t,e){var n=[].slice.call(arguments,2);return c.getShim().exec(this.uid,t,e,n)},init:function(){var t;t=this.getShimContainer(),t.innerHTML='<object id="'+this.uid+'" data="data:application/x-silverlight," type="application/x-silverlight-2" width="100%" height="100%" style="outline:none;"><param name="source" value="'+a.xap_url+'"/><param name="background" value="Transparent"/><param name="windowless" value="true"/><param name="enablehtmlaccess" value="true"/><param name="initParams" value="uid='+this.uid+",target="+e.global_event_dispatcher+'"/></object>',l=setTimeout(function(){c&&!c.initialized&&c.trigger("Error",new i.RuntimeError(i.RuntimeError.NOT_INIT_ERR))},"Windows"!==e.OS?1e4:5e3)},destroy:function(t){return function(){t.call(c),clearTimeout(l),a=l=t=c=null}}(this.destroy)},u)}var s="silverlight",u={};return r.addConstructor(s,a),u}),i("moxie/runtime/silverlight/file/Blob",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/file/Blob"],function(t,e,n){return t.Blob=e.extend({},n)}),i("moxie/runtime/silverlight/file/FileInput",["moxie/runtime/silverlight/Runtime"],function(t){var e={init:function(t){this.getRuntime().shimExec.call(this,"FileInput","init",function(t){for(var e="",n=0;n<t.length;n++)e+=(""!==e?"|":"")+t[n].title+" | *."+t[n].extensions.replace(/,/g,";*.");return e}(t.accept),t.name,t.multiple),this.trigger("ready")}};return t.FileInput=e}),i("moxie/runtime/silverlight/file/FileDrop",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Dom","moxie/core/utils/Events"],function(t,e,n){var i={init:function(){var t,i=this,r=i.getRuntime();return t=r.getShimContainer(),n.addEvent(t,"dragover",function(t){t.preventDefault(),t.stopPropagation(),t.dataTransfer.dropEffect="copy"},i.uid),n.addEvent(t,"dragenter",function(t){t.preventDefault(),e.get(r.uid).dragEnter(t)&&t.stopPropagation()},i.uid),n.addEvent(t,"drop",function(t){t.preventDefault(),e.get(r.uid).dragDrop(t)&&t.stopPropagation()},i.uid),r.shimExec.call(this,"FileDrop","init")}};return t.FileDrop=i}),i("moxie/runtime/silverlight/file/FileReader",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/file/FileReader"],function(t,e,n){return t.FileReader=e.extend({},n)}),i("moxie/runtime/silverlight/file/FileReaderSync",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/file/FileReaderSync"],function(t,e,n){return t.FileReaderSync=e.extend({},n)}),i("moxie/runtime/silverlight/xhr/XMLHttpRequest",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/xhr/XMLHttpRequest"],function(t,e,n){return t.XMLHttpRequest=e.extend({},n)}),i("moxie/runtime/silverlight/runtime/Transporter",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/runtime/Transporter"],function(t,e,n){return t.Transporter=e.extend({},n)}),i("moxie/runtime/silverlight/image/Image",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/image/Image"],function(t,e,n){return t.Image=e.extend({},n,{getInfo:function(){var t=this.getRuntime(),n=["tiff","exif","gps"],i={meta:{}},r=t.shimExec.call(this,"Image","getInfo");return r.meta&&e.each(n,function(t){var e,n,o,a,s=r.meta[t];if(s&&s.keys)for(i.meta[t]={},n=0,o=s.keys.length;n<o;n++)e=s.keys[n],(a=s[e])&&(/^(\d|[1-9]\d+)$/.test(a)?a=parseInt(a,10):/^\d*\.\d+$/.test(a)&&(a=parseFloat(a)),i.meta[t][e]=a)}),i.width=parseInt(r.width,10),i.height=parseInt(r.height,10),i.size=parseInt(r.size,10),i.type=r.type,i.name=r.name,i}})}),i("moxie/runtime/html4/Runtime",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/Runtime","moxie/core/utils/Env"],function(t,e,n,i){function r(e){var r=this,s=n.capTest,u=n.capTrue;n.call(this,e,o,{access_binary:s(window.FileReader||window.File&&File.getAsDataURL),access_image_binary:!1,display_media:s(a.Image&&(i.can("create_canvas")||i.can("use_data_uri_over32kb"))),do_cors:!1,drag_and_drop:!1,filter_by_extension:s(function(){return"Chrome"===i.browser&&i.version>=28||"IE"===i.browser&&i.version>=10}()),resize_image:function(){return a.Image&&r.can("access_binary")&&i.can("create_canvas")},report_upload_progress:!1,return_response_headers:!1,return_response_type:function(e){return!("json"!==e||!window.JSON)||!!~t.inArray(e,["text","document",""])},return_status_code:function(e){return!t.arrayDiff(e,[200,404])},select_file:function(){return i.can("use_fileinput")},select_multiple:!1,send_binary_string:!1,send_custom_headers:!1,send_multipart:!0,slice_blob:!1,stream_upload:function(){return r.can("select_file")},summon_file_dialog:s(function(){return"Firefox"===i.browser&&i.version>=4||"Opera"===i.browser&&i.version>=12||!!~t.inArray(i.browser,["Chrome","Safari"])}()),upload_filesize:u,use_http_method:function(e){return!t.arrayDiff(e,["GET","POST"])}}),t.extend(this,{init:function(){this.trigger("Init")},destroy:function(t){return function(){t.call(r),t=r=null}}(this.destroy)}),t.extend(this.getShim(),a)}var o="html4",a={};return n.addConstructor(o,r),a}),i("moxie/runtime/html4/file/FileInput",["moxie/runtime/html4/Runtime","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/utils/Events","moxie/core/utils/Mime","moxie/core/utils/Env"],function(t,e,n,i,r,o){function a(){function t(){var r,c,d,f,p,h,m=this,g=m.getRuntime();h=e.guid("uid_"),r=g.getShimContainer(),a&&(d=n.get(a+"_form"))&&e.extend(d.style,{top:"100%"}),f=document.createElement("form"),f.setAttribute("id",h+"_form"),f.setAttribute("method","post"),f.setAttribute("enctype","multipart/form-data"),f.setAttribute("encoding","multipart/form-data"),e.extend(f.style,{overflow:"hidden",position:"absolute",top:0,left:0,width:"100%",height:"100%"}),p=document.createElement("input"),p.setAttribute("id",h),p.setAttribute("type","file"),p.setAttribute("name",s.name||"Filedata"),p.setAttribute("accept",l.join(",")),e.extend(p.style,{fontSize:"999px",opacity:0}),f.appendChild(p),r.appendChild(f),e.extend(p.style,{position:"absolute",top:0,left:0,width:"100%",height:"100%"}),"IE"===o.browser&&o.version<10&&e.extend(p.style,{filter:"progid:DXImageTransform.Microsoft.Alpha(opacity=0)"}),p.onchange=function(){var e;this.value&&(e=this.files?this.files[0]:{name:this.value},u=[e],this.onchange=function(){},t.call(m),m.bind("change",function t(){var e,i=n.get(h),r=n.get(h+"_form");m.unbind("change",t),m.files.length&&i&&r&&(e=m.files[0],i.setAttribute("id",e.uid),r.setAttribute("id",e.uid+"_form"),r.setAttribute("target",e.uid+"_iframe")),i=r=null},998),p=f=null,m.trigger("change"))},g.can("summon_file_dialog")&&(c=n.get(s.browse_button),i.removeEvent(c,"click",m.uid),i.addEvent(c,"click",function(t){p&&!p.disabled&&p.click(),t.preventDefault()},m.uid)),a=h,r=d=c=null}var a,s,u=[],l=[];e.extend(this,{init:function(e){var o,a=this,u=a.getRuntime();s=e,l=e.accept.mimes||r.extList2mimes(e.accept,u.can("filter_by_extension")),o=u.getShimContainer(),function(){var t,r,s;t=n.get(e.browse_button),u.can("summon_file_dialog")&&("static"===n.getStyle(t,"position")&&(t.style.position="relative"),r=parseInt(n.getStyle(t,"z-index"),10)||1,t.style.zIndex=r,o.style.zIndex=r-1),s=u.can("summon_file_dialog")?t:o,i.addEvent(s,"mouseover",function(){a.trigger("mouseenter")},a.uid),i.addEvent(s,"mouseout",function(){a.trigger("mouseleave")},a.uid),i.addEvent(s,"mousedown",function(){a.trigger("mousedown")},a.uid),i.addEvent(n.get(e.container),"mouseup",function(){a.trigger("mouseup")},a.uid),t=null}(),t.call(this),o=null,a.trigger({type:"ready",async:!0})},getFiles:function(){return u},disable:function(t){var e;(e=n.get(a))&&(e.disabled=!!t)},destroy:function(){var t=this.getRuntime(),e=t.getShim(),r=t.getShimContainer();i.removeAllEvents(r,this.uid),i.removeAllEvents(s&&n.get(s.container),this.uid),i.removeAllEvents(s&&n.get(s.browse_button),this.uid),r&&(r.innerHTML=""),e.removeInstance(this.uid),a=u=l=s=r=e=null}})}return t.FileInput=a}),i("moxie/runtime/html4/file/FileReader",["moxie/runtime/html4/Runtime","moxie/runtime/html5/file/FileReader"],function(t,e){return t.FileReader=e}),i("moxie/runtime/html4/xhr/XMLHttpRequest",["moxie/runtime/html4/Runtime","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/utils/Url","moxie/core/Exceptions","moxie/core/utils/Events","moxie/file/Blob","moxie/xhr/FormData"],function(t,e,n,i,r,o,a,s){function u(){function t(t){var e,i,r,a,s=this,u=!1;if(c){if(e=c.id.replace(/_iframe$/,""),i=n.get(e+"_form")){for(r=i.getElementsByTagName("input"),a=r.length;a--;)switch(r[a].getAttribute("type")){case"hidden":r[a].parentNode.removeChild(r[a]);break;case"file":u=!0}r=[],u||i.parentNode.removeChild(i),i=null}setTimeout(function(){o.removeEvent(c,"load",s.uid),c.parentNode&&c.parentNode.removeChild(c);var e=s.getRuntime().getShimContainer();e.children.length||e.parentNode.removeChild(e),e=c=null,t()},1)}}var u,l,c;e.extend(this,{send:function(d,f){var p,h,m,g,v=this,_=v.getRuntime();if(u=l=null,f instanceof s&&f.hasBlob()){if(g=f.getBlob(),p=g.uid,m=n.get(p),!(h=n.get(p+"_form")))throw new r.DOMException(r.DOMException.NOT_FOUND_ERR)}else p=e.guid("uid_"),h=document.createElement("form"),h.setAttribute("id",p+"_form"),h.setAttribute("method",d.method),h.setAttribute("enctype","multipart/form-data"),h.setAttribute("encoding","multipart/form-data"),h.setAttribute("target",p+"_iframe"),_.getShimContainer().appendChild(h);f instanceof s&&f.each(function(t,n){if(t instanceof a)m&&m.setAttribute("name",n);else{var i=document.createElement("input");e.extend(i,{type:"hidden",name:n,value:t}),m?h.insertBefore(i,m):h.appendChild(i)}}),h.setAttribute("action",d.url),function(){var n=_.getShimContainer()||document.body,r=document.createElement("div");r.innerHTML='<iframe id="'+p+'_iframe" name="'+p+'_iframe" src="javascript:&quot;&quot;" style="display:none"></iframe>',c=r.firstChild,n.appendChild(c),o.addEvent(c,"load",function(){var n;try{n=c.contentWindow.document||c.contentDocument||window.frames[c.id].document,/^4(0[0-9]|1[0-7]|2[2346])\s/.test(n.title)?u=n.title.replace(/^(\d+).*$/,"$1"):(u=200,l=e.trim(n.body.innerHTML),v.trigger({type:"progress",loaded:l.length,total:l.length}),g&&v.trigger({type:"uploadprogress",loaded:g.size||1025,total:g.size||1025}))}catch(e){if(!i.hasSameOrigin(d.url))return void t.call(v,function(){v.trigger("error")});u=404}t.call(v,function(){v.trigger("load")})},v.uid)}(),h.submit(),v.trigger("loadstart")},getStatus:function(){return u},getResponse:function(t){if("json"===t&&"string"===e.typeOf(l)&&window.JSON)try{return JSON.parse(l.replace(/^\s*<pre[^>]*>/,"").replace(/<\/pre>\s*$/,""))}catch(t){return null}return l},abort:function(){var e=this;c&&c.contentWindow&&(c.contentWindow.stop?c.contentWindow.stop():c.contentWindow.document.execCommand?c.contentWindow.document.execCommand("Stop"):c.src="about:blank"),t.call(this,function(){e.dispatchEvent("abort")})}})}return t.XMLHttpRequest=u}),i("moxie/runtime/html4/image/Image",["moxie/runtime/html4/Runtime","moxie/runtime/html5/image/Image"],function(t,e){return t.Image=e}),function(n){for(var i=0;i<n.length;i++){for(var r=t,o=n[i],s=o.split(/[.\/]/),u=0;u<s.length-1;++u)r[s[u]]===e&&(r[s[u]]={}),r=r[s[u]];r[s[s.length-1]]=a[o]}}(["moxie/core/utils/Basic","moxie/core/I18n","moxie/core/utils/Mime","moxie/core/utils/Env","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/core/EventTarget","moxie/core/utils/Encode","moxie/runtime/Runtime","moxie/runtime/RuntimeClient","moxie/file/Blob","moxie/file/File","moxie/file/FileInput","moxie/file/FileDrop","moxie/runtime/RuntimeTarget","moxie/file/FileReader","moxie/core/utils/Url","moxie/file/FileReaderSync","moxie/xhr/FormData","moxie/xhr/XMLHttpRequest","moxie/runtime/Transporter","moxie/image/Image","moxie/core/utils/Events"])}(window),function(t){var e={},n=t.moxie.core.utils.Basic.inArray;(function t(i){var o,a;for(o in i)a=r()(i[o]),"object"!==a||~n(o,["Exceptions","Env","Mime"])?"function"===a&&(e[o]=i[o]):t(i[o])})(t.moxie),e.Env=t.moxie.core.utils.Env,e.Mime=t.moxie.core.utils.Mime,e.Exceptions=t.moxie.core.Exceptions,t.mOxie=e,t.o||(t.o=e)}(window),e.a=window.mOxie},3131:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._t("default"),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:0===t.uploading,expression:"uploading===0"}],staticClass:"weui-uploader__input-box",staticStyle:{float:"none"},attrs:{id:"container"}},[n("span",{staticClass:"weui-uploader__input",attrs:{id:"pickfiles"}})])],2)},r=[];i._withStripped=!0;var o={render:i,staticRenderFns:r};e.a=o},3132:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"padder-sm"},[n("div",{staticClass:"box box-query mb-3"},[n("Row",[n("Col",{attrs:{span:"24"}},[n("Button-group",[n("Button",{attrs:{size:"small",type:1===t.source_type?"primary":"ghost",icon:"document-text"},on:{click:function(e){t.change_status(1)}}},[t._v("图文")]),t._v(" "),n("Button",{attrs:{size:"small",type:2===t.source_type?"primary":"ghost",icon:"image"},on:{click:function(e){t.change_status(2)}}},[t._v("图片")]),t._v(" "),n("Button",{attrs:{size:"small",type:3===t.source_type?"primary":"ghost",icon:"mic-a"},on:{click:function(e){t.change_status(3)}}},[t._v("语音")]),t._v(" "),n("Button",{attrs:{size:"small",type:4===t.source_type?"primary":"ghost",icon:"ios-videocam"},on:{click:function(e){t.change_status(4)}}},[t._v("视频")])],1),t._v(" "),n("Button",{staticClass:"ml-3",attrs:{type:"primary",size:"small",icon:"ios-download-outline"},on:{click:t.get_wx_files}},[t._v("同步微信")])],1)],1),t._v(" "),n("Row",{staticClass:"mt-3"},[n("Col",{attrs:{span:"8"}},[n("date-range-picker",{attrs:{label:"更新日期",placement:"bottom",size:"small"},on:{"on-change":t.dateChange},model:{value:t.params.update_time,callback:function(e){t.$set(t.params,"update_time",e)},expression:"params.update_time"}})],1)],1)],1),t._v(" "),n("div",{staticClass:"box box-result"},[n("div",{staticClass:"content"},[n("div",{staticClass:"content-body"},[1===t.source_type?n("waterfall",{attrs:{"line-gap":289,watch:t.news_data}},t._l(t.news_data,function(e,i){return e.items&&e.items.length>0?n("waterfall-slot",{key:e.media_id,staticStyle:{width:"289px"},attrs:{order:i,height:398+103*(e.items.length-1),width:289}},[n("div",{staticClass:"source-card-item"},[n("div",{staticClass:"source-card-content"},[n("div",{staticClass:"source-card-header"},[n("span",{staticClass:"pull-left"},[t._v(t._s(t._f("format_time")(e.update_time)))]),t._v(" "),n("Icon",{staticClass:"pull-right",attrs:{type:"chatbubbles",size:"20",color:"#19be6b"}}),t._v(" "),n("div",{staticStyle:{clear:"both"}})],1),t._v(" "),n("div",{staticClass:"content-img-item"},[n("h4",{staticClass:"card-body-title"},[t._v(t._s(e.items[0].title))]),t._v(" "),n("div",{staticClass:"card-body-image",style:{backgroundImage:"url("+t.format_wx_img(e.items[0].thumb_url)+")"}}),t._v(" "),n("p",{staticClass:"card-body-desc"},[t._v(t._s(e.items[0].digest))]),t._v(" "),n("a",{staticClass:"cover-dark",attrs:{target:"_blank",href:e.items[0].url}},[n("div",{staticClass:"edit-mask-content"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t本地预览\n\t\t\t\t\t\t\t\t\t\t\t\t"),n("Tooltip",[n("span",{attrs:{slot:"content"},slot:"content"},[t._v("这是本地文章，不可以群发，"),n("br"),t._v("可以转换为微信文章")]),t._v(" "),n("Icon",{attrs:{type:"help-circled"}})],1)],1),t._v(" "),n("span",{staticClass:"vm-box"})])]),t._v(" "),t._l(e.items,function(i,r){return e.items.length>1&&r>0?n("div",{key:r,staticClass:"content-article-item"},[n("div",{staticClass:"appmsg-thumb",style:{backgroundImage:"url("+t.format_wx_img(i.thumb_url)+")"}}),t._v(" "),n("span",{staticClass:"card-body-title"},[t._v(t._s(i.title))]),t._v(" "),n("a",{staticClass:"cover-dark",attrs:{target:"_blank",href:i.url}},[n("div",{staticClass:"edit-mask-content"},[n("p",[t._v("预览文章")])]),t._v(" "),n("span",{staticClass:"vm-box"})])]):t._e()})],2),t._v(" "),n("div",{staticClass:"source-card-footer"},[n("ul",[n("li",{staticClass:"footer-icon-item",on:{click:function(n){t.del(e)}}},[n("a",[n("Tooltip",{staticStyle:{display:"block"},attrs:{content:"删除"}},[n("Icon",{attrs:{type:"ios-trash",size:"20"}})],1)],1)])])])])]):t._e()})):t._e(),t._v(" "),2===t.source_type?n("ul",{staticClass:"source-img-list"},t._l(t.image_data,function(e,i){return n("li",{key:i,staticClass:"source-img-item"},[n("div",{staticClass:"source-img-header"},[n("Icon",{staticClass:"pull-right",attrs:{type:"chatbubbles",size:"20",color:"#19be6b"}}),t._v(" "),n("span",{staticClass:"pull-left source-img-title"},[t._v(t._s(e.name))]),t._v(" "),n("div",{staticStyle:{clear:"both"}})],1),t._v(" "),n("div",{staticClass:"source-img-content",on:{click:function(n){t.handleView(t.format_wx_img(e.url))}}},[n("img",{attrs:{src:t.format_wx_img(e.url)}})]),t._v(" "),n("div",{staticClass:"source-img-footer"},[n("ul",[n("li",{staticClass:"footer-icon-item",on:{click:function(n){t.del(e)}}},[n("a",[n("Tooltip",{staticStyle:{display:"block"},attrs:{content:"删除"}},[n("Icon",{attrs:{type:"ios-trash",size:"20"}})],1)],1)])])])])})):t._e(),t._v(" "),3===t.source_type?n("ul",{staticClass:"source-audio-list"},t._l(t.voice_data,function(e,i){return n("li",{key:i,staticClass:"source-audio-item"},[n("div",{staticClass:"source-audio-header"},[n("Icon",{staticClass:"pull-right",attrs:{type:"chatbubbles",size:"20",color:"#19be6b"}}),t._v(" "),n("span",{staticClass:"pull-left source-img-title"},[t._v(t._s(t._f("format_time")(e.update_time)))]),t._v(" "),n("div",{staticStyle:{clear:"both"}})],1),t._v(" "),n("div",{staticClass:"source-audio-content"},[n("div",{staticClass:"audio-icon-wrap"},[n("playVoice",{staticClass:"icon-voice-msg",attrs:{active:t.active_voice===i,src:"http://qms.xiao360.com/api/open/wxvoice?media_id="+e.media_id},nativeOn:{click:function(e){t.active_voice=i}}})],1),t._v(" "),n("div",{staticClass:"audio-content"},[n("p",{staticClass:"audio-title"},[t._v(t._s(e.name))]),t._v(" "),n("p",{staticClass:"audio-length"},[t._v("09:48")])])]),t._v(" "),n("div",{staticClass:"source-audio-footer"},[n("ul",[n("li",{staticClass:"footer-icon-item",on:{click:function(n){t.del(e)}}},[n("a",[n("Tooltip",{staticStyle:{display:"block"},attrs:{content:"删除"}},[n("Icon",{attrs:{type:"ios-trash",size:"20"}})],1)],1)])])])])})):t._e(),t._v(" "),4===t.source_type?n("ul",{staticClass:"source-video-list"},t._l(t.video_data,function(e,i){return n("li",{key:i,staticClass:"source-img-item"},[n("div",{staticClass:"source-img-header"},[n("Icon",{staticClass:"pull-right",attrs:{type:"chatbubbles",size:"20",color:"#19be6b"}}),t._v(" "),n("span",{staticClass:"pull-left source-img-title"},[t._v(t._s(e.name))]),t._v(" "),n("div",{staticStyle:{clear:"both"}})],1),t._v(" "),n("div",{staticClass:"source-img-content",on:{click:function(n){t.play_video(e)}}},[n("div",{staticClass:"source-video-cover"},[n("Icon",{attrs:{type:"ios-videocam",size:"50"}})],1),t._v(" "),n("img",{attrs:{src:"http://omyc1h52u.bkt.clouddn.com/7205e7cd26829b83f49499dea2ad519b.mp4?vframe/jpg/offset/1/w/207/h/169"}})]),t._v(" "),n("div",{staticClass:"source-img-footer"},[n("ul",[n("li",{staticClass:"footer-icon-item",on:{click:function(n){t.del(e)}}},[n("a",[n("Tooltip",{staticStyle:{display:"block"},attrs:{content:"删除"}},[n("Icon",{attrs:{type:"ios-trash",size:"20"}})],1)],1)])])])])})):t._e()],1),t._v(" "),n("div",{staticClass:"content-footer"},[n("div",{staticClass:"pagenation"},[n("Page",{attrs:{total:t.total,current:t.pageIndex,"show-sizer":!0,"page-size":t.pageSize,"show-total":!0},on:{"on-change":t.pagenation,"on-page-size-change":t.pagesize}})],1)]),t._v(" "),t.loading?n("Spin",{staticClass:"spin-container",attrs:{size:"large",fix:""}},[n("Icon",{staticClass:"demo-spin-icon-load",attrs:{type:"load-c",size:"18"}}),t._v(" "),n("div",[t._v("加载中...")])],1):t._e()],1)]),t._v(" "),n("Modal",{attrs:{"mask-closable":!1,title:"播放视频",width:"600"},model:{value:t.modal_video,callback:function(e){t.modal_video=e},expression:"modal_video"}},[t.modal_video?n("vue-video",{staticClass:"custom-video",staticStyle:{height:"400px"},attrs:{sources:t.sources,options:t.getVOptions(t.sources[0])}}):t._e()],1),t._v(" "),n("Modal",{attrs:{"mask-closable":!1,title:"上传图片",width:"600"},model:{value:t.modal_upload,callback:function(e){t.modal_upload=e},expression:"modal_upload"}},[n("q-upload",{ref:"qupload",staticClass:"custom-video-upload",attrs:{max:1,files:t.files,title:"视频上传",getFiles:t.getFiles,uploadingText:"上传中...",domain:"http://s10.xiao360.com",uptokenUrl:"/api/upload",header:t.upload_header}}),t._v(" "),t.uploadList.length?t._e():n("x-upload",{attrs:{multiple:"",type:"drag","max-size":2048,headers:t.upload_header,data:t.upload_post,"show-upload-list":!1,"on-success":t.hanlderSuccess,format:["jpg","jpeg","png"],"on-format-error":t.handleFormatError,"on-exceeded-size":t.handleMaxSize}},[n("div",{staticStyle:{padding:"20px 0"}},[n("Icon",{staticStyle:{color:"#3399ff"},attrs:{type:"ios-cloud-upload",size:"52"}}),t._v(" "),n("p",[t._v("点击或将文件拖拽到这里上传")])],1)]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.uploadList.length>0,expression:"uploadList.length>0"}]},[t._l(t.uploadList,function(e){return n("div",{key:e.url,staticClass:"admin-upload-list"},["finished"===e.status?[n("img",{attrs:{src:e.url}}),t._v(" "),n("div",{staticClass:"admin-upload-list-cover"},[n("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(n){t.handleView(e.url)}}}),t._v(" "),n("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(n){t.handleRemove(e)}}})],1)]:[e.showProgress?n("Progress",{attrs:{percent:e.percentage,"hide-info":""}}):t._e()]],2)}),t._v(" "),n("x-upload",{ref:"upload",staticStyle:{display:"inline-block",width:"58px"},attrs:{multiple:"",type:"drag","max-size":2048,headers:t.upload_header,data:t.upload_post,"show-upload-list":!1,"on-success":t.hanlderSuccess2,format:["jpg","jpeg","png"],"on-format-error":t.handleFormatError,"on-exceeded-size":t.handleMaxSize}},[n("div",{staticStyle:{width:"58px",height:"58px","line-height":"58px"}},[n("Icon",{attrs:{type:"camera",size:"20"}})],1)])],2),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("span",{staticClass:"pull-left"},[t._v("共选择"+t._s(t.uploadList.length)+"张图片 ("+t._s(t.msg_img_size)+"KB)")]),t._v(" "),n("Button",{attrs:{type:"ghost"},on:{click:function(e){t.modal_upload=!1}}},[t._v("取消")]),t._v(" "),n("Button",{attrs:{type:"primary"},on:{click:function(e){t.modal_upload=!1}}},[t._v("确定")])],1)],1),t._v(" "),n("Modal",{attrs:{title:"查看图片","mask-closable":!1},model:{value:t.modal_preview,callback:function(e){t.modal_preview=e},expression:"modal_preview"}},[t.modal_preview?n("img",{staticStyle:{width:"100%"},attrs:{src:t.imgName}}):t._e(),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"ghost"},on:{click:function(e){t.modal_preview=!1}}},[t._v("关闭")])],1)]),t._v(" "),n("Modal",{attrs:{"mask-closable":!1,title:"选择群发的粉丝分组"},model:{value:t.modal_send,callback:function(e){t.modal_send=e},expression:"modal_send"}},[n("Select",{model:{value:t.group_value,callback:function(e){t.group_value=e},expression:"group_value"}},t._l(t.groups,function(e,i){return n("Option",{attrs:{value:e.value}},[t._v("\n        \t\t\t"+t._s(e.name)+"\n        \t\t\t"),e.value>0?n("span",[t._v("（"+t._s(e.nums)+"）")]):t._e()])})),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"ghost"},on:{click:function(e){t.modal_send=!1}}},[t._v("取消")]),t._v(" "),n("Button",{attrs:{type:"primary"},on:{click:function(e){t.modal_send=!1}}},[t._v("发送")])],1)],1)],1)},r=[];i._withStripped=!0;var o={render:i,staticRenderFns:r};e.a=o},3133:function(t,e,n){"use strict";var i=n(2083),r=n(3134),o=n(11),a=o(i.a,r.a,!1,null,null,null);a.options.__file="src/views/system/configs/wxmp/public-number-modal.vue",e.a=a.exports},3134:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Modal",{directives:[{name:"drag-modal",rawName:"v-drag-modal"}],attrs:{title:t.modal$.title,width:"800","mask-closable":!1},model:{value:t.modal$.show,callback:function(e){t.$set(t.modal$,"show",e)},expression:"modal$.show"}},[n("table",{staticClass:"modal-table"},[n("thead",[n("th",[n("div",{staticClass:"ivu-table-cell"},[t._v("公众号名称")])]),t._v(" "),n("th",[n("div",{staticClass:"ivu-table-cell"},[t._v("AppID")])]),t._v(" "),n("th",[n("div",{staticClass:"ivu-table-cell"},[t._v("公众号类型")])])]),t._v(" "),t._l(t.data,function(e,i){return n("tr",{class:i==t.currentIndex?"table-info":"",on:{click:function(n){t.setCurrentIndex(i,e)}}},[n("td",[n("div",{staticClass:"ivu-table-cell"},[t._v(t._s(e.alias))])]),t._v(" "),n("td",[n("div",{staticClass:"ivu-table-cell"},[t._v(t._s(e.authorizer_appid))])]),t._v(" "),n("td",[n("div",{staticClass:"ivu-table-cell"},[t._v(t._s(2===e.service_type_info?"服务号":"订阅号"))])])])})],2),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("div",{staticClass:"pull-left"},[n("span",[t._v("已选择：")]),t._v(" "),n("span",{staticClass:"text-primary"},[t._v(t._s(t.currentAlias))])]),t._v(" "),n("Button",{attrs:{type:"ghost"},on:{click:t.cancel}},[t._v("取消")]),t._v(" "),n("Button",{attrs:{type:"primary"},on:{click:t.ok}},[t._v("确定")])],1)])},r=[];i._withStripped=!0;var o={render:i,staticRenderFns:r};e.a=o},3135:function(t,e,n){"use strict";var i=n(2084),r=n(3138),o=n(11),a=o(i.a,r.a,!1,null,null,null);a.options.__file="src/views/system/configs/wxmp/message-template.vue",e.a=a.exports},3136:function(t,e,n){"use strict";var i=n(2085),r=n(3137),o=n(11),a=o(i.a,r.a,!1,null,null,null);a.options.__file="src/views/system/configs/wxmp/template-info-modal.vue",e.a=a.exports},3137:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Modal",{directives:[{name:"drag-modal",rawName:"v-drag-modal"}],attrs:{title:t.modal$.title,width:"680","mask-closable":!1},model:{value:t.modal$.show,callback:function(e){t.$set(t.modal$,"show",e)},expression:"modal$.show"}},[n("Form",{attrs:{"label-width":80}},[n("Form-item",{attrs:{label:"配置项"}},[t._v("\n\t\t\t"+t._s(t.info.title)+"\n\t\t")]),t._v(" "),n("Form-item",{attrs:{label:"配置值"}},[n("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入配置值"},model:{value:t.info.value,callback:function(e){t.$set(t.info,"value",e)},expression:"info.value"}})],1),t._v(" "),n("Form-item",{attrs:{label:"描述"}},[n("span",{staticClass:"text-danger font-weight-bold"},[t._v("\n\t\t\t\t"+t._s(t.info.describe)+"\n\t\t\t")])])],1),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"ghost"},on:{click:t.cancel}},[t._v("取消")]),t._v(" "),n("Button",{attrs:{type:"primary"},on:{click:t.ok}},[t._v("确定")])],1)],1)},r=[];i._withStripped=!0;var o={render:i,staticRenderFns:r};e.a=o},3138:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"c-grid"},[n("Button",{staticClass:"mb-3",attrs:{type:"primary",icon:"android-download",loading:t.saving},on:{click:function(e){t.syncTemplate()}}},[t._v("\n\t\t一键设置微信模板\n\t")]),t._v(" "),n("table",{staticClass:"x-modal-table modal-table"},[t._m(0),t._v(" "),t._l(t.template_data,function(e){return n("tr",[n("td",[n("div",{staticClass:"ivu-table-cell "},[t._v(t._s(e.name))])]),t._v(" "),n("td",[n("div",{staticClass:"ivu-table-cell",class:e.is_set?"text-success":"text-danger"},[n("Icon",{attrs:{type:e.is_set?"checkmark-circled":"close-circled"}}),t._v("\t\t\n\t\t\t\t\t"+t._s(e.is_set?"已配置":"未配置")+"\n\t\t\t\t")],1)])])})],2),t._v(" "),n("info-modal",{ref:"info"}),t._v(" "),n("Modal",{directives:[{name:"drag-modal",rawName:"v-drag-modal"}],attrs:{title:"修改行业警告",width:"680","mask-closable":!1},model:{value:t.modal$.show,callback:function(e){t.$set(t.modal$,"show",e)},expression:"modal$.show"}},[n("Alert",{attrs:{type:"warning","show-icon":""}},[t._v("微信服务号/公众号模板行业一个月只能设置一次，请谨慎操作！")]),t._v(" "),n("h5",[t._v("\n\t\t\t继续操作将\n\t\t\t"),n("span",{staticClass:"text-danger"},[t._v("修改")]),t._v(" \n\t\t\t微信公众号的\n\t\t\t"),n("span",{staticClass:"text-info"},[t._v("行业")])]),t._v(" "),n("div",{staticClass:"pl-3 mt-2"},[n("h5",{staticClass:"mb-2"},[t._v("原始行业：")]),t._v(" "),t._l(t.customer_industry,function(e,i){return n("h5",{staticClass:"mb-2"},[t._v(t._s(i+1)+"、"+t._s(e))])}),t._v(" "),n("h5",{staticClass:"mb-2"},[t._v("设置行业：")]),t._v(" "),t._l(t.default_industry,function(e,i){return n("h5",{staticClass:"mb-2"},[t._v(t._s(i+1)+"、"+t._s(e))])})],2),t._v(" "),t.del_templates.length>0?n("h5",[t._v("\n\t\t\t并且会\n\t\t\t"),n("span",{staticClass:"text-danger"},[t._v("删除")]),t._v("\n\t\t\t公众号中以下\n\t\t\t"),n("span",{staticClass:"text-info"},[t._v("模板")]),t._v("：\n\t\t")]):t._e(),t._v(" "),n("div",{staticClass:"pl-3 mt-2"},t._l(t.del_templates,function(e,i){return n("h5",{staticClass:"mb-2"},[t._v(t._s(i+1)+"、"+t._s(e.title))])})),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"ghost",loading:t.saving},on:{click:t.close}},[t._v("取消")]),t._v(" "),n("Button",{attrs:{type:"primary",loading:t.saving},on:{click:t.ok}},[t._v("确定修改")])],1)],1)],1)},r=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("th",[n("div",{staticClass:"ivu-table-cell notwrap"},[t._v("模板名称")])]),t._v(" "),n("th",[n("div",{staticClass:"ivu-table-cell notwrap"},[t._v("是否配置")])])])}];i._withStripped=!0;var o={render:i,staticRenderFns:r};e.a=o},3139:function(t,e,n){"use strict";var i=n(2086),r=n(3140),o=n(11),a=o(i.a,r.a,!1,null,null,null);a.options.__file="src/views/system/configs/wxmp/wxmp-add-modal.vue",e.a=a.exports},3140:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Modal",{directives:[{name:"drag-modal",rawName:"v-drag-modal"}],attrs:{title:t.modal$.title,"mask-closable":!1,width:"680"},model:{value:t.modal$.show,callback:function(e){t.$set(t.modal$,"show",e)},expression:"modal$.show"}},[t.branchs.length>0?n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm-12 bg-info"},[n("Checkbox",{staticStyle:{margin:"5px 10px"},on:{"on-change":t.toggleSelectAllBids},model:{value:t.check_all,callback:function(e){t.check_all=e},expression:"check_all"}},[n("span",[t._v("适用校区")])])],1),t._v(" "),n("CheckboxGroup",{staticClass:"col-sm-12",model:{value:t.info.bids,callback:function(e){t.$set(t.info,"bids",e)},expression:"info.bids"}},t._l(t.branchs,function(e){return n("Checkbox",{staticClass:"col-sm-3",staticStyle:{width:"23%",padding:"10px 10px 5px"},attrs:{label:e.bid}},[n("span",[t._v(t._s(e.branch_name))])])}))],1):n("p",{staticClass:"text-center text-danger"},[n("Icon",{attrs:{type:"information-circled"}}),t._v("\n\t\t\t所有校区都已绑定公众号，若要添加新公众号，您可以添加新校区或给已绑定公众号的校区解除绑定后再添加\n\t\t")],1),t._v(" "),n("Button",{staticClass:"mt-3",attrs:{type:"primary",disabled:0===t.info.bids.length},on:{click:t.bindNew}},[t._v("去授权")]),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"ghost"},on:{click:t.close}},[t._v("关闭")])],1)],1)},r=[];i._withStripped=!0;var o={render:i,staticRenderFns:r};e.a=o},3141:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading.like",value:"configs",expression:"'configs'",modifiers:{like:!0}}],staticClass:"c-grid"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-2"},[n("Card",{staticClass:"x-card",attrs:{"dis-hover":""}},[n("div",{staticClass:"clearfloatblock",attrs:{slot:"title"},slot:"title"},[n("span",{staticStyle:{"line-height":"24px"}},[t._v("公众号列表")]),t._v(" "),t.hasOwnerDefaultWxmp?n("Button",{directives:[{name:"per",rawName:"v-per",value:"wxmp.list",expression:"'wxmp.list'"}],staticClass:"pull-right",attrs:{type:"ghost",shape:"circle",size:"small",icon:"plus",title:"新增"},on:{click:function(e){e.stopPropagation(),t.addInfo()}}}):t._e()],1),t._v(" "),n("div",{staticClass:"x-card-body"},[t.filter_data.length>7?n("div",{staticClass:"mb-3"},[n("Input",{attrs:{placeholder:"请输入公众号名称",icon:"ios-search"},model:{value:t.data_key,callback:function(e){t.data_key=e},expression:"data_key"}})],1):t._e(),t._v(" "),n("ul",t._l(t.filter_data,function(e,i){return n("li",{staticClass:"mb-2 x-li cursor",class:t.currentIndex===i?"text-primary font-weight-bold":"",on:{click:function(e){t.setCurrentIndex(i)}}},[n("div",{staticClass:"notwrap"},[n("Icon",{attrs:{type:"record",color:t.currentIndex===i?"#2d8cf0":"transparent"}}),t._v("\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t"+t._s(0===i?"默认公众号":e.nick_name)+"\n\t\t\t\t\t\t\t\t")],1)])}))])])],1),t._v(" "),n("div",{staticClass:"col-md-10"},[n("Card",{attrs:{"dis-hover":""}},[n("div",{staticClass:"clearfloatblock",attrs:{slot:"title"},slot:"title"},[n("span",{staticStyle:{"line-height":"32px"}},[t._v("公众号信息")]),t._v(" "),n("Button",{staticClass:"pull-right",attrs:{type:"ghost",icon:"refresh",loading:t.saving},on:{click:t.refreshInfo}},[t._v("\n\t\t\t\t\t\t\t更新公众号信息\n\t\t\t\t\t\t")]),t._v(" "),1===t.currentItem.system_default?n("Button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"更换默认公众号为自己的公众号",expression:"'更换默认公众号为自己的公众号'"}],staticClass:"pull-right",attrs:{type:"primary"},on:{click:t.bandNew}},[t._v("\n\t\t\t\t\t\t\t更换默认公众号\n\t\t\t\t\t\t")]):t._e()],1),t._v(" "),n("Form",{staticClass:"row",attrs:{"label-width":120}},[n("div",{staticClass:"col-sm-4"},[n("div",{staticClass:"qrcode-container m-auto",on:{click:function(e){t.picturePreview(t.format_wx_img(t.currentItem.qrcode_url))}}},[n("img",{attrs:{src:t.format_wx_img(t.currentItem.qrcode_url)||"/static/img/暂无-2.jpg"}})])]),t._v(" "),n("div",{staticClass:"col-sm-8 row"},[n("Form-item",{staticClass:"col-sm-12",attrs:{label:"公众号名称："}},[n("span",[t._v(t._s(t.currentItem.nick_name))]),t._v(" "),t.currentItem.is_default||t.currentItem.system_default?n("Tag",{attrs:{color:"green"}},[t._v("默认公众号")]):t._e()],1),t._v(" "),n("Form-item",{staticClass:"col-sm-12",attrs:{label:"公众号简称："}},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.currentItem.alias)+"\n\t\t\t\t\t\t\t")]),t._v(" "),n("Form-item",{staticClass:"col-sm-12",attrs:{label:"公众号主体名称："}},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.currentItem.principal_name)+"\n\t\t\t\t\t\t\t")])],1)])],1),t._v(" "),n("Card",{staticClass:"mt-3",attrs:{"dis-hover":""}},[n("span",{attrs:{slot:"title"},slot:"title"},[t._v("微信公众号配置")]),t._v(" "),n("Tabs",{staticClass:"x-tabs",attrs:{type:"card"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[n("TabPane",{attrs:{label:"适用校区",name:"schools"}},["schools"==t.tab?n("div",[t.currentItem.is_default||t.currentItem.system_default?n("Alert",{attrs:{"show-icon":""}},[t._v("\n\t\t\t\t\t\t\t        自定义微信公众号开通说明\n\t\t\t\t\t\t\t        "),n("Icon",{attrs:{slot:"icon",type:"ios-lightbulb-outline"},slot:"icon"}),t._v(" "),n("template",{slot:"desc"},[t._v("\n\t\t\t\t\t\t\t        \t系统默认使用「学习管家服务号」作为服务公众号，完成对家长和"+t._s(t._f("translate")("老师"))+"的模板消息的推送及移动端的入口"),n("br"),t._v("\n\t\t\t\t\t\t\t        \t您可以使用您自己的公众号"),n("br"),t._v("\n\t\t\t\t\t\t\t        \t默认公众号适用于所有的校区，在设置了您自己的默认公众号以后，还可以给指定的校区开通校区单独的公众号.\n\t\t\t\t\t\t\t        \t"),n("br"),t._v(" "),n("Tag",{attrs:{color:"red"}},[t._v("注意：公众号必须是已认证的服务号，订阅号不可以使用.")]),n("br"),t._v(" "),n("a",{attrs:{href:"https://mp.weixin.qq.com/cgi-bin/readtemplate?t=register/step1_tmpl&lang=zh_CN",target:"_blank"}},[t._v("前往免费申请微信公众服务号")])],1)],2):n("CheckboxGroup",{staticClass:"row",attrs:{value:t.bids$}},t._l(t.branchs,function(e){return n("Checkbox",{staticClass:"col-sm-2 mt-2",attrs:{label:e.bid,readonly:""}},[t._v("\n\t\t\t        \t\t\t\t\t"+t._s(e.branch_name)+"\n\t\t\t        \t\t\t\t")])}))],1):t._e()]),t._v(" "),t.canWxmpEditable?[n("TabPane",{attrs:{label:"消息模板设置",name:"template"}},["template"==t.tab?n("message-template",{ref:"template",attrs:{appId:t.appId}}):t._e()],1),t._v(" "),n("TabPane",{attrs:{label:"自定义菜单",name:"menu"}},["menu"==t.tab?n("customMenu",{attrs:{appId:t.appId,wxmpId:t.wxmpId}}):t._e()],1),t._v(" "),n("TabPane",{attrs:{label:"素材管理",name:"source"}},["source"==t.tab?n("sourceManage",{attrs:{appId:t.appId}}):t._e()],1),t._v(" "),n("TabPane",{attrs:{label:"自动回复",name:"reply"}},["reply"==t.tab?n("autoReply",{attrs:{wxmpId:t.wxmpId}}):t._e()],1)]:t._e()],2)],1)],1)]),t._v(" "),n("public-number-modal",{ref:"public_number",on:{"on-success":t.init_wx_config}}),t._v(" "),n("wxmp-add-modal",{ref:"add"})],1)},r=[];i._withStripped=!0;var o={render:i,staticRenderFns:r};e.a=o},602:function(t,e,n){"use strict";function i(t){a||(n(3119),n(3120))}Object.defineProperty(e,"__esModule",{value:!0});var r=n(2078),o=n(3141),a=!1,s=n(11),u=i,l=s(r.a,o.a,!1,u,null,null);l.options.__file="src/views/system/configs/wxmp/wxmp.vue",e.default=l.exports},624:function(t,e,n){"use strict";function i(t,e){var n=[];for(var i in this.operation_keys){var r=this.operation_keys[i],o=[],a=void 0,s=!0;r.per&&o.push({name:"per",value:r.per,expression:"",arg:"display",modifiers:{}}),r.condition&&(u.a.isString(r.condition)?a=new Function("row","params","return "+r.condition):u.a.isFunction(condition)&&(a=condition),u.a.isFunction(a)&&(a(e.row,e)||(s=!1))),u.a.isFunction(this.operation_func[i])&&!1!==r.show&&s&&n.push(t("Dropdown-item",{nativeOn:{click:this.operation_func[i].bind(this,e)},directives:o},[t("Icon",{props:{type:r.type}})," ",r.title]))}return t("div",[t("Dropdown",{props:{placement:"bottom-start",trigger:"click",transfer:!0}},[t("Button",{props:{type:"primary",size:"small"}},["操作"," ",t("Icon",{props:{type:"arrow-down-b"}})]),t("Dropdown-menu",{slot:"list"},n)])])}n.d(e,"a",function(){return d});var r=n(33),o=n.n(r),a=n(9),s=n.n(a),u=(n(24),n(34),n(1)),l=n(632),c=n(639),d={sex:function(t,e){return t("span",{0:"-",1:"男",2:"女"}[e.row.sex])},lid:function(t,e){return t("span",this.$filter("lesson_name")(e.row.lid))},bid:function(t,e){return t("span",this.$filter("branch_name")(e.row.bid))},bids:function(t,e){var n=e.row.bids,i="未设置校区",r=[],o=this.$filter("branch_name");if(""!=n[0])if(n.length<4)n.forEach(function(t){r.push(o(t))}),i=r.join(",");else{for(var a=0;a<3;a++)r.push(o(n[a]));i=u.b.sprintf("%s等%s个校区",r.join(","),n.length)}return e.row.user&&1===e.row.user.is_admin&&(i="所有校区"),t("div",i)},rids:function(t,e){var n=e.row.rids,i="未设置角色",r=[],o=this.$filter("role_name");if(""!=n[0])if(n.length<4)n.forEach(function(t){r.push(o(t))}),i=r.join(",");else{for(var a=0;a<3;a++)r.push(o(n[a]));i=u.b.sprintf("%s等%s个角色",r.join(","),n.length)}return e.row.user&&1===e.row.user.is_admin&&(i="超级管理员"),t("div",i)},teach_eid:function(t,e){return t("span",this.$filter("employee_name")(e.row.teach_eid))},second_eid:function(t,e){return t("span",this.$filter("employee_name")(e.row.second_eid))},edu_eid:function(t,e){return t("span",this.$filter("employee_name")(e.row.edu_eid))},cr_id:function(t,e){return t("span",this.$filter("classroom_name")(e.row.cr_id,"未知"))},sj_id:function(t,e){return t("span",this.$filter("subject_name")(e.row.sj_id))},sj_ids:function(t,e){return t("span",this.$filter("sj_ids_text")(e.row.sj_ids))},fit_grade:function(t,e){var n=this.labelDicts(e.row.fit_grade[0],"grade");return e.row.fit_grade[1]!=e.row.fit_grade[0]&&(n+="~"+this.labelDicts(e.row.fit_grade[1],"grade")),t("span",n)},grade:function(t,e){return t("span",this.labelDicts(e.row.grade,"grade"))},departments:function(t,e){var n=e.row.departments,i="未设置部门",r=[],o=this.$filter("dpt_name"),a=this.$filter("dict_title");if(n.length>0)if(n.length<4)n.forEach(function(t){r.push(u.b.sprintf("%s(%s)",o(t.dpt_id),a(t.jobtitle_did,"jobtitle")))}),i=r.join(",");else{for(var s=0;s<3;s++)r.push(u.b.sprintf("%s(%s)",o(n[s].dpt_id),a(n[s].jobtitle_did,"jobtitle")));i=u.b.sprintf("%s等%s个职位",r.join(","),n.length)}return t("div",i)},season:function(t,e){return t("span",this.$filter("season_name")(e.row.season))},time_section:function(t,e){var n="?",i="?",r="?";return e.row.int_day>0&&(n=this.$filter("int_week")(e.row.int_day)),e.row.int_start_hour>0&&(i=this.$filter("int_hour")(e.row.int_start_hour)),e.row.int_end_hour>0&&(r=this.$filter("int_hour")(e.row.int_end_hour)),t("span",u.b.sprintf("周%s %s~%s",n,i,r))},int_day:function(t,e){var n="-";return e.row.int_day>0&&(n=this.$filter("int_date")(e.row.int_day)),t("span",n)},teach_object:function(t,e){var n=e.row;if(0==n.lesson_type){if(1==n.is_trial||1==n.is_makeup){var i="试";return 1==n.is_makeup&&(i="补"),t("div",[t("Tag",{props:{color:"blue"}},i),t("Tag",n.name||"")])}return t("div",[t("Tag",{props:{color:"blue"}},"班"),t("Tag",null!=n.one_class?n.one_class.class_name:"")])}var r=void 0,o=[];return n.is_trial?r=t("Tag",{props:{color:"yellow"}},"试:"+n.name):1==n.lesson_type?r=t("Tag",{props:{color:"green"}},"一"):2==n.lesson_type&&(r=t("Tag",{props:{color:"green"}},"多")),n.students.forEach(function(e){o.push(t("Tag",e.student.student_name))}),t("div",[r,t("span",o)])}};e.b={components:{FilterColumn:l.a,PerScope:c.a},data:function(){return{imgView:!1,bigImage:"",loading:!1,rest_api:"",searchExpand:!1,params:{search_field:"name",search_value:"",order_field:"",order_sort:"",last_search_value:"",bid:""},data:[],modal:{title:"",action:"add",show:!1},total:0,pageIndex:1,pageSize:10,init_page_size:0,bigPageSizeOption:[10,20,40,60,80,100],showCheckbox:!1,showIndex:!0,column_keys:{},column_render:{},operation_keys:{},operation_func:{},column_operation_text:"操作",sexOptions:[{value:-1,label:"不限"},{value:1,label:"男"},{value:2,label:"女"},{value:0,label:"未设置"}]}},methods:{sortChange:function(t){this.params.order_field=t.key,this.params.order_sort=t.order,this.init_data()},pagenation:function(t){this.pageIndex=t,this.init_data()},pagesize:function(t){if(this.pageSize=t,0==this.init_page_size)return void(this.init_page_size=1);this.init_data()},toggleSearch:function(){this.searchExpand=!this.searchExpand},search:function(){this.pagenation(1)},resetSearch:function(){this.params.search_value="",this.init_data()},init_data:function(){var t=this;if(this.loading)return!1;if(""!=this.rest_api){var e={};e.page=this.pageIndex,e.pagesize=this.pageSize,""!=this.params.search_value?(e.search_field=this.params.search_field,e.search_value=this.params.search_value,this.params.last_search_value=this.params.search_value):this.params.last_search_value="",""!=this.params.order_field&&(e.order_field=this.params.order_field,e.order_sort=this.params.order_sort),""!==this.params.bid&&(e.bid=this.params.bid),this.hook_get_param(e);for(var n in e)null===e[n]&&delete e[n];this.loading=!0,this.$rest(this.rest_api).get(e).success(function(n){t.params=u.b.copy(e),t.data=t.deal_data(n),t.total=n.total,t.pageSize=parseInt(n.pagesize),t.loading=!1}).error(function(e){t.loading=!1})}},hook_get_param:function(t){},deal_data:function(t){return t.list},check:function(){var t=this;return new s.a(function(e,n){t.$refs["form_"+t.datakey].validate(function(t){t?e():n()})})},add:function(){this.modal.action="add",this.modal.title="添加"+this.res_name,this.modal.show=!0,this[this.datakey][this.pk]=null},edit:function(t){this.rest_id=t[this.pk],o()(this[this.datakey],t),this.modal.action="edit",this.modal.title="编辑"+this.res_name,this.modal.show=!0},save:function(){var t=this;return new s.a(function(e,n){var i=t.rest_api,r=t[t.datakey];t.check().then(function(){var o="add"==t.modal.action?"post":"put",a=(t.modal.action,t.$rest(i));"add"!=t.modal.action&&a.add_url_param(t.rest_id),a[o](r).success(function(n){t.close(),t.init_data(),e(n)}).error(function(e){t.$Message.error(e.body.message),n(e)})})})},close:function(){this.modal.show=!1},delete:function(t){var e=this;return new s.a(function(n,i){e.$rest(e.rest_api).delete(t[e.pk]).success(function(t,i){e.init_data(),e.$Message.success("删除成功"),n(t)}).error(function(t,n){e.$Message.error(t.body.message),i(t)})})},do:function(t,e,n){var i=this;return new s.a(function(r,o){i.$rest(i.rest_api).add_url_param(e[i.pk],"do"+t).post(n).success(function(t){i.init_data(),r(t)}).error(function(t){i.$Message.error(t.body.message),o(t)})})},confirm:function(t){var e=this;return new s.a(function(n,i){e.$Modal.confirm({content:t||"您确定要进行删除操作吗?",onOk:function(){n()},onCancel:function(){i()}})})},fixLeft:function(){return this.data.length>0&&"left"},fixRight:function(){return this.data.length>0&&"right"},exportCSV:function(t,e){this.$refs[e].exportCsv({filename:t})},view_img:function(t){this.imgView=!0,this.bigImage=t},getBid:function(){return this.$store.state.branch.id},toggleBranch:function(t){}},computed:{toggleSearchIcon:function(){return this.searchExpand?"chevron-up":"chevron-down"},export_params:function(){var t={};t.page=this.pageIndex,t.pagesize=this.pageSize,""!=this.params.search_value&&(t[this.params.search_field]=this.params.search_value),this.hook_get_param(t);for(var e in t)null===t[e]&&delete t[e];return t},columns_head:function(){var t=[];return this.showCheckbox&&t.push({type:"selection",width:60,align:"center",fixed:this.fixLeft()}),this.showIndex&&t.push({type:"index",width:60,align:"center",fixed:this.fixLeft()}),t},columns:function(){var t=[],e={},n=this.column_render;o()(t,this.columns_head);for(var r in this.column_keys){var a=this.column_keys[r];if(void 0===a.show&&(a.show=!0),void 0===a.disabled&&(a.disabled=!1),a.show){var s=o()({key:r},a);n[r]?s.render=n[r].bind(this):d[r]&&(s.render=d[r].bind(this)),t.push(s)}}if(u.a.isEmpty(this.operation_btn)||(e.key="operation",e.title=this.column_operation_text,e.width=80,e.render=this.operation_btn.operation.bind(this),t.push(e)),u.a.isEmpty(this.operation_keys)||(e.key="operation",e.fixed=this.fixLeft(),e.title=this.column_operation_text,e.width=80,e.render=i.bind(this),t.unshift(e)),!u.a.isEmpty(this.expand_render)){var l={};l.type="expand",l.width=50,l.render=this.expand_render.expand.bind(this),t.unshift(l)}return t},upload_header:function(){return{"x-token":this.$store.state.user.token,"x-file-key":"file"}},upload_post:function(){return{mod:"attachment_file"}}},watch:{"$store.state.branch.id":{handler:function(t,e){t!=e&&""!=this.rest_api&&(this.toggleBranch(t),this.init_data())},deep:!0},"$store.state.branch.last_update":{handler:function(){""!=this.rest_api&&this.init_data()},deep:!0}}}},625:function(t,e,n){"use strict";var i=n(631),r=n.n(i),o=n(35),a=n.n(o),s=n(1),u=n(637),l={};e.a={name:"filterColumn",props:{keys:{type:Object,default:function(){return{}}}},data:function(){return{items:{},selectAll:!1}},created:function(){var t=u(this.keys);l[t]?(this.items=l[t],this.setKeys()):(l[t]=s.b.copy(this.keys),this.items=l[t]),this.changeAllState()},methods:{toggleSelect:function(){for(var t in this.items)this.items[t].disabled||(this.items[t].show=this.selectAll);this.setKeys()},setKeys:function(){for(var t in this.items)this.keys[t].show=this.items[t].show},setKey:function(t){this.keys[t].show=!this.items[t].show,this.changeAllState()},changeAllState:function(){var t=a()(this.keys).length==r()(this.keys).filter(function(t){return 1==t.show}).length;this.selectAll&&!t&&(this.selectAll=!1),!this.selectAll&&t&&(this.selectAll=!0)}}}},626:function(t,e,n){"use strict";var i=n(207);e.a={mixins:[i.a],props:{per:{type:String,require:!0},showMy:{type:Boolean,default:!1}},mounted:function(){this.userPers.indexOf(this.per)>-1?this.showMy?this.type_value="my":this.type_value="all":this.type_value="my"},data:function(){return{type_value:""}},watch:{type_value:function(t){this.$emit("on-change",t)}}}},631:function(t,e,n){t.exports={default:n(634),__esModule:!0}},632:function(t,e,n){"use strict";function i(t){a||n(633)}var r=n(625),o=n(638),a=!1,s=n(11),u=i,l=s(r.a,o.a,!1,u,null,null);l.options.__file="src/views/components/FilterColumn.vue",e.a=l.exports},633:function(t,e){},634:function(t,e,n){n(635),t.exports=n(2).Object.values},635:function(t,e,n){var i=n(5),r=n(636)(!1);i(i.S,"Object",{values:function(t){return r(t)}})},636:function(t,e,n){var i=n(17),r=n(15),o=n(25).f;t.exports=function(t){return function(e){for(var n,a=r(e),s=i(a),u=s.length,l=0,c=[];u>l;)o.call(a,n=s[l++])&&c.push(t?[n,a[n]]:a[n]);return c}}},637:function(t,e,n){var i,i;!function(e){t.exports=e()}(function(){return function t(e,n,r){function o(s,u){if(!n[s]){if(!e[s]){var l="function"==typeof i&&i;if(!u&&l)return i(s,!0);if(a)return a(s,!0);throw new Error("Cannot find module '"+s+"'")}var c=n[s]={exports:{}};e[s][0].call(c.exports,function(t){var n=e[s][1][t];return o(n||t)},c,c.exports,t,e,n,r)}return n[s].exports}for(var a="function"==typeof i&&i,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(t,e,n){(function(i,r,o,a,s,u,l,c,d){"use strict";function f(t,e){return e=p(t,e),m(t,e)}function p(t,e){if(e=e||{},e.algorithm=e.algorithm||"sha1",e.encoding=e.encoding||"hex",e.excludeValues=!!e.excludeValues,e.algorithm=e.algorithm.toLowerCase(),e.encoding=e.encoding.toLowerCase(),e.ignoreUnknown=!0===e.ignoreUnknown,e.respectType=!1!==e.respectType,e.respectFunctionNames=!1!==e.respectFunctionNames,e.respectFunctionProperties=!1!==e.respectFunctionProperties,e.unorderedArrays=!0===e.unorderedArrays,e.unorderedSets=!1!==e.unorderedSets,e.unorderedObjects=!1!==e.unorderedObjects,e.replacer=e.replacer||void 0,e.excludeKeys=e.excludeKeys||void 0,void 0===t)throw new Error("Object argument required.");for(var n=0;n<y.length;++n)y[n].toLowerCase()===e.algorithm.toLowerCase()&&(e.algorithm=y[n]);if(-1===y.indexOf(e.algorithm))throw new Error('Algorithm "'+e.algorithm+'"  not supported. supported values: '+y.join(", "));if(-1===w.indexOf(e.encoding)&&"passthrough"!==e.algorithm)throw new Error('Encoding "'+e.encoding+'"  not supported. supported values: '+w.join(", "));return e}function h(t){return"function"==typeof t&&null!=/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(t))}function m(t,e){var n;if(n="passthrough"!==e.algorithm?_.createHash(e.algorithm):new v,void 0===n.write&&(n.write=n.update,n.end=n.update),g(e,n).dispatch(t),n.update||n.end(""),n.digest)return n.digest("buffer"===e.encoding?void 0:e.encoding);var i=n.read();return"buffer"===e.encoding?i:i.toString(e.encoding)}function g(t,e,n){n=n||[];var i=function(t){return e.update?e.update(t,"utf8"):e.write(t,"utf8")};return{dispatch:function(e){t.replacer&&(e=t.replacer(e));var n=typeof e;return null===e&&(n="null"),this["_"+n](e)},_object:function(e){var r=/\[object (.*)\]/i,a=Object.prototype.toString.call(e),s=r.exec(a);s=s?s[1]:"unknown:["+a+"]",s=s.toLowerCase();var u=null;if((u=n.indexOf(e))>=0)return this.dispatch("[CIRCULAR:"+u+"]");if(n.push(e),void 0!==o&&o.isBuffer&&o.isBuffer(e))return i("buffer:"),i(e);if("object"===s||"function"===s){var l=Object.keys(e);t.unorderedObjects&&(l=l.sort()),!1===t.respectType||h(e)||l.splice(0,0,"prototype","__proto__","constructor"),t.excludeKeys&&(l=l.filter(function(e){return!t.excludeKeys(e)})),i("object:"+l.length+":");var c=this;return l.forEach(function(n){c.dispatch(n),i(":"),t.excludeValues||c.dispatch(e[n]),i(",")})}if(!this["_"+s]){if(t.ignoreUnknown)return i("["+s+"]");throw new Error('Unknown object type "'+s+'"')}this["_"+s](e)},_array:function(e,r){r=void 0!==r?r:!1!==t.unorderedArrays;var o=this;if(i("array:"+e.length+":"),!r||e.length<=1)return e.forEach(function(t){return o.dispatch(t)});var a=[],s=e.map(function(e){var i=new v,r=n.slice();return g(t,i,r).dispatch(e),a=a.concat(r.slice(n.length)),i.read().toString()});return n=n.concat(a),s.sort(),this._array(s,!1)},_date:function(t){return i("date:"+t.toJSON())},_symbol:function(t){return i("symbol:"+t.toString())},_error:function(t){return i("error:"+t.toString())},_boolean:function(t){return i("bool:"+t.toString())},_string:function(t){i("string:"+t.length+":"),i(t)},_function:function(e){i("fn:"),h(e)?this.dispatch("[native]"):this.dispatch(e.toString()),!1!==t.respectFunctionNames&&this.dispatch("function-name:"+String(e.name)),t.respectFunctionProperties&&this._object(e)},_number:function(t){return i("number:"+t.toString())},_xml:function(t){return i("xml:"+t.toString())},_null:function(){return i("Null")},_undefined:function(){return i("Undefined")},_regexp:function(t){return i("regex:"+t.toString())},_uint8array:function(t){return i("uint8array:"),this.dispatch(Array.prototype.slice.call(t))},_uint8clampedarray:function(t){return i("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(t))},_int8array:function(t){return i("uint8array:"),this.dispatch(Array.prototype.slice.call(t))},_uint16array:function(t){return i("uint16array:"),this.dispatch(Array.prototype.slice.call(t))},_int16array:function(t){return i("uint16array:"),this.dispatch(Array.prototype.slice.call(t))},_uint32array:function(t){return i("uint32array:"),this.dispatch(Array.prototype.slice.call(t))},_int32array:function(t){return i("uint32array:"),this.dispatch(Array.prototype.slice.call(t))},_float32array:function(t){return i("float32array:"),this.dispatch(Array.prototype.slice.call(t))},_float64array:function(t){return i("float64array:"),this.dispatch(Array.prototype.slice.call(t))},_arraybuffer:function(t){return i("arraybuffer:"),this.dispatch(new Uint8Array(t))},_url:function(t){return i("url:"+t.toString())},_map:function(e){i("map:");var n=Array.from(e);return this._array(n,!1!==t.unorderedSets)},_set:function(e){i("set:");var n=Array.from(e);return this._array(n,!1!==t.unorderedSets)},_blob:function(){if(t.ignoreUnknown)return i("[blob]");throw Error('Hashing Blob objects is currently not supported\n(see https://github.com/puleos/object-hash/issues/26)\nUse "options.replacer" or "options.ignoreUnknown"\n')},_domwindow:function(){return i("domwindow")},_process:function(){return i("process")},_timer:function(){return i("timer")},_pipe:function(){return i("pipe")},_tcp:function(){return i("tcp")},_udp:function(){return i("udp")},_tty:function(){return i("tty")},_statwatcher:function(){return i("statwatcher")},_securecontext:function(){return i("securecontext")},_connection:function(){return i("connection")},_zlib:function(){return i("zlib")},_context:function(){return i("context")},_nodescript:function(){return i("nodescript")},_httpparser:function(){return i("httpparser")},_dataview:function(){return i("dataview")},_signal:function(){return i("signal")},_fsevent:function(){return i("fsevent")},_tlswrap:function(){return i("tlswrap")}}}function v(){return{buf:"",write:function(t){this.buf+=t},end:function(t){this.buf+=t},read:function(){return this.buf}}}var _=t("crypto");n=e.exports=f,n.sha1=function(t){return f(t)},n.keys=function(t){return f(t,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},n.MD5=function(t){return f(t,{algorithm:"md5",encoding:"hex"})},n.keysMD5=function(t){return f(t,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var y=_.getHashes?_.getHashes().slice():["sha1","md5"];y.push("passthrough");var w=["buffer","hex","binary","base64"];n.writeToStream=function(t,e,n){return void 0===n&&(n=e,e={}),e=p(t,e),g(e,n).dispatch(t)}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_5f1a2fc7.js","/")},{buffer:3,crypto:5,lYpoI2:10}],2:[function(t,e,n){(function(t,e,i,r,o,a,s,u,l){!function(t){"use strict";function e(t){var e=t.charCodeAt(0);return e===o||e===c?62:e===a||e===d?63:e<s?-1:e<s+10?e-s+26+26:e<l+26?e-l:e<u+26?e-u+26:void 0}function n(t){function n(t){l[d++]=t}var i,o,a,s,u,l;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var c=t.length;u="="===t.charAt(c-2)?2:"="===t.charAt(c-1)?1:0,l=new r(3*t.length/4-u),a=u>0?t.length-4:t.length;var d=0;for(i=0,o=0;i<a;i+=4,o+=3)s=e(t.charAt(i))<<18|e(t.charAt(i+1))<<12|e(t.charAt(i+2))<<6|e(t.charAt(i+3)),n((16711680&s)>>16),n((65280&s)>>8),n(255&s);return 2===u?(s=e(t.charAt(i))<<2|e(t.charAt(i+1))>>4,n(255&s)):1===u&&(s=e(t.charAt(i))<<10|e(t.charAt(i+1))<<4|e(t.charAt(i+2))>>2,n(s>>8&255),n(255&s)),l}function i(t){function e(t){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t)}var n,i,r,o=t.length%3,a="";for(n=0,r=t.length-o;n<r;n+=3)i=(t[n]<<16)+(t[n+1]<<8)+t[n+2],a+=function(t){return e(t>>18&63)+e(t>>12&63)+e(t>>6&63)+e(63&t)}(i);switch(o){case 1:i=t[t.length-1],a+=e(i>>2),a+=e(i<<4&63),a+="==";break;case 2:i=(t[t.length-2]<<8)+t[t.length-1],a+=e(i>>10),a+=e(i>>4&63),a+=e(i<<2&63),a+="="}return a}var r="undefined"!=typeof Uint8Array?Uint8Array:Array,o="+".charCodeAt(0),a="/".charCodeAt(0),s="0".charCodeAt(0),u="a".charCodeAt(0),l="A".charCodeAt(0),c="-".charCodeAt(0),d="_".charCodeAt(0);t.toByteArray=n,t.fromByteArray=i}(void 0===n?this.base64js={}:n)}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:10}],3:[function(t,e,n){(function(e,i,r,o,a,s,u,l,c){function r(t,e,n){if(!(this instanceof r))return new r(t,e,n);var i=typeof t;if("base64"===e&&"string"===i)for(t=D(t);t.length%4!=0;)t+="=";var o;if("number"===i)o=P(t);else if("string"===i)o=r.byteLength(t,e);else{if("object"!==i)throw new Error("First argument needs to be a number, array or string.");o=P(t.length)}var a;r._useTypedArrays?a=r._augment(new Uint8Array(o)):(a=this,a.length=o,a._isBuffer=!0);var s;if(r._useTypedArrays&&"number"==typeof t.byteLength)a._set(t);else if(N(t))for(s=0;s<o;s++)r.isBuffer(t)?a[s]=t.readUInt8(s):a[s]=t[s];else if("string"===i)a.write(t,0,e);else if("number"===i&&!r._useTypedArrays&&!n)for(s=0;s<o;s++)a[s]=0;return a}function d(t,e,n,i){n=Number(n)||0;var o=t.length-n;i?(i=Number(i))>o&&(i=o):i=o;var a=e.length;J(a%2==0,"Invalid hex string"),i>a/2&&(i=a/2);for(var s=0;s<i;s++){var u=parseInt(e.substr(2*s,2),16);J(!isNaN(u),"Invalid hex string"),t[n+s]=u}return r._charsWritten=2*s,s}function f(t,e,n,i){return r._charsWritten=G($(e),t,n,i)}function p(t,e,n,i){return r._charsWritten=G(j(e),t,n,i)}function h(t,e,n,i){return p(t,e,n,i)}function m(t,e,n,i){return r._charsWritten=G(H(e),t,n,i)}function g(t,e,n,i){return r._charsWritten=G(q(e),t,n,i)}function v(t,e,n){return 0===e&&n===t.length?K.fromByteArray(t):K.fromByteArray(t.slice(e,n))}function _(t,e,n){var i="",r="";n=Math.min(t.length,n);for(var o=e;o<n;o++)t[o]<=127?(i+=V(r)+String.fromCharCode(t[o]),r=""):r+="%"+t[o].toString(16);return i+V(r)}function y(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;r++)i+=String.fromCharCode(t[r]);return i}function w(t,e,n){return y(t,e,n)}function b(t,e,n){var i=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>i)&&(n=i);for(var r="",o=e;o<n;o++)r+=z(t[o]);return r}function x(t,e,n){for(var i=t.slice(e,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function E(t,e,n,i){i||(J("boolean"==typeof n,"missing or invalid endian"),J(void 0!==e&&null!==e,"missing offset"),J(e+1<t.length,"Trying to read beyond buffer length"));var r=t.length;if(!(e>=r)){var o;return n?(o=t[e],e+1<r&&(o|=t[e+1]<<8)):(o=t[e]<<8,e+1<r&&(o|=t[e+1])),o}}function C(t,e,n,i){i||(J("boolean"==typeof n,"missing or invalid endian"),J(void 0!==e&&null!==e,"missing offset"),J(e+3<t.length,"Trying to read beyond buffer length"));var r=t.length;if(!(e>=r)){var o;return n?(e+2<r&&(o=t[e+2]<<16),e+1<r&&(o|=t[e+1]<<8),o|=t[e],e+3<r&&(o+=t[e+3]<<24>>>0)):(e+1<r&&(o=t[e+1]<<16),e+2<r&&(o|=t[e+2]<<8),e+3<r&&(o|=t[e+3]),o+=t[e]<<24>>>0),o}}function S(t,e,n,i){if(i||(J("boolean"==typeof n,"missing or invalid endian"),J(void 0!==e&&null!==e,"missing offset"),J(e+1<t.length,"Trying to read beyond buffer length")),!(e>=t.length)){var r=E(t,e,n,!0);return 32768&r?-1*(65535-r+1):r}}function k(t,e,n,i){if(i||(J("boolean"==typeof n,"missing or invalid endian"),J(void 0!==e&&null!==e,"missing offset"),J(e+3<t.length,"Trying to read beyond buffer length")),!(e>=t.length)){var r=C(t,e,n,!0);return 2147483648&r?-1*(4294967295-r+1):r}}function R(t,e,n,i){return i||(J("boolean"==typeof n,"missing or invalid endian"),J(e+3<t.length,"Trying to read beyond buffer length")),Q.read(t,e,n,23,4)}function I(t,e,n,i){return i||(J("boolean"==typeof n,"missing or invalid endian"),J(e+7<t.length,"Trying to read beyond buffer length")),Q.read(t,e,n,52,8)}function T(t,e,n,i,r){r||(J(void 0!==e&&null!==e,"missing value"),J("boolean"==typeof i,"missing or invalid endian"),J(void 0!==n&&null!==n,"missing offset"),J(n+1<t.length,"trying to write beyond buffer length"),W(e,65535));var o=t.length;if(!(n>=o))for(var a=0,s=Math.min(o-n,2);a<s;a++)t[n+a]=(e&255<<8*(i?a:1-a))>>>8*(i?a:1-a)}function A(t,e,n,i,r){r||(J(void 0!==e&&null!==e,"missing value"),J("boolean"==typeof i,"missing or invalid endian"),J(void 0!==n&&null!==n,"missing offset"),J(n+3<t.length,"trying to write beyond buffer length"),W(e,4294967295));var o=t.length;if(!(n>=o))for(var a=0,s=Math.min(o-n,4);a<s;a++)t[n+a]=e>>>8*(i?a:3-a)&255}function O(t,e,n,i,r){r||(J(void 0!==e&&null!==e,"missing value"),J("boolean"==typeof i,"missing or invalid endian"),J(void 0!==n&&null!==n,"missing offset"),J(n+1<t.length,"Trying to write beyond buffer length"),X(e,32767,-32768)),n>=t.length||(e>=0?T(t,e,n,i,r):T(t,65535+e+1,n,i,r))}function F(t,e,n,i,r){r||(J(void 0!==e&&null!==e,"missing value"),J("boolean"==typeof i,"missing or invalid endian"),J(void 0!==n&&null!==n,"missing offset"),J(n+3<t.length,"Trying to write beyond buffer length"),X(e,2147483647,-2147483648)),n>=t.length||(e>=0?A(t,e,n,i,r):A(t,4294967295+e+1,n,i,r))}function M(t,e,n,i,r){r||(J(void 0!==e&&null!==e,"missing value"),J("boolean"==typeof i,"missing or invalid endian"),J(void 0!==n&&null!==n,"missing offset"),J(n+3<t.length,"Trying to write beyond buffer length"),Y(e,3.4028234663852886e38,-3.4028234663852886e38)),n>=t.length||Q.write(t,e,n,i,23,4)}function L(t,e,n,i,r){r||(J(void 0!==e&&null!==e,"missing value"),J("boolean"==typeof i,"missing or invalid endian"),J(void 0!==n&&null!==n,"missing offset"),J(n+7<t.length,"Trying to write beyond buffer length"),Y(e,1.7976931348623157e308,-1.7976931348623157e308)),n>=t.length||Q.write(t,e,n,i,52,8)}function D(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function U(t,e,n){return"number"!=typeof t?n:(t=~~t,t>=e?e:t>=0?t:(t+=e,t>=0?t:0))}function P(t){return t=~~Math.ceil(+t),t<0?0:t}function B(t){return(Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)})(t)}function N(t){return B(t)||r.isBuffer(t)||t&&"object"==typeof t&&"number"==typeof t.length}function z(t){return t<16?"0"+t.toString(16):t.toString(16)}function $(t){for(var e=[],n=0;n<t.length;n++){var i=t.charCodeAt(n);if(i<=127)e.push(t.charCodeAt(n));else{var r=n;i>=55296&&i<=57343&&n++;for(var o=encodeURIComponent(t.slice(r,n+1)).substr(1).split("%"),a=0;a<o.length;a++)e.push(parseInt(o[a],16))}}return e}function j(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e}function q(t){for(var e,n,i,r=[],o=0;o<t.length;o++)e=t.charCodeAt(o),n=e>>8,i=e%256,r.push(i),r.push(n);return r}function H(t){return K.toByteArray(t)}function G(t,e,n,i){for(var r=0;r<i&&!(r+n>=e.length||r>=t.length);r++)e[r+n]=t[r];return r}function V(t){try{return decodeURIComponent(t)}catch(t){return String.fromCharCode(65533)}}function W(t,e){J("number"==typeof t,"cannot write a non-number as a number"),J(t>=0,"specified a negative value for writing an unsigned value"),J(t<=e,"value is larger than maximum value for type"),J(Math.floor(t)===t,"value has a fractional component")}function X(t,e,n){J("number"==typeof t,"cannot write a non-number as a number"),J(t<=e,"value larger than maximum allowed value"),J(t>=n,"value smaller than minimum allowed value"),J(Math.floor(t)===t,"value has a fractional component")}function Y(t,e,n){J("number"==typeof t,"cannot write a non-number as a number"),J(t<=e,"value larger than maximum allowed value"),J(t>=n,"value smaller than minimum allowed value")}function J(t,e){if(!t)throw new Error(e||"Failed assertion")}var K=t("base64-js"),Q=t("ieee754");n.Buffer=r,n.SlowBuffer=r,n.INSPECT_MAX_BYTES=50,r.poolSize=8192,r._useTypedArrays=function(){try{var t=new ArrayBuffer(0),e=new Uint8Array(t);return e.foo=function(){return 42},42===e.foo()&&"function"==typeof e.subarray}catch(t){return!1}}(),r.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.isBuffer=function(t){return!(null===t||void 0===t||!t._isBuffer)},r.byteLength=function(t,e){var n;switch(t+="",e||"utf8"){case"hex":n=t.length/2;break;case"utf8":case"utf-8":n=$(t).length;break;case"ascii":case"binary":case"raw":n=t.length;break;case"base64":n=H(t).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":n=2*t.length;break;default:throw new Error("Unknown encoding")}return n},r.concat=function(t,e){if(J(B(t),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===t.length)return new r(0);if(1===t.length)return t[0];var n;if("number"!=typeof e)for(e=0,n=0;n<t.length;n++)e+=t[n].length;var i=new r(e),o=0;for(n=0;n<t.length;n++){var a=t[n];a.copy(i,o),o+=a.length}return i},r.prototype.write=function(t,e,n,i){if(isFinite(e))isFinite(n)||(i=n,n=void 0);else{var r=i;i=e,e=n,n=r}e=Number(e)||0;var o=this.length-e;n?(n=Number(n))>o&&(n=o):n=o,i=String(i||"utf8").toLowerCase();var a;switch(i){case"hex":a=d(this,t,e,n);break;case"utf8":case"utf-8":a=f(this,t,e,n);break;case"ascii":a=p(this,t,e,n);break;case"binary":a=h(this,t,e,n);break;case"base64":a=m(this,t,e,n);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":a=g(this,t,e,n);break;default:throw new Error("Unknown encoding")}return a},r.prototype.toString=function(t,e,n){var i=this;if(t=String(t||"utf8").toLowerCase(),e=Number(e)||0,(n=void 0!==n?Number(n):n=i.length)===e)return"";var r;switch(t){case"hex":r=b(i,e,n);break;case"utf8":case"utf-8":r=_(i,e,n);break;case"ascii":r=y(i,e,n);break;case"binary":r=w(i,e,n);break;case"base64":r=v(i,e,n);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":r=x(i,e,n);break;default:throw new Error("Unknown encoding")}return r},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},r.prototype.copy=function(t,e,n,i){var o=this;if(n||(n=0),i||0===i||(i=this.length),e||(e=0),i!==n&&0!==t.length&&0!==o.length){J(i>=n,"sourceEnd < sourceStart"),J(e>=0&&e<t.length,"targetStart out of bounds"),J(n>=0&&n<o.length,"sourceStart out of bounds"),J(i>=0&&i<=o.length,"sourceEnd out of bounds"),i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var a=i-n;if(a<100||!r._useTypedArrays)for(var s=0;s<a;s++)t[s+e]=this[s+n];else t._set(this.subarray(n,n+a),e)}},r.prototype.slice=function(t,e){var n=this.length;if(t=U(t,n,0),e=U(e,n,n),r._useTypedArrays)return r._augment(this.subarray(t,e));for(var i=e-t,o=new r(i,void 0,!0),a=0;a<i;a++)o[a]=this[a+t];return o},r.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},r.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},r.prototype.readUInt8=function(t,e){if(e||(J(void 0!==t&&null!==t,"missing offset"),J(t<this.length,"Trying to read beyond buffer length")),!(t>=this.length))return this[t]},r.prototype.readUInt16LE=function(t,e){return E(this,t,!0,e)},r.prototype.readUInt16BE=function(t,e){return E(this,t,!1,e)},r.prototype.readUInt32LE=function(t,e){return C(this,t,!0,e)},r.prototype.readUInt32BE=function(t,e){return C(this,t,!1,e)},r.prototype.readInt8=function(t,e){if(e||(J(void 0!==t&&null!==t,"missing offset"),J(t<this.length,"Trying to read beyond buffer length")),!(t>=this.length)){return 128&this[t]?-1*(255-this[t]+1):this[t]}},r.prototype.readInt16LE=function(t,e){return S(this,t,!0,e)},r.prototype.readInt16BE=function(t,e){return S(this,t,!1,e)},r.prototype.readInt32LE=function(t,e){return k(this,t,!0,e)},r.prototype.readInt32BE=function(t,e){return k(this,t,!1,e)},r.prototype.readFloatLE=function(t,e){return R(this,t,!0,e)},r.prototype.readFloatBE=function(t,e){return R(this,t,!1,e)},r.prototype.readDoubleLE=function(t,e){return I(this,t,!0,e)},r.prototype.readDoubleBE=function(t,e){return I(this,t,!1,e)},r.prototype.writeUInt8=function(t,e,n){n||(J(void 0!==t&&null!==t,"missing value"),J(void 0!==e&&null!==e,"missing offset"),J(e<this.length,"trying to write beyond buffer length"),W(t,255)),e>=this.length||(this[e]=t)},r.prototype.writeUInt16LE=function(t,e,n){T(this,t,e,!0,n)},r.prototype.writeUInt16BE=function(t,e,n){T(this,t,e,!1,n)},r.prototype.writeUInt32LE=function(t,e,n){A(this,t,e,!0,n)},r.prototype.writeUInt32BE=function(t,e,n){A(this,t,e,!1,n)},r.prototype.writeInt8=function(t,e,n){n||(J(void 0!==t&&null!==t,"missing value"),J(void 0!==e&&null!==e,"missing offset"),J(e<this.length,"Trying to write beyond buffer length"),X(t,127,-128)),e>=this.length||(t>=0?this.writeUInt8(t,e,n):this.writeUInt8(255+t+1,e,n))},r.prototype.writeInt16LE=function(t,e,n){O(this,t,e,!0,n)},r.prototype.writeInt16BE=function(t,e,n){O(this,t,e,!1,n)},r.prototype.writeInt32LE=function(t,e,n){F(this,t,e,!0,n)},r.prototype.writeInt32BE=function(t,e,n){F(this,t,e,!1,n)},r.prototype.writeFloatLE=function(t,e,n){M(this,t,e,!0,n)},r.prototype.writeFloatBE=function(t,e,n){M(this,t,e,!1,n)},r.prototype.writeDoubleLE=function(t,e,n){L(this,t,e,!0,n)},r.prototype.writeDoubleBE=function(t,e,n){L(this,t,e,!1,n)},r.prototype.fill=function(t,e,n){if(t||(t=0),e||(e=0),n||(n=this.length),"string"==typeof t&&(t=t.charCodeAt(0)),J("number"==typeof t&&!isNaN(t),"value is not a number"),J(n>=e,"end < start"),n!==e&&0!==this.length){J(e>=0&&e<this.length,"start out of bounds"),J(n>=0&&n<=this.length,"end out of bounds");for(var i=e;i<n;i++)this[i]=t}},r.prototype.inspect=function(){for(var t=[],e=this.length,i=0;i<e;i++)if(t[i]=z(this[i]),i===n.INSPECT_MAX_BYTES){t[i+1]="...";break}return"<Buffer "+t.join(" ")+">"},r.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(r._useTypedArrays)return new r(this).buffer;for(var t=new Uint8Array(this.length),e=0,n=t.length;e<n;e+=1)t[e]=this[e];return t.buffer}throw new Error("Buffer.toArrayBuffer not supported in this browser")};var Z=r.prototype;r._augment=function(t){return t._isBuffer=!0,t._get=t.get,t._set=t.set,t.get=Z.get,t.set=Z.set,t.write=Z.write,t.toString=Z.toString,t.toLocaleString=Z.toString,t.toJSON=Z.toJSON,t.copy=Z.copy,t.slice=Z.slice,t.readUInt8=Z.readUInt8,t.readUInt16LE=Z.readUInt16LE,t.readUInt16BE=Z.readUInt16BE,t.readUInt32LE=Z.readUInt32LE,t.readUInt32BE=Z.readUInt32BE,t.readInt8=Z.readInt8,t.readInt16LE=Z.readInt16LE,t.readInt16BE=Z.readInt16BE,t.readInt32LE=Z.readInt32LE,t.readInt32BE=Z.readInt32BE,t.readFloatLE=Z.readFloatLE,t.readFloatBE=Z.readFloatBE,t.readDoubleLE=Z.readDoubleLE,t.readDoubleBE=Z.readDoubleBE,t.writeUInt8=Z.writeUInt8,t.writeUInt16LE=Z.writeUInt16LE,t.writeUInt16BE=Z.writeUInt16BE,t.writeUInt32LE=Z.writeUInt32LE,t.writeUInt32BE=Z.writeUInt32BE,t.writeInt8=Z.writeInt8,t.writeInt16LE=Z.writeInt16LE,t.writeInt16BE=Z.writeInt16BE,t.writeInt32LE=Z.writeInt32LE,t.writeInt32BE=Z.writeInt32BE,t.writeFloatLE=Z.writeFloatLE,t.writeFloatBE=Z.writeFloatBE,t.writeDoubleLE=Z.writeDoubleLE,t.writeDoubleBE=Z.writeDoubleBE,t.fill=Z.fill,t.inspect=Z.inspect,t.toArrayBuffer=Z.toArrayBuffer,t}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:11,lYpoI2:10}],4:[function(t,e,n){(function(n,i,r,o,a,s,u,l,c){function d(t,e){if(t.length%h!=0){var n=t.length+(h-t.length%h);t=r.concat([t,m],n)}for(var i=[],o=e?t.readInt32BE:t.readInt32LE,a=0;a<t.length;a+=h)i.push(o.call(t,a));return i}function f(t,e,n){for(var i=new r(e),o=n?i.writeInt32BE:i.writeInt32LE,a=0;a<t.length;a++)o.call(i,t[a],4*a,!0);return i}function p(t,e,n,i){return r.isBuffer(t)||(t=new r(t)),f(e(d(t,i),t.length*g),n,i)}var r=t("buffer").Buffer,h=4,m=new r(h);m.fill(0);var g=8;e.exports={hash:p}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:10}],5:[function(t,e,n){(function(e,i,r,o,a,s,u,l,c){function d(t,e,n){r.isBuffer(e)||(e=new r(e)),r.isBuffer(n)||(n=new r(n)),e.length>y?e=t(e):e.length<y&&(e=r.concat([e,w],y));for(var i=new r(y),o=new r(y),a=0;a<y;a++)i[a]=54^e[a],o[a]=92^e[a];var s=t(r.concat([i,n]));return t(r.concat([o,s]))}function f(t,e){t=t||"sha1";var n=_[t],i=[],o=0;return n||p("algorithm:",t,"is not yet supported"),{update:function(t){return r.isBuffer(t)||(t=new r(t)),i.push(t),o+=t.length,this},digest:function(t){var o=r.concat(i),a=e?d(n,e,o):n(o);return i=null,t?a.toString(t):a}}}function p(){var t=[].slice.call(arguments).join(" ");throw new Error([t,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}var r=t("buffer").Buffer,h=t("./sha"),m=t("./sha256"),g=t("./rng"),v=t("./md5"),_={sha1:h,sha256:m,md5:v},y=64,w=new r(y);w.fill(0),n.createHash=function(t){return f(t)},n.createHmac=function(t,e){return f(t,e)},n.randomBytes=function(t,e){if(!e||!e.call)return new r(g(t));try{e.call(this,void 0,new r(g(t)))}catch(t){e(t)}},function(t,e){for(var n in t)e(t[n],n)}(["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],function(t){n[t]=function(){p("sorry,",t,"is not implemented yet")}})}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:10}],6:[function(t,e,n){(function(n,i,r,o,a,s,u,l,c){function d(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;for(var n=1732584193,i=-271733879,r=-1732584194,o=271733878,a=0;a<t.length;a+=16){var s=n,u=i,l=r,c=o;n=p(n,i,r,o,t[a+0],7,-680876936),o=p(o,n,i,r,t[a+1],12,-389564586),r=p(r,o,n,i,t[a+2],17,606105819),i=p(i,r,o,n,t[a+3],22,-1044525330),n=p(n,i,r,o,t[a+4],7,-176418897),o=p(o,n,i,r,t[a+5],12,1200080426),r=p(r,o,n,i,t[a+6],17,-1473231341),i=p(i,r,o,n,t[a+7],22,-45705983),n=p(n,i,r,o,t[a+8],7,1770035416),o=p(o,n,i,r,t[a+9],12,-1958414417),r=p(r,o,n,i,t[a+10],17,-42063),i=p(i,r,o,n,t[a+11],22,-1990404162),n=p(n,i,r,o,t[a+12],7,1804603682),o=p(o,n,i,r,t[a+13],12,-40341101),r=p(r,o,n,i,t[a+14],17,-1502002290),i=p(i,r,o,n,t[a+15],22,1236535329),n=h(n,i,r,o,t[a+1],5,-165796510),o=h(o,n,i,r,t[a+6],9,-1069501632),r=h(r,o,n,i,t[a+11],14,643717713),i=h(i,r,o,n,t[a+0],20,-373897302),n=h(n,i,r,o,t[a+5],5,-701558691),o=h(o,n,i,r,t[a+10],9,38016083),r=h(r,o,n,i,t[a+15],14,-660478335),i=h(i,r,o,n,t[a+4],20,-405537848),n=h(n,i,r,o,t[a+9],5,568446438),o=h(o,n,i,r,t[a+14],9,-1019803690),r=h(r,o,n,i,t[a+3],14,-187363961),i=h(i,r,o,n,t[a+8],20,1163531501),n=h(n,i,r,o,t[a+13],5,-1444681467),o=h(o,n,i,r,t[a+2],9,-51403784),r=h(r,o,n,i,t[a+7],14,1735328473),i=h(i,r,o,n,t[a+12],20,-1926607734),n=m(n,i,r,o,t[a+5],4,-378558),o=m(o,n,i,r,t[a+8],11,-2022574463),r=m(r,o,n,i,t[a+11],16,1839030562),i=m(i,r,o,n,t[a+14],23,-35309556),n=m(n,i,r,o,t[a+1],4,-1530992060),o=m(o,n,i,r,t[a+4],11,1272893353),r=m(r,o,n,i,t[a+7],16,-155497632),i=m(i,r,o,n,t[a+10],23,-1094730640),n=m(n,i,r,o,t[a+13],4,681279174),o=m(o,n,i,r,t[a+0],11,-358537222),r=m(r,o,n,i,t[a+3],16,-722521979),i=m(i,r,o,n,t[a+6],23,76029189),n=m(n,i,r,o,t[a+9],4,-640364487),o=m(o,n,i,r,t[a+12],11,-421815835),r=m(r,o,n,i,t[a+15],16,530742520),i=m(i,r,o,n,t[a+2],23,-995338651),n=g(n,i,r,o,t[a+0],6,-198630844),o=g(o,n,i,r,t[a+7],10,1126891415),r=g(r,o,n,i,t[a+14],15,-1416354905),i=g(i,r,o,n,t[a+5],21,-57434055),n=g(n,i,r,o,t[a+12],6,1700485571),o=g(o,n,i,r,t[a+3],10,-1894986606),r=g(r,o,n,i,t[a+10],15,-1051523),i=g(i,r,o,n,t[a+1],21,-2054922799),n=g(n,i,r,o,t[a+8],6,1873313359),o=g(o,n,i,r,t[a+15],10,-30611744),r=g(r,o,n,i,t[a+6],15,-1560198380),i=g(i,r,o,n,t[a+13],21,1309151649),n=g(n,i,r,o,t[a+4],6,-145523070),o=g(o,n,i,r,t[a+11],10,-1120210379),r=g(r,o,n,i,t[a+2],15,718787259),i=g(i,r,o,n,t[a+9],21,-343485551),n=v(n,s),i=v(i,u),r=v(r,l),o=v(o,c)}return Array(n,i,r,o)}function f(t,e,n,i,r,o){return v(_(v(v(e,t),v(i,o)),r),n)}function p(t,e,n,i,r,o,a){return f(e&n|~e&i,t,e,r,o,a)}function h(t,e,n,i,r,o,a){return f(e&i|n&~i,t,e,r,o,a)}function m(t,e,n,i,r,o,a){return f(e^n^i,t,e,r,o,a)}function g(t,e,n,i,r,o,a){return f(n^(e|~i),t,e,r,o,a)}function v(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function _(t,e){return t<<e|t>>>32-e}var y=t("./helpers");e.exports=function(t){return y.hash(t,d,16)}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:10}],7:[function(t,e,n){(function(t,n,i,r,o,a,s,u,l){!function(){var t,n,i=this;t=function(t){for(var e,e,n=new Array(t),i=0;i<t;i++)0==(3&i)&&(e=4294967296*Math.random()),n[i]=e>>>((3&i)<<3)&255;return n},i.crypto&&crypto.getRandomValues&&(n=function(t){var e=new Uint8Array(t);return crypto.getRandomValues(e),e}),e.exports=n||t}()}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:10}],8:[function(t,e,n){(function(n,i,r,o,a,s,u,l,c){function d(t,e){t[e>>5]|=128<<24-e%32,t[15+(e+64>>9<<4)]=e;for(var n=Array(80),i=1732584193,r=-271733879,o=-1732584194,a=271733878,s=-1009589776,u=0;u<t.length;u+=16){for(var l=i,c=r,d=o,g=a,v=s,_=0;_<80;_++){n[_]=_<16?t[u+_]:m(n[_-3]^n[_-8]^n[_-14]^n[_-16],1);var y=h(h(m(i,5),f(_,r,o,a)),h(h(s,n[_]),p(_)));s=a,a=o,o=m(r,30),r=i,i=y}i=h(i,l),r=h(r,c),o=h(o,d),a=h(a,g),s=h(s,v)}return Array(i,r,o,a,s)}function f(t,e,n,i){return t<20?e&n|~e&i:t<40?e^n^i:t<60?e&n|e&i|n&i:e^n^i}function p(t){return t<20?1518500249:t<40?1859775393:t<60?-1894007588:-899497514}function h(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function m(t,e){return t<<e|t>>>32-e}var g=t("./helpers");e.exports=function(t){return g.hash(t,d,20,!0)}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:10}],9:[function(t,e,n){(function(n,i,r,o,a,s,u,l,c){var d=t("./helpers"),f=function(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n},p=function(t,e){return t>>>e|t<<32-e},h=function(t,e){return t>>>e},m=function(t,e,n){return t&e^~t&n},g=function(t,e,n){return t&e^t&n^e&n},v=function(t){return p(t,2)^p(t,13)^p(t,22)},_=function(t){return p(t,6)^p(t,11)^p(t,25)},y=function(t){return p(t,7)^p(t,18)^h(t,3)},w=function(t){return p(t,17)^p(t,19)^h(t,10)},b=function(t,e){var n,i,r,o,a,s,u,l,c,d,p,h,b=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),x=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),E=new Array(64);t[e>>5]|=128<<24-e%32,t[15+(e+64>>9<<4)]=e;for(var c=0;c<t.length;c+=16){n=x[0],i=x[1],r=x[2],o=x[3],a=x[4],s=x[5],u=x[6],l=x[7];for(var d=0;d<64;d++)E[d]=d<16?t[d+c]:f(f(f(w(E[d-2]),E[d-7]),y(E[d-15])),E[d-16]),p=f(f(f(f(l,_(a)),m(a,s,u)),b[d]),E[d]),h=f(v(n),g(n,i,r)),l=u,u=s,s=a,a=f(o,p),o=r,r=i,i=n,n=f(p,h);x[0]=f(n,x[0]),x[1]=f(i,x[1]),x[2]=f(r,x[2]),x[3]=f(o,x[3]),x[4]=f(a,x[4]),x[5]=f(s,x[5]),x[6]=f(u,x[6]),x[7]=f(l,x[7])}return x};e.exports=function(t){return d.hash(t,b,32,!0)}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:10}],10:[function(t,e,n){(function(t,n,i,r,o,a,s,u,l){function c(){}var t=e.exports={};t.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var n=[];return window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),n.length>0)){n.shift()()}},!0),function(t){n.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),t.title="browser",t.browser=!0,t.env={},t.argv=[],t.on=c,t.addListener=c,t.once=c,t.off=c,t.removeListener=c,t.removeAllListeners=c,t.emit=c,t.binding=function(t){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(t){throw new Error("process.chdir is not supported")}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:10}],11:[function(t,e,n){(function(t,e,i,r,o,a,s,u,l){n.read=function(t,e,n,i,r){var o,a,s=8*r-i-1,u=(1<<s)-1,l=u>>1,c=-7,d=n?r-1:0,f=n?-1:1,p=t[e+d];for(d+=f,o=p&(1<<-c)-1,p>>=-c,c+=s;c>0;o=256*o+t[e+d],d+=f,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=i;c>0;a=256*a+t[e+d],d+=f,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,i),o-=l}return(p?-1:1)*a*Math.pow(2,o-i)},n.write=function(t,e,n,i,r,o){var a,s,u,l=8*o-r-1,c=(1<<l)-1,d=c>>1,f=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,h=i?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),e+=a+d>=1?f/u:f*Math.pow(2,1-d),e*u>=2&&(a++,u/=2),a+d>=c?(s=0,a=c):a+d>=1?(s=(e*u-1)*Math.pow(2,r),a+=d):(s=e*Math.pow(2,d-1)*Math.pow(2,r),a=0));r>=8;t[n+p]=255&s,p+=h,s/=256,r-=8);for(a=a<<r|s,l+=r;l>0;t[n+p]=255&a,p+=h,a/=256,l-=8);t[n+p-h]|=128*m}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/ieee754/index.js","/node_modules/ieee754")},{buffer:3,lYpoI2:10}]},{},[1])(1)})},638:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"filter-column"},[n("Dropdown",{attrs:{placement:"bottom-end"}},[n("Button",{attrs:{type:"primary"}},[t._v("\r\n    \t\t选择列\r\n            "),n("Icon",{attrs:{type:"funnel"}})],1),t._v(" "),n("Dropdown-menu",{attrs:{slot:"list"},slot:"list"},[n("Dropdown-item",[n("Checkbox",{on:{"on-change":t.toggleSelect},nativeOn:{click:function(t){t.stopPropagation()}},model:{value:t.selectAll,callback:function(e){t.selectAll=e},expression:"selectAll"}},[t._v("全选")])],1),t._v(" "),t._l(t.items,function(e,i){return n("Dropdown-item",[n("Checkbox",{attrs:{disabled:e.disabled},nativeOn:{click:function(e){e.stopPropagation(),t.setKey(i)}},model:{value:e.show,callback:function(n){t.$set(e,"show",n)},expression:"item.show"}},[t._v(t._s(e.title))])],1)})],2)],1)],1)},r=[];i._withStripped=!0;var o={render:i,staticRenderFns:r};e.a=o},639:function(t,e,n){"use strict";var i=n(626),r=n(640),o=n(11),a=o(i.a,r.a,!1,null,null,null);a.options.__file="src/views/components/PerScope.vue",e.a=a.exports},640:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("label",[t._v("权限范围：")]),t._v(" "),n("ButtonGroup",[n("Button",{attrs:{type:"my"==t.type_value?"primary":"ghost",size:"small",icon:"android-person"},on:{click:function(e){t.type_value="my"}}},[t._v("我的\n            ")]),t._v(" "),n("Button",{attrs:{type:"all"==t.type_value?"primary":"ghost",size:"small",icon:"android-people",disabled:t.userPers.indexOf(t.per)<0},on:{click:function(e){t.type_value="all"}}},[t._v("所有\n            ")])],1)],1)},r=[];i._withStripped=!0;var o={render:i,staticRenderFns:r};e.a=o},648:function(t,e,n){"use strict";var i=n(649),r=n(659),o=n(11),a=o(i.a,r.a,!1,null,null,null);a.options.__file="src/views/components/DateRangePicker.vue",e.a=a.exports},649:function(t,e,n){"use strict";var i=n(207),r=n(1);e.a={mixins:[i.a],name:"DateRangePicker",props:{value:{type:Array},label:{type:String},size:{type:String}},methods:{dateChange:function(t){var e=this;this.date_arr=t,this.$emit("input",t),this.$nextTick(function(){e.dispatch("FormItem","on-form-change",t)})},ok:function(){this.$emit("on-change",this.date_arr)},clear:function(){this.date_arr[0]="",this.date_arr[1]="",this.$emit("on-change",this.date_arr)}},computed:{placeholder:function(){return this.label||"请选择日期"}},data:function(){return{date_arr:[],date_option:{shortcuts:[{text:"今天",value:function(){return r.b.today_range_time()}},{text:"本周",value:function(){return r.b.week_range_time()}},{text:"本月",value:function(){return r.b.month_range_time()}},{text:"最近一周",value:function(){return r.b.recent_week_range_time(1)}},{text:"最近一个月",value:function(){return r.b.recent_month_range_time(1)}},{text:"最近三个月",value:function(){return r.b.recent_month_range_time(3)}}]}}}}},659:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement;return(t._self._c||e)("Date-picker",{attrs:{type:"daterange",value:t.value,size:t.size,format:"yyyy-MM-dd",confirm:"",options:t.date_option,placeholder:t.placeholder},on:{"on-change":t.dateChange,"on-clear":t.clear,"on-ok":t.ok}})},r=[];i._withStripped=!0;var o={render:i,staticRenderFns:r};e.a=o},678:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=n(684),o=i(r),a=n(210),s=i(a);e.default=function(){function t(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,u=(0,s.default)(t);!(i=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&u.return&&u.return()}finally{if(r)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if((0,o.default)(Object(e)))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},684:function(t,e,n){t.exports={default:n(685),__esModule:!0}},685:function(t,e,n){n(36),n(26),t.exports=n(686)},686:function(t,e,n){var i=n(56),r=n(3)("iterator"),o=n(18);t.exports=n(2).isIterable=function(t){var e=Object(t);return void 0!==e[r]||"@@iterator"in e||o.hasOwnProperty(i(e))}},687:function(t,e,n){"use strict";function i(t){var e=[d.a.state.branch.mode,d.a.state.branch.id],n=e[0],i=e[1];return"multi"==n&&(i=d.a.state.branch.ids.join("-")),l.b.sprintf("%s-%s-%s",n,i,t)}function r(t,e){return e=!!l.a.isUndefined(e)||e,new u.a(function(n,r){var o=i(t);!l.a.isUndefined(f[o])&&e?n(f[o]):Object(c.a)(t).get().success(function(t){f[o]=t,n(t)}).error(function(t){r(t)})})}var o=n(211),a=n.n(o),s=n(9),u=n.n(s),l=n(1),c=n(34),d=n(24),f={};e.a={name:"DataReady",props:{data:{type:Array,default:function(){return[]}},cache:{type:Boolean,default:!1},fromLayout:{type:Boolean,default:!1}},mounted:function(){this.init_data()},data:function(){return{ready:!1}},computed:{loading:function(){return!1===this.ready}},watch:{data:function(t,e){a()(t[0])!=a()(e[0])&&this.init_data()}},methods:{init_data:function(){var t=this;if(0==this.data.length)return void(this.ready=!0);var e=[];this.data.forEach(function(n){l.a.isString(n)?""==n?e.push(n):e.push(r(n,t.cache)):l.a.isFunction(n)?e.push(n()):e.push(n)}),u.a.all(e).then(function(e){t.fromLayout?setTimeout(function(){t.ready=!0,t.$emit("ready",e)},1200):(t.ready=!0,t.$emit("ready",e))},function(e){t.$emit("error",e)})},getData:function(t,e){return r(t,e)},refreshData:function(t){var e=this;return new u.a(function(n,r){var o=i(t);Object(c.a)(t).get().success(function(i){f[o]=i,n(i),e.$emit("refresh",{url:t,response:i})}).error(function(t){r(t)})})}}}},694:function(t,e,n){"use strict";var i=n(54),r=n.n(i),o=n(753),a=n(1),s=n(207),u=n(755);e.a={name:"XUpload",mixins:[s.a,o.a],components:{UploadList:u.a},props:{headers:{type:Object,default:function(){return{}}},multiple:{type:Boolean,default:!1},data:{type:Object},name:{type:String,default:"file"},withCredentials:{type:Boolean,default:!1},showUploadList:{type:Boolean,default:!0},type:{type:String,validator:function(t){return Object(a.c)(t,["select","drag"])},default:"select"},format:{type:Array,default:function(){return[]}},accept:{type:String},maxSize:{type:Number},beforeUpload:Function,onProgress:{type:Function,default:function(){return{}}},onSuccess:{type:Function,default:function(){return{}}},onError:{type:Function,default:function(){return{}}},onRemove:{type:Function,default:function(){return{}}},onPreview:{type:Function,default:function(){return{}}},onExceededSize:{type:Function,default:function(){return{}}},onFormatError:{type:Function,default:function(){return{}}},defaultFileList:{type:Array,default:function(){return[]}}},data:function(){return{prefixCls:"ivu-upload",dragOver:!1,fileList:[],tempIndex:1,token:"",domain:""}},computed:{classes:function(){var t;return["ivu-upload",(t={},r()(t,"ivu-upload-select","select"===this.type),r()(t,"ivu-upload-drag","drag"===this.type),r()(t,"ivu-upload-dragOver","drag"===this.type&&this.dragOver),t)]},urlPrefix:function(){var t=this.$store.state.user.info.client.cid,e=this.$store.state.user.info.og_id;return""+this.prefix+t+"/"+e+"/"}},created:function(){this.getUpToken()},methods:{getUpToken:function(){var t=this;this.$http.get("upload").then(function(e){t.token=e.body.uptoken,t.domain=e.body.domain,t.prefix=e.body.prefix},function(t){console.log("------getUpTokenError"),console.log(t)})},handleClick:function(){this.$refs.input.click()},handleChange:function(t){var e=t.target.files;e&&(this.uploadFiles(e),this.$refs.input.value=null)},onDrop:function(t){this.dragOver=!1,this.uploadFiles(t.dataTransfer.files)},uploadFiles:function(t){var e=this,n=Array.prototype.slice.call(t);this.multiple||(n=n.slice(0,1)),0!==n.length&&n.forEach(function(t){e.upload(t)})},upload:function(t){var e=this;if(!this.beforeUpload)return this.post(t);var n=this.beforeUpload(t);n&&n.then?n.then(function(n){"[object File]"===Object.prototype.toString.call(n)?e.post(n):e.post(t)},function(){}):!1!==n&&this.post(t)},post:function(t){var e=this;if(this.format.length){var n=t.name.split(".").pop().toLocaleLowerCase();if(!this.format.some(function(t){return t.toLocaleLowerCase()===n}))return this.onFormatError(t,this.fileList),!1}if(this.maxSize&&t.size>1024*this.maxSize)return this.onExceededSize(t,this.fileList),!1;this.handleStart(t),(new FormData).append(this.name,t),this.ajax({headers:this.headers,withCredentials:this.withCredentials,file:t,data:this.data,token:this.token,filename:this.name,domain:this.domain,urlPrefix:this.urlPrefix,onProgress:function(n){e.handleProgress(n,t)},onSuccess:function(n){e.handleSuccess(n,t)},onError:function(n,i){e.handleError(n,i,t)}})},handleStart:function(t){t.uid=Date.now()+this.tempIndex++;var e={status:"uploading",name:t.name,size:t.size,percentage:0,uid:t.uid,showProgress:!0};this.fileList.push(e)},getFile:function(t){var e=this.fileList,n=void 0;return e.every(function(e){return!(n=t.uid===e.uid?e:null)}),n},handleProgress:function(t,e){var n=this.getFile(e);this.onProgress(t,n,this.fileList),n.percentage=t.percent||0},handleSuccess:function(t,e){var n=this.getFile(e);n&&(n.status="finished",n.response=t,this.saveMineFile(t,e),this.dispatch("FormItem","on-form-change",n),setTimeout(function(){n.showProgress=!1},1e3))},saveMineFile:function(t,e){var n=this,i=this.getFile(e),r={js_upload:1,file_url:""+this.domain+t["x:name"],file_name:e.name,file_size:e.size,file_type:e.name.split(".")[1]};this.$rest("upload").post(r).success(function(t){console.log("------saveMineFileSuccess"),console.log(t),n.onSuccess(t,i,n.fileList)}).error(function(t){console.log("------saveMineFileError"),console.log(t)})},handleError:function(t,e,n){var i=this.getFile(n),r=this.fileList;i.status="fail",r.splice(r.indexOf(i),1),this.onError(t,e,n)},handleRemove:function(t){var e=this.fileList;e.splice(e.indexOf(t),1),this.onRemove(t,e)},handlePreview:function(t){"finished"===t.status&&this.onPreview(t)},clearFiles:function(){this.fileList=[]}},watch:{defaultFileList:{immediate:!0,handler:function(t){var e=this;this.fileList=t.map(function(t){return t.status="finished",t.percentage=100,t.uid=Date.now()+e.tempIndex++,t})}}}}},695:function(t,e,n){"use strict";var i=n(54),r=n.n(i);e.a={name:"UploadList",props:{files:{type:Array,default:function(){return[]}}},data:function(){return{prefixCls:"ivu-upload"}},methods:{fileCls:function(t){return["ivu-upload-list-file",r()({},"ivu-upload-list-file-finish","finished"===t.status)]},handleClick:function(t){this.$emit("on-file-click",t)},handlePreview:function(t){this.$emit("on-file-preview",t)},handleRemove:function(t){this.$emit("on-file-remove",t)},format:function(t){var e=t.name.split(".").pop().toLocaleLowerCase()||"",n="document";return["gif","jpg","jpeg","png","bmp","webp"].indexOf(e)>-1&&(n="image"),["mp4","m3u8","rmvb","avi","swf","3gp","mkv","flv"].indexOf(e)>-1&&(n="ios-film"),["mp3","wav","wma","ogg","aac","flac"].indexOf(e)>-1&&(n="ios-musical-notes"),["doc","txt","docx","pages","epub","pdf"].indexOf(e)>-1&&(n="document-text"),["numbers","csv","xls","xlsx"].indexOf(e)>-1&&(n="stats-bars"),["keynote","ppt","pptx"].indexOf(e)>-1&&(n="ios-videocam"),n},parsePercentage:function(t){return parseInt(t,10)}}}},696:function(t,e,n){"use strict";function i(t){a||n(711)}var r=n(687),o=n(712),a=!1,s=n(11),u=i,l=s(r.a,o.a,!1,u,null,null);l.options.__file="src/views/components/DataReady.vue",e.a=l.exports},707:function(t,e,n){"use strict";e.a={props:{src:{type:String,default:""},active:{type:Boolean,default:!1}},data:function(){return{isPlaying:!1}},watch:{active:function(t){t?this.play():this.ended()}},methods:{togglePlay:function(){this.isPlaying=!this.isPlaying,this.isPlaying?this.play():this.stop()},play:function(){this.isPlaying=!0,this.$refs.player.play()},stop:function(){this.$refs.player.pause()},ended:function(){this.$refs.player.currentTime=0,this.isPlaying=!1,this.$refs.player.pause()}}}},709:function(t,e,n){t.exports=n.p+"27c88f0834d64f4eb6e8c6ed65cbbc01.gif"},711:function(t,e){},712:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.ready?[t._t("default")]:i("Spin",{attrs:{fix:""}},[t.fromLayout?i("img",{attrs:{src:n(709)}}):i("Icon",{staticClass:"demo-spin-icon-load",attrs:{type:"load-c",size:"18"}}),t._v(" "),i("div",[t._v("数据加载中...")])],1)],2)},r=[];i._withStripped=!0;var o={render:i,staticRenderFns:r};e.a=o},748:function(t,e,n){"use strict";var i=n(752);e.a=i.a},751:function(t,e,n){"use strict";function i(t){a||n(770)}var r=n(707),o=n(771),a=!1,s=n(11),u=i,l=s(r.a,o.a,!1,u,null,null);l.options.__file="src/views/components/playVoice.vue",e.a=l.exports},752:function(t,e,n){"use strict";var i=n(694),r=n(757),o=n(11),a=o(i.a,r.a,!1,null,null,null);a.options.__file="src/views/components/xupload/upload.vue",e.a=a.exports},753:function(t,e,n){"use strict";function i(t,e){for(var n=n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],i="",r=e.name.split(".")[1],o=0;o<32;o++){i+=n[Math.round(Math.random()*(n.length-1))]}return""+t+i+"."+r}var r=n(754);n.n(r);e.a={data:function(){return{observable:null,subscription:null,subObject:{}}},methods:{qiniuHandleStart:function(){this.subscription=this.observable.subscribe(this.subObject)},qiniuHandlePause:function(){this.subscription.unsubscribe()},ajax:function(t){var e=t.file,n=i(t.urlPrefix,t.file),o=t.token,a=(t.domain,[]),s=[],u={useCdnDomain:!0,disableStatisticsReport:!1,retryCount:6,region:r.region.z2},l={fname:"",params:{"x:name":n},mimeType:null},c=function(e){for(var n=e.chunks||[],i=e.total,r=0;r<n.length;r++)0===n[r].percent||a[r]||s[r].percent!==n[r].percent&&100===n[r].percent&&(a[r]=!0);e.percent=i.percent,t.onProgress(e),s=n},d=function(e){t.onError(e.message,e)},f=function(e){t.onSuccess(e)};this.subObject={next:c,error:d,complete:f},this.observable=r.upload(e,n,o,l,u),this.qiniuHandleStart()}}}},754:function(t,e,i){!function(e,n){t.exports=n()}("undefined"!=typeof self&&self,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/dist/",e(e.s=58)}([function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){var n=t.exports={version:"2.5.7"};"number"==typeof __e&&(__e=n)},function(t,e,n){var i=n(30)("wks"),r=n(22),o=n(0).Symbol,a="function"==typeof o;(t.exports=function(t){return i[t]||(i[t]=a&&o[t]||(a?o:r)("Symbol."+t))}).store=i},function(t,e,n){var i=n(7);t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){var i=n(0),r=n(1),o=n(19),a=n(5),s=n(9),u=function(t,e,n){var l,c,d,f=t&u.F,p=t&u.G,h=t&u.S,m=t&u.P,g=t&u.B,v=t&u.W,_=p?r:r[e]||(r[e]={}),y=_.prototype,w=p?i:h?i[e]:(i[e]||{}).prototype;for(l in p&&(n=e),n)(c=!f&&w&&void 0!==w[l])&&s(_,l)||(d=c?w[l]:n[l],_[l]=p&&"function"!=typeof w[l]?n[l]:g&&c?o(d,i):v&&w[l]==d?function(t){var e=function(e,n,i){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,i)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(d):m&&"function"==typeof d?o(Function.call,d):d,m&&((_.virtual||(_.virtual={}))[l]=d,t&u.R&&y&&!y[l]&&a(y,l,d)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e,n){var i=n(6),r=n(21);t.exports=n(8)?function(t,e,n){return i.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var i=n(3),r=n(43),o=n(28),a=Object.defineProperty;e.f=n(8)?Object.defineProperty:function(t,e,n){if(i(t),e=o(e,!0),i(n),r)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){t.exports=!n(10)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var i=n(47),r=n(26);t.exports=function(t){return i(r(t))}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){return(0,h.default)(t).filter(function(t){return t.startsWith("x:")}).map(function(e){return[e,t[e].toString()]})}function o(t){return"qiniu_js_sdk_upload_file_"+t.name+"_size_"+t.size}function a(t){return{Authorization:"UpToken "+t}}function s(){return window.XMLHttpRequest?new XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP")}function u(t){return new d.default(function(e,n){var i=new FileReader;i.readAsArrayBuffer(t),i.onload=function(t){var n=t.target.result;e(n)},i.onerror=function(){n(new Error("fileReader 读取错误"))}})}function l(t,e){return new d.default(function(n,i){var r=s();r.open(e.method,t),e.onCreate&&e.onCreate(r),e.headers&&(0,h.default)(e.headers).forEach(function(t){return r.setRequestHeader(t,e.headers[t])}),r.upload.addEventListener("progress",function(t){t.lengthComputable&&e.onProgress&&e.onProgress({loaded:t.loaded,total:t.total})}),r.onreadystatechange=function(){var t=r.responseText;if(4===r.readyState){var e=r.getResponseHeader("x-reqId")||"";if(200!==r.status){var o="xhr request failed, code: "+r.status+";";return t&&(o=o+" response: "+t),void i({code:r.status,message:o,reqId:e,isRequestError:!0})}try{n({data:JSON.parse(t),reqId:e})}catch(t){i(t)}}},r.send(e.body)})}function c(){return"http:"===window.location.protocol?"http:":"https:"}e.__esModule=!0;var d=i(n(18)),f=i(n(34)),p=i(n(86)),h=i(n(36));e.isChunkExpired=function(t){var e=t+864e5;return(new Date).getTime()>e},e.getChunks=function(t,e){for(var n=[],i=Math.ceil(t.size/e),r=0;r<i;r++){var o=t.slice(e*r,r===i-1?t.size:e*(r+1));n.push(o)}return n},e.filterParams=r,e.sum=function(t){return t.reduce(function(t,e){return t+e},0)},e.setLocalFileInfo=function(t,e){try{localStorage.setItem(o(t),(0,p.default)(e))}catch(t){window.console&&window.console.warn&&console.warn("setLocalFileInfo failed")}},e.removeLocalFileInfo=function(t){try{localStorage.removeItem(o(t))}catch(t){window.console&&window.console.warn&&console.warn("removeLocalFileInfo failed")}},e.getLocalFileInfo=function(t){try{return JSON.parse(localStorage.getItem(o(t)))||[]}catch(t){return window.console&&window.console.warn&&console.warn("getLocalFileInfo failed"),[]}},e.createMkFileUrl=function(t,e,n,i){var o=t+"/mkfile/"+e;null!=n&&(o+="/key/"+(0,m.urlSafeBase64Encode)(n)),i.mimeType&&(o+="/mimeType/"+(0,m.urlSafeBase64Encode)(i.mimeType));var a=i.fname;return a&&(o+="/fname/"+(0,m.urlSafeBase64Encode)(a)),i.params&&r(i.params).forEach(function(t){return o+="/"+encodeURIComponent(t[0])+"/"+(0,m.urlSafeBase64Encode)(t[1])}),o},e.getHeadersForChunkUpload=function(t){var e=a(t);return(0,f.default)({"content-type":"application/octet-stream"},e)},e.getHeadersForMkFile=function(t){var e=a(t);return(0,f.default)({"content-type":"text/plain"},e)},e.createXHR=s,e.computeMd5=function(t){return u(t).then(function(t){var e=new v.default.ArrayBuffer;return e.append(t),e.end()})},e.readAsArrayBuffer=u,e.request=l,e.getPortFromUrl=function(t){if(t&&t.match){var e=t.match(/(^https?)/);if(!e)return"";var n=e[1];return(e=t.match(/^https?:\/\/([^:^\/]*):(\d*)/))?e[2]:"http"===n?"80":"443"}return""},e.getDomainFromUrl=function(t){if(t&&t.match){var e=t.match(/^https?:\/\/([^:^\/]*)/);return e?e[1]:""}return""},e.getUploadUrl=function(t,e){var n=c();if(null!=t.uphost)return d.default.resolve(n+"//"+t.uphost);if(null!=t.region){var i=g.regionUphostMap[t.region],r=t.useCdnDomain?i.cdnUphost:i.srcUphost;return d.default.resolve(n+"//"+r)}return function(t){try{var e=function(t){var e=t.split(":"),n=e[0],i=JSON.parse((0,m.urlSafeBase64Decode)(e[2]));return i.ak=n,i.bucket=i.scope.split(":")[0],i}(t);return l(c()+"//api.qiniu.com/v2/query?ak="+e.ak+"&bucket="+e.bucket,{method:"GET"})}catch(t){return d.default.reject(t)}}(e).then(function(t){var e=t.data.up.acc.main;return n+"//"+e[0]})},e.isContainFileMimeType=function(t,e){return e.indexOf(t)>-1},e.createObjectURL=function(t){return(window.URL||window.webkitURL||window.mozURL).createObjectURL(t)},e.getTransform=function(t,e){var n=t.width,i=t.height;switch(e){case 1:return{width:n,height:i,matrix:[1,0,0,1,0,0]};case 2:return{width:n,height:i,matrix:[-1,0,0,1,n,0]};case 3:return{width:n,height:i,matrix:[-1,0,0,-1,n,i]};case 4:return{width:n,height:i,matrix:[1,0,0,-1,0,i]};case 5:return{width:i,height:n,matrix:[0,1,1,0,0,0]};case 6:return{width:i,height:n,matrix:[0,1,-1,0,i,0]};case 7:return{width:i,height:n,matrix:[0,-1,-1,0,i,n]};case 8:return{width:i,height:n,matrix:[0,-1,1,0,0,n]}}};var m=n(56),g=n(39),v=i(n(91))},function(t,e){t.exports=!0},function(t,e){t.exports={}},function(t,e,n){var i=n(46),r=n(31);t.exports=Object.keys||function(t){return i(t,r)}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){t.exports={default:n(59),__esModule:!0}},function(t,e,n){var i=n(20);t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+i).toString(36))}},function(t,e,n){var i=n(6).f,r=n(9),o=n(2)("toStringTag");t.exports=function(t,e,n){t&&!r(t=n?t:t.prototype,o)&&i(t,o,{configurable:!0,value:e})}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var i=n(7),r=n(0).document,o=i(r)&&i(r.createElement);t.exports=function(t){return o?r.createElement(t):{}}},function(t,e,n){var i=n(7);t.exports=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var i=n(30)("keys"),r=n(22);t.exports=function(t){return i[t]||(i[t]=r(t))}},function(t,e,n){var i=n(1),r=n(0),o=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:i.version,mode:n(13)?"pure":"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var i=n(26);t.exports=function(t){return Object(i(t))}},function(t,e,n){"use strict";var i=n(20);t.exports.f=function(t){return new function(t){var e,n;this.promise=new t(function(t,i){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=i}),this.resolve=i(e),this.reject=i(n)}(t)}},function(t,e,n){t.exports={default:n(83),__esModule:!0}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){t.exports={default:n(88),__esModule:!0}},function(t,e,n){e.f=n(2)},function(t,e,n){var i=n(0),r=n(1),o=n(13),a=n(37),s=n(6).f;t.exports=function(t){var e=r.Symbol||(r.Symbol=o?{}:i.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},function(t,e,n){"use strict";e.__esModule=!0,e.regionUphostMap={z0:{srcUphost:"up.qiniup.com",cdnUphost:"upload.qiniup.com"},z1:{srcUphost:"up-z1.qiniup.com",cdnUphost:"upload-z1.qiniup.com"},z2:{srcUphost:"up-z2.qiniup.com",cdnUphost:"upload-z2.qiniup.com"},na0:{srcUphost:"up-na0.qiniup.com",cdnUphost:"upload-na0.qiniup.com"},as0:{srcUphost:"up-as0.qiniup.com",cdnUphost:"upload-as0.qiniup.com"}},e.region={z0:"z0",z1:"z1",z2:"z2",na0:"na0",as0:"as0"}},function(t,e){},function(t,e,n){"use strict";var i=n(60)(!0);n(42)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=i(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){"use strict";var i=n(13),r=n(4),o=n(44),a=n(5),s=n(14),u=n(61),l=n(23),c=n(65),d=n(2)("iterator"),f=!([].keys&&"next"in[].keys()),p=function(){return this};t.exports=function(t,e,n,h,m,g,v){u(n,e,h);var _,y,w,b=function(t){if(!f&&t in S)return S[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},x=e+" Iterator",E="values"==m,C=!1,S=t.prototype,k=S[d]||S["@@iterator"]||m&&S[m],R=k||b(m),I=m?E?b("entries"):R:void 0,T="Array"==e&&S.entries||k;if(T&&(w=c(T.call(new t)))!==Object.prototype&&w.next&&(l(w,x,!0),i||"function"==typeof w[d]||a(w,d,p)),E&&k&&"values"!==k.name&&(C=!0,R=function(){return k.call(this)}),i&&!v||!f&&!C&&S[d]||a(S,d,R),s[e]=R,s[x]=p,m)if(_={values:E?R:b("values"),keys:g?R:b("keys"),entries:I},v)for(y in _)y in S||o(S,y,_[y]);else r(r.P+r.F*(f||C),e,_);return _}},function(t,e,n){t.exports=!n(8)&&!n(10)(function(){return 7!=Object.defineProperty(n(27)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){t.exports=n(5)},function(t,e,n){var i=n(3),r=n(62),o=n(31),a=n(29)("IE_PROTO"),s=function(){},u=function(){var t,e=n(27)("iframe"),i=o.length;for(e.style.display="none",n(49).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;i--;)delete u.prototype[o[i]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=i(t),n=new s,s.prototype=null,n[a]=t):n=u(),void 0===e?n:r(n,e)}},function(t,e,n){var i=n(9),r=n(11),o=n(63)(!1),a=n(29)("IE_PROTO");t.exports=function(t,e){var n,s=r(t),u=0,l=[];for(n in s)n!=a&&i(s,n)&&l.push(n);for(;e.length>u;)i(s,n=e[u++])&&(~o(l,n)||l.push(n));return l}},function(t,e,n){var i=n(16);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},function(t,e,n){var i=n(25),r=Math.min;t.exports=function(t){return t>0?r(i(t),9007199254740991):0}},function(t,e,n){var i=n(0).document;t.exports=i&&i.documentElement},function(t,e,n){n(66);for(var i=n(0),r=n(5),o=n(14),a=n(2)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<s.length;u++){var l=s[u],c=i[l],d=c&&c.prototype;d&&!d[a]&&r(d,a,l),o[l]=o.Array}},function(t,e,n){var i=n(16),r=n(2)("toStringTag"),o="Arguments"==i(function(){return arguments}());t.exports=function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),r))?n:o?i(e):"Object"==(a=i(e))&&"function"==typeof e.callee?"Arguments":a}},function(t,e,n){var i=n(3),r=n(20),o=n(2)("species");t.exports=function(t,e){var n,a=i(t).constructor;return void 0===a||void 0==(n=i(a)[o])?e:r(n)}},function(t,e,n){var i,r,o,a=n(19),s=n(75),u=n(49),l=n(27),c=n(0),d=c.process,f=c.setImmediate,p=c.clearImmediate,h=c.MessageChannel,m=c.Dispatch,g=0,v={},_=function(){var t=+this;if(v.hasOwnProperty(t)){var e=v[t];delete v[t],e()}},y=function(t){_.call(t.data)};f&&p||(f=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return v[++g]=function(){s("function"==typeof t?t:Function(t),e)},i(g),g},p=function(t){delete v[t]},"process"==n(16)(d)?i=function(t){d.nextTick(a(_,t,1))}:m&&m.now?i=function(t){m.now(a(_,t,1))}:h?(o=(r=new h).port2,r.port1.onmessage=y,i=a(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(i=function(t){c.postMessage(t+"","*")},c.addEventListener("message",y,!1)):i="onreadystatechange"in l("script")?function(t){u.appendChild(l("script")).onreadystatechange=function(){u.removeChild(this),_.call(t)}}:function(t){setTimeout(a(_,t,1),0)}),t.exports={set:f,clear:p}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,n){var i=n(3),r=n(7),o=n(33);t.exports=function(t,e){if(i(t),r(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){"use strict";e.__esModule=!0,e.urlSafeBase64Encode=function(t){return(t=function(t){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n=void 0,i=void 0,r=void 0,o=void 0,a=void 0,s=void 0,u=void 0,l=void 0,c=0,d=0,f="",p=[];if(!t)return t;t=function(t){if(null===t||void 0===t)return"";var e=t+"",n="",i=void 0,r=void 0,o=0;i=r=0,o=e.length;for(var a=0;a<o;a++){var s=e.charCodeAt(a),u=null;if(s<128)r++;else if(s>127&&s<2048)u=String.fromCharCode(s>>6|192,63&s|128);else if(63488&s^!0)u=String.fromCharCode(s>>12|224,s>>6&63|128,63&s|128);else{if(64512&s^!0)throw new RangeError("Unmatched trail surrogate at "+a);var l=e.charCodeAt(++a);if(64512&l^!0)throw new RangeError("Unmatched lead surrogate at "+(a-1));s=((1023&s)<<10)+(1023&l)+65536,u=String.fromCharCode(s>>18|240,s>>12&63|128,s>>6&63|128,63&s|128)}null!==u&&(r>i&&(n+=e.slice(i,r)),n+=u,i=r=a+1)}return r>i&&(n+=e.slice(i,o)),n}(t+"");do{n=t.charCodeAt(c++),i=t.charCodeAt(c++),r=t.charCodeAt(c++),o=(l=n<<16|i<<8|r)>>18&63,a=l>>12&63,s=l>>6&63,u=63&l,p[d++]=e.charAt(o)+e.charAt(a)+e.charAt(s)+e.charAt(u)}while(c<t.length);switch(f=p.join(""),t.length%3){case 1:f=f.slice(0,-2)+"==";break;case 2:f=f.slice(0,-1)+"="}return f}(t)).replace(/\//g,"_").replace(/\+/g,"-")},e.urlSafeBase64Decode=function(t){return function(t){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n=void 0,i=void 0,r=void 0,o=void 0,a=void 0,s=void 0,u=void 0,l=void 0,c=0,d=0,f=[];if(!t)return t;t+="";do{o=e.indexOf(t.charAt(c++)),a=e.indexOf(t.charAt(c++)),s=e.indexOf(t.charAt(c++)),u=e.indexOf(t.charAt(c++)),n=(l=o<<18|a<<12|s<<6|u)>>16&255,i=l>>8&255,r=255&l,f[d++]=64===s?String.fromCharCode(n):64===u?String.fromCharCode(n,i):String.fromCharCode(n,i,r)}while(c<t.length);return f.join("")}(t=t.replace(/_/g,"/").replace(/-/g,"+"))}},function(t,e,n){var i=n(46),r=n(31).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,r)}},function(t,e,n){"use strict";e.__esModule=!0,e.pipeline=e.compressImage=e.exif=e.imageInfo=e.watermark=e.imageMogr2=e.getUploadUrl=e.filterParams=e.getHeadersForMkFile=e.getHeadersForChunkUpload=e.createMkFileUrl=e.region=e.upload=void 0;var i=n(39),r=n(12),o=n(92),a=n(94),s=n(95),u=n(109),l=function(t){return t&&t.__esModule?t:{default:t}}(n(110)),c=new u.StatisticsLogger;e.upload=function(t,e,n,i,r){var a={file:t,key:e,token:n,putExtra:i,config:r};return new s.Observable(function(t){var e=new o.UploadManager(a,{onData:function(e){return t.next(e)},onError:function(e){return t.error(e)},onComplete:function(e){return t.complete(e)}},c);return e.putFile(),e.stop.bind(e)})},e.region=i.region,e.createMkFileUrl=r.createMkFileUrl,e.getHeadersForChunkUpload=r.getHeadersForChunkUpload,e.getHeadersForMkFile=r.getHeadersForMkFile,e.filterParams=r.filterParams,e.getUploadUrl=r.getUploadUrl,e.imageMogr2=a.imageMogr2,e.watermark=a.watermark,e.imageInfo=a.imageInfo,e.exif=a.exif,e.compressImage=l.default,e.pipeline=a.pipeline},function(t,e,n){n(40),n(41),n(50),n(69),n(81),n(82),t.exports=n(1).Promise},function(t,e,n){var i=n(25),r=n(26);t.exports=function(t){return function(e,n){var o,a,s=String(r(e)),u=i(n),l=s.length;return u<0||u>=l?t?"":void 0:(o=s.charCodeAt(u))<55296||o>56319||u+1===l||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):o:t?s.slice(u,u+2):a-56320+(o-55296<<10)+65536}}},function(t,e,n){"use strict";var i=n(45),r=n(21),o=n(23),a={};n(5)(a,n(2)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=i(a,{next:r(1,n)}),o(t,e+" Iterator")}},function(t,e,n){var i=n(6),r=n(3),o=n(15);t.exports=n(8)?Object.defineProperties:function(t,e){r(t);for(var n,a=o(e),s=a.length,u=0;s>u;)i.f(t,n=a[u++],e[n]);return t}},function(t,e,n){var i=n(11),r=n(48),o=n(64);t.exports=function(t){return function(e,n,a){var s,u=i(e),l=r(u.length),c=o(a,l);if(t&&n!=n){for(;l>c;)if((s=u[c++])!=s)return!0}else for(;l>c;c++)if((t||c in u)&&u[c]===n)return t||c||0;return!t&&-1}}},function(t,e,n){var i=n(25),r=Math.max,o=Math.min;t.exports=function(t,e){return(t=i(t))<0?r(t+e,0):o(t,e)}},function(t,e,n){var i=n(9),r=n(32),o=n(29)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),i(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,n){"use strict";var i=n(67),r=n(68),o=n(14),a=n(11);t.exports=n(42)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,r(1)):r(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){"use strict";var i,r,o,a,s=n(13),u=n(0),l=n(19),c=n(51),d=n(4),f=n(7),p=n(20),h=n(70),m=n(71),g=n(52),v=n(53).set,_=n(76)(),y=n(33),w=n(54),b=n(77),x=n(55),E=u.TypeError,C=u.process,S=C&&C.versions,k=S&&S.v8||"",R=u.Promise,I="process"==c(C),T=function(){},A=r=y.f,O=!!function(){try{var t=R.resolve(1),e=(t.constructor={})[n(2)("species")]=function(t){t(T,T)};return(I||"function"==typeof PromiseRejectionEvent)&&t.then(T)instanceof e&&0!==k.indexOf("6.6")&&-1===b.indexOf("Chrome/66")}catch(t){}}(),F=function(t){var e;return!(!f(t)||"function"!=typeof(e=t.then))&&e},M=function(t,e){if(!t._n){t._n=!0;var n=t._c;_(function(){for(var i=t._v,r=1==t._s,o=0;n.length>o;)!function(e){var n,o,a,s=r?e.ok:e.fail,u=e.resolve,l=e.reject,c=e.domain;try{s?(r||(2==t._h&&U(t),t._h=1),!0===s?n=i:(c&&c.enter(),n=s(i),c&&(c.exit(),a=!0)),n===e.promise?l(E("Promise-chain cycle")):(o=F(n))?o.call(n,u,l):u(n)):l(i)}catch(t){c&&!a&&c.exit(),l(t)}}(n[o++]);t._c=[],t._n=!1,e&&!t._h&&L(t)})}},L=function(t){v.call(u,function(){var e,n,i,r=t._v,o=D(t);if(o&&(e=w(function(){I?C.emit("unhandledRejection",r,t):(n=u.onunhandledrejection)?n({promise:t,reason:r}):(i=u.console)&&i.error&&i.error("Unhandled promise rejection",r)}),t._h=I||D(t)?2:1),t._a=void 0,o&&e.e)throw e.v})},D=function(t){return 1!==t._h&&0===(t._a||t._c).length},U=function(t){v.call(u,function(){var e;I?C.emit("rejectionHandled",t):(e=u.onrejectionhandled)&&e({promise:t,reason:t._v})})},P=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),M(e,!0))},B=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw E("Promise can't be resolved itself");(e=F(t))?_(function(){var i={_w:n,_d:!1};try{e.call(t,l(B,i,1),l(P,i,1))}catch(t){P.call(i,t)}}):(n._v=t,n._s=1,M(n,!1))}catch(t){P.call({_w:n,_d:!1},t)}}};O||(R=function(t){h(this,R,"Promise","_h"),p(t),i.call(this);try{t(l(B,this,1),l(P,this,1))}catch(t){P.call(this,t)}},(i=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(78)(R.prototype,{then:function(t,e){var n=A(g(this,R));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=I?C.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&M(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new i;this.promise=t,this.resolve=l(B,t,1),this.reject=l(P,t,1)},y.f=A=function(t){return t===R||t===a?new o(t):r(t)}),d(d.G+d.W+d.F*!O,{Promise:R}),n(23)(R,"Promise"),n(79)("Promise"),a=n(1).Promise,d(d.S+d.F*!O,"Promise",{reject:function(t){var e=A(this);return(0,e.reject)(t),e.promise}}),d(d.S+d.F*(s||!O),"Promise",{resolve:function(t){return x(s&&this===a?R:this,t)}}),d(d.S+d.F*!(O&&n(80)(function(t){R.all(t).catch(T)})),"Promise",{all:function(t){var e=this,n=A(e),i=n.resolve,r=n.reject,o=w(function(){var n=[],o=0,a=1;m(t,!1,function(t){var s=o++,u=!1;n.push(void 0),a++,e.resolve(t).then(function(t){u||(u=!0,n[s]=t,--a||i(n))},r)}),--a||i(n)});return o.e&&r(o.v),n.promise},race:function(t){var e=this,n=A(e),i=n.reject,r=w(function(){m(t,!1,function(t){e.resolve(t).then(n.resolve,i)})});return r.e&&i(r.v),n.promise}})},function(t,e){t.exports=function(t,e,n,i){if(!(t instanceof e)||void 0!==i&&i in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var i=n(19),r=n(72),o=n(73),a=n(3),s=n(48),u=n(74),l={},c={};(e=t.exports=function(t,e,n,d,f){var p,h,m,g,v=f?function(){return t}:u(t),_=i(n,d,e?2:1),y=0;if("function"!=typeof v)throw TypeError(t+" is not iterable!");if(o(v)){for(p=s(t.length);p>y;y++)if((g=e?_(a(h=t[y])[0],h[1]):_(t[y]))===l||g===c)return g}else for(m=v.call(t);!(h=m.next()).done;)if((g=r(m,_,h.value,e))===l||g===c)return g}).BREAK=l,e.RETURN=c},function(t,e,n){var i=n(3);t.exports=function(t,e,n,r){try{return r?e(i(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&i(o.call(t)),e}}},function(t,e,n){var i=n(14),r=n(2)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||o[r]===t)}},function(t,e,n){var i=n(51),r=n(2)("iterator"),o=n(14);t.exports=n(1).getIteratorMethod=function(t){if(void 0!=t)return t[r]||t["@@iterator"]||o[i(t)]}},function(t,e){t.exports=function(t,e,n){var i=void 0===n;switch(e.length){case 0:return i?t():t.call(n);case 1:return i?t(e[0]):t.call(n,e[0]);case 2:return i?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return i?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return i?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var i=n(0),r=n(53).set,o=i.MutationObserver||i.WebKitMutationObserver,a=i.process,s=i.Promise,u="process"==n(16)(a);t.exports=function(){var t,e,n,l=function(){var i,r;for(u&&(i=a.domain)&&i.exit();t;){r=t.fn,t=t.next;try{r()}catch(i){throw t?n():e=void 0,i}}e=void 0,i&&i.enter()};if(u)n=function(){a.nextTick(l)};else if(!o||i.navigator&&i.navigator.standalone)if(s&&s.resolve){var c=s.resolve(void 0);n=function(){c.then(l)}}else n=function(){r.call(i,l)};else{var d=!0,f=document.createTextNode("");new o(l).observe(f,{characterData:!0}),n=function(){f.data=d=!d}}return function(i){var r={fn:i,next:void 0};e&&(e.next=r),t||(t=r,n()),e=r}}},function(t,e,n){var i=n(0).navigator;t.exports=i&&i.userAgent||""},function(t,e,n){var i=n(5);t.exports=function(t,e,n){for(var r in e)n&&t[r]?t[r]=e[r]:i(t,r,e[r]);return t}},function(t,e,n){"use strict";var i=n(0),r=n(1),o=n(6),a=n(8),s=n(2)("species");t.exports=function(t){var e="function"==typeof r[t]?r[t]:i[t];a&&e&&!e[s]&&o.f(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,n){var i=n(2)("iterator"),r=!1;try{var o=[7][i]();o.return=function(){r=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!r)return!1;var n=!1;try{var o=[7],a=o[i]();a.next=function(){return{done:n=!0}},o[i]=function(){return a},t(o)}catch(t){}return n}},function(t,e,n){"use strict";var i=n(4),r=n(1),o=n(0),a=n(52),s=n(55);i(i.P+i.R,"Promise",{finally:function(t){var e=a(this,r.Promise||o.Promise),n="function"==typeof t;return this.then(n?function(n){return s(e,t()).then(function(){return n})}:t,n?function(n){return s(e,t()).then(function(){throw n})}:t)}})},function(t,e,n){"use strict";var i=n(4),r=n(33),o=n(54);i(i.S,"Promise",{try:function(t){var e=r.f(this),n=o(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},function(t,e,n){n(84),t.exports=n(1).Object.assign},function(t,e,n){var i=n(4);i(i.S+i.F,"Object",{assign:n(85)})},function(t,e,n){"use strict";var i=n(15),r=n(35),o=n(24),a=n(32),s=n(47),u=Object.assign;t.exports=!u||n(10)(function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=u({},t)[n]||Object.keys(u({},e)).join("")!=i})?function(t,e){for(var n=a(t),u=arguments.length,l=1,c=r.f,d=o.f;u>l;)for(var f,p=s(arguments[l++]),h=c?i(p).concat(c(p)):i(p),m=h.length,g=0;m>g;)d.call(p,f=h[g++])&&(n[f]=p[f]);return n}:u},function(t,e,n){t.exports={default:n(87),__esModule:!0}},function(t,e,n){var i=n(1),r=i.JSON||(i.JSON={stringify:JSON.stringify});t.exports=function(t){return r.stringify.apply(r,arguments)}},function(t,e,n){n(89),t.exports=n(1).Object.keys},function(t,e,n){var i=n(32),r=n(15);n(90)("keys",function(){return function(t){return r(i(t))}})},function(t,e,n){var i=n(4),r=n(1),o=n(10);t.exports=function(t,e){var n=(r.Object||{})[t]||Object[t],a={};a[t]=e(n),i(i.S+i.F*o(function(){n(1)}),"Object",a)}},function(t,e,n){!function(e){t.exports=function(t){"use strict";function e(t,e){var n=t[0],i=t[1],r=t[2],o=t[3];i=((i+=((r=((r+=((o=((o+=((n=((n+=(i&r|~i&o)+e[0]-680876936|0)<<7|n>>>25)+i|0)&i|~n&r)+e[1]-389564586|0)<<12|o>>>20)+n|0)&n|~o&i)+e[2]+606105819|0)<<17|r>>>15)+o|0)&o|~r&n)+e[3]-1044525330|0)<<22|i>>>10)+r|0,i=((i+=((r=((r+=((o=((o+=((n=((n+=(i&r|~i&o)+e[4]-176418897|0)<<7|n>>>25)+i|0)&i|~n&r)+e[5]+1200080426|0)<<12|o>>>20)+n|0)&n|~o&i)+e[6]-1473231341|0)<<17|r>>>15)+o|0)&o|~r&n)+e[7]-45705983|0)<<22|i>>>10)+r|0,i=((i+=((r=((r+=((o=((o+=((n=((n+=(i&r|~i&o)+e[8]+1770035416|0)<<7|n>>>25)+i|0)&i|~n&r)+e[9]-1958414417|0)<<12|o>>>20)+n|0)&n|~o&i)+e[10]-42063|0)<<17|r>>>15)+o|0)&o|~r&n)+e[11]-1990404162|0)<<22|i>>>10)+r|0,i=((i+=((r=((r+=((o=((o+=((n=((n+=(i&r|~i&o)+e[12]+1804603682|0)<<7|n>>>25)+i|0)&i|~n&r)+e[13]-40341101|0)<<12|o>>>20)+n|0)&n|~o&i)+e[14]-1502002290|0)<<17|r>>>15)+o|0)&o|~r&n)+e[15]+1236535329|0)<<22|i>>>10)+r|0,i=((i+=((r=((r+=((o=((o+=((n=((n+=(i&o|r&~o)+e[1]-165796510|0)<<5|n>>>27)+i|0)&r|i&~r)+e[6]-1069501632|0)<<9|o>>>23)+n|0)&i|n&~i)+e[11]+643717713|0)<<14|r>>>18)+o|0)&n|o&~n)+e[0]-373897302|0)<<20|i>>>12)+r|0,i=((i+=((r=((r+=((o=((o+=((n=((n+=(i&o|r&~o)+e[5]-701558691|0)<<5|n>>>27)+i|0)&r|i&~r)+e[10]+38016083|0)<<9|o>>>23)+n|0)&i|n&~i)+e[15]-660478335|0)<<14|r>>>18)+o|0)&n|o&~n)+e[4]-405537848|0)<<20|i>>>12)+r|0,i=((i+=((r=((r+=((o=((o+=((n=((n+=(i&o|r&~o)+e[9]+568446438|0)<<5|n>>>27)+i|0)&r|i&~r)+e[14]-1019803690|0)<<9|o>>>23)+n|0)&i|n&~i)+e[3]-187363961|0)<<14|r>>>18)+o|0)&n|o&~n)+e[8]+1163531501|0)<<20|i>>>12)+r|0,i=((i+=((r=((r+=((o=((o+=((n=((n+=(i&o|r&~o)+e[13]-1444681467|0)<<5|n>>>27)+i|0)&r|i&~r)+e[2]-51403784|0)<<9|o>>>23)+n|0)&i|n&~i)+e[7]+1735328473|0)<<14|r>>>18)+o|0)&n|o&~n)+e[12]-1926607734|0)<<20|i>>>12)+r|0,i=((i+=((r=((r+=((o=((o+=((n=((n+=(i^r^o)+e[5]-378558|0)<<4|n>>>28)+i|0)^i^r)+e[8]-2022574463|0)<<11|o>>>21)+n|0)^n^i)+e[11]+1839030562|0)<<16|r>>>16)+o|0)^o^n)+e[14]-35309556|0)<<23|i>>>9)+r|0,i=((i+=((r=((r+=((o=((o+=((n=((n+=(i^r^o)+e[1]-1530992060|0)<<4|n>>>28)+i|0)^i^r)+e[4]+1272893353|0)<<11|o>>>21)+n|0)^n^i)+e[7]-155497632|0)<<16|r>>>16)+o|0)^o^n)+e[10]-1094730640|0)<<23|i>>>9)+r|0,i=((i+=((r=((r+=((o=((o+=((n=((n+=(i^r^o)+e[13]+681279174|0)<<4|n>>>28)+i|0)^i^r)+e[0]-358537222|0)<<11|o>>>21)+n|0)^n^i)+e[3]-722521979|0)<<16|r>>>16)+o|0)^o^n)+e[6]+76029189|0)<<23|i>>>9)+r|0,i=((i+=((r=((r+=((o=((o+=((n=((n+=(i^r^o)+e[9]-640364487|0)<<4|n>>>28)+i|0)^i^r)+e[12]-421815835|0)<<11|o>>>21)+n|0)^n^i)+e[15]+530742520|0)<<16|r>>>16)+o|0)^o^n)+e[2]-995338651|0)<<23|i>>>9)+r|0,i=((i+=((o=((o+=(i^((n=((n+=(r^(i|~o))+e[0]-198630844|0)<<6|n>>>26)+i|0)|~r))+e[7]+1126891415|0)<<10|o>>>22)+n|0)^((r=((r+=(n^(o|~i))+e[14]-1416354905|0)<<15|r>>>17)+o|0)|~n))+e[5]-57434055|0)<<21|i>>>11)+r|0,i=((i+=((o=((o+=(i^((n=((n+=(r^(i|~o))+e[12]+1700485571|0)<<6|n>>>26)+i|0)|~r))+e[3]-1894986606|0)<<10|o>>>22)+n|0)^((r=((r+=(n^(o|~i))+e[10]-1051523|0)<<15|r>>>17)+o|0)|~n))+e[1]-2054922799|0)<<21|i>>>11)+r|0,i=((i+=((o=((o+=(i^((n=((n+=(r^(i|~o))+e[8]+1873313359|0)<<6|n>>>26)+i|0)|~r))+e[15]-30611744|0)<<10|o>>>22)+n|0)^((r=((r+=(n^(o|~i))+e[6]-1560198380|0)<<15|r>>>17)+o|0)|~n))+e[13]+1309151649|0)<<21|i>>>11)+r|0,i=((i+=((o=((o+=(i^((n=((n+=(r^(i|~o))+e[4]-145523070|0)<<6|n>>>26)+i|0)|~r))+e[11]-1120210379|0)<<10|o>>>22)+n|0)^((r=((r+=(n^(o|~i))+e[2]+718787259|0)<<15|r>>>17)+o|0)|~n))+e[9]-343485551|0)<<21|i>>>11)+r|0,t[0]=n+t[0]|0,t[1]=i+t[1]|0,t[2]=r+t[2]|0,t[3]=o+t[3]|0}function n(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}function i(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t[e]+(t[e+1]<<8)+(t[e+2]<<16)+(t[e+3]<<24);return n}function r(t){var i,r,o,a,s,u,l=t.length,c=[1732584193,-271733879,-1732584194,271733878];for(i=64;i<=l;i+=64)e(c,n(t.substring(i-64,i)));for(r=(t=t.substring(i-64)).length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=0;i<r;i+=1)o[i>>2]|=t.charCodeAt(i)<<(i%4<<3);if(o[i>>2]|=128<<(i%4<<3),i>55)for(e(c,o),i=0;i<16;i+=1)o[i]=0;return a=(a=8*l).toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(a[2],16),u=parseInt(a[1],16)||0,o[14]=s,o[15]=u,e(c,o),c}function o(t){var e,n="";for(e=0;e<4;e+=1)n+=c[t>>8*e+4&15]+c[t>>8*e&15];return n}function a(t){var e;for(e=0;e<t.length;e+=1)t[e]=o(t[e]);return t.join("")}function s(t){return/[\u0080-\uFFFF]/.test(t)&&(t=unescape(encodeURIComponent(t))),t}function u(t){var e,n=[],i=t.length;for(e=0;e<i-1;e+=2)n.push(parseInt(t.substr(e,2),16));return String.fromCharCode.apply(String,n)}function l(){this.reset()}var c=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];return a(r("hello")),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function t(t,e){return(t=0|t||0)<0?Math.max(t+e,0):Math.min(t,e)}ArrayBuffer.prototype.slice=function(e,n){var i,r,o,a,s=this.byteLength,u=t(e,s),l=s;return void 0!==n&&(l=t(n,s)),u>l?new ArrayBuffer(0):(i=l-u,r=new ArrayBuffer(i),o=new Uint8Array(r),a=new Uint8Array(this,u,i),o.set(a),r)}}(),l.prototype.append=function(t){return this.appendBinary(s(t)),this},l.prototype.appendBinary=function(t){this._buff+=t,this._length+=t.length;var i,r=this._buff.length;for(i=64;i<=r;i+=64)e(this._hash,n(this._buff.substring(i-64,i)));return this._buff=this._buff.substring(i-64),this},l.prototype.end=function(t){var e,n,i=this._buff,r=i.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<r;e+=1)o[e>>2]|=i.charCodeAt(e)<<(e%4<<3);return this._finish(o,r),n=a(this._hash),t&&(n=u(n)),this.reset(),n},l.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},l.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}},l.prototype.setState=function(t){return this._buff=t.buff,this._length=t.length,this._hash=t.hash,this},l.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},l.prototype._finish=function(t,n){var i,r,o,a=n;if(t[a>>2]|=128<<(a%4<<3),a>55)for(e(this._hash,t),a=0;a<16;a+=1)t[a]=0;i=(i=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),r=parseInt(i[2],16),o=parseInt(i[1],16)||0,t[14]=r,t[15]=o,e(this._hash,t)},l.hash=function(t,e){return l.hashBinary(s(t),e)},l.hashBinary=function(t,e){var n=a(r(t));return e?u(n):n},l.ArrayBuffer=function(){this.reset()},l.ArrayBuffer.prototype.append=function(t){var n,r=function(t,e,n){var i=new Uint8Array(t.byteLength+e.byteLength);return i.set(new Uint8Array(t)),i.set(new Uint8Array(e),t.byteLength),i}(this._buff.buffer,t),o=r.length;for(this._length+=t.byteLength,n=64;n<=o;n+=64)e(this._hash,i(r.subarray(n-64,n)));return this._buff=n-64<o?new Uint8Array(r.buffer.slice(n-64)):new Uint8Array(0),this},l.ArrayBuffer.prototype.end=function(t){var e,n,i=this._buff,r=i.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<r;e+=1)o[e>>2]|=i[e]<<(e%4<<3);return this._finish(o,r),n=a(this._hash),t&&(n=u(n)),this.reset(),n},l.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},l.ArrayBuffer.prototype.getState=function(){var t=l.prototype.getState.call(this);return t.buff=function(t){return String.fromCharCode.apply(null,new Uint8Array(t))}(t.buff),t},l.ArrayBuffer.prototype.setState=function(t){return t.buff=function(t,e){var n,i=t.length,r=new ArrayBuffer(i),o=new Uint8Array(r);for(n=0;n<i;n+=1)o[n]=t.charCodeAt(n);return o}(t.buff),l.prototype.setState.call(this,t)},l.ArrayBuffer.prototype.destroy=l.prototype.destroy,l.ArrayBuffer.prototype._finish=l.prototype._finish,l.ArrayBuffer.hash=function(t,n){var r=a(function(t){var n,r,o,a,s,u,l=t.length,c=[1732584193,-271733879,-1732584194,271733878];for(n=64;n<=l;n+=64)e(c,i(t.subarray(n-64,n)));for(r=(t=n-64<l?t.subarray(n-64):new Uint8Array(0)).length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n=0;n<r;n+=1)o[n>>2]|=t[n]<<(n%4<<3);if(o[n>>2]|=128<<(n%4<<3),n>55)for(e(c,o),n=0;n<16;n+=1)o[n]=0;return a=(a=8*l).toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(a[2],16),u=parseInt(a[1],16)||0,o[14]=s,o[15]=u,e(c,o),c}(new Uint8Array(t)));return n?u(r):r},l}()}()},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.UploadManager=void 0;var r=i(n(18)),o=i(n(34)),a=i(n(17)),s=n(12),u=n(93);e.UploadManager=function(){function t(e,n,i){var r=this;(0,a.default)(this,t),this.config=(0,o.default)({useCdnDomain:!0,disableStatisticsReport:!1,retryCount:3,checkByMD5:!1,uphost:null,forceDirect:!1,concurrentRequestLimit:3,region:null},e.config),this.putExtra=(0,o.default)({fname:"",params:{},mimeType:null},e.putExtra),this.statisticsLogger=i,this.progress=null,this.xhrList=[],this.xhrHandler=function(t){return r.xhrList.push(t)},this.aborted=!1,this.file=e.file,this.key=e.key,this.token=e.token,this.onData=function(){},this.onError=function(){},this.onComplete=function(){},this.retryCount=0,(0,o.default)(this,n)}return t.prototype.putFile=function(){var t=this;if(this.aborted=!1,this.putExtra.fname||(this.putExtra.fname=this.file.name),!this.putExtra.mimeType||!this.putExtra.mimeType.length||(0,s.isContainFileMimeType)(this.file.type,this.putExtra.mimeType)){var e=(0,s.getUploadUrl)(this.config,this.token).then(function(e){return t.uploadUrl=e,t.uploadAt=(new Date).getTime(),t.config.forceDirect?t.directUpload():t.file.size>4194304?t.resumeUpload():t.directUpload()});return e.then(function(e){t.onComplete(e.data),t.config.disableStatisticsReport||t.sendLog(e.reqId,200)},function(e){if(t.clear(),e.isRequestError&&!t.config.disableStatisticsReport){var n=t.aborted?"":e.reqId,i=t.aborted?-2:e.code;t.sendLog(n,i)}var r=e.isRequestError&&0===e.code&&!t.aborted,o=++t.retryCount<=t.config.retryCount;r&&o?t.putFile():t.onError(e)}),e}var n=new Error("file type doesn't match with what you specify");this.onError(n)},t.prototype.clear=function(){this.xhrList.forEach(function(t){return t.abort()}),this.xhrList=[]},t.prototype.stop=function(){this.clear(),this.aborted=!0},t.prototype.sendLog=function(t,e){this.statisticsLogger.log({code:e,reqId:t,host:(0,s.getDomainFromUrl)(this.uploadUrl),remoteIp:"",port:(0,s.getPortFromUrl)(this.uploadUrl),duration:((new Date).getTime()-this.uploadAt)/1e3,time:Math.floor(this.uploadAt/1e3),bytesSent:this.progress?this.progress.total.loaded:0,upType:"jssdk-h5",size:this.file.size},this.token)},t.prototype.directUpload=function(){var t=this,e=new FormData;return e.append("file",this.file),e.append("token",this.token),null!=this.key&&e.append("key",this.key),e.append("fname",this.putExtra.fname),(0,s.filterParams)(this.putExtra.params).forEach(function(t){return e.append(t[0],t[1])}),(0,s.request)(this.uploadUrl,{method:"POST",body:e,onProgress:function(e){t.updateDirectProgress(e.loaded,e.total)},onCreate:this.xhrHandler}).then(function(e){return t.finishDirectProgress(),e})},t.prototype.resumeUpload=function(){var t=this;this.loaded={mkFileProgress:0,chunks:null},this.ctxList=[],this.localInfo=(0,s.getLocalFileInfo)(this.file),this.chunks=(0,s.getChunks)(this.file,4194304),this.initChunksProgress();var e=new u.Pool(function(e){return t.uploadChunk(e)},this.config.concurrentRequestLimit),n=this.chunks.map(function(t,n){return e.enqueue({chunk:t,index:n})}),i=r.default.all(n).then(function(){return t.mkFileReq()});return i.then(function(e){(0,s.removeLocalFileInfo)(t.file)},function(e){701!==e.code?(0,s.setLocalFileInfo)(t.file,t.ctxList):(0,s.removeLocalFileInfo)(t.file)}),i},t.prototype.uploadChunk=function(t){var e=this,n=t.index,i=t.chunk,o=this.localInfo[n],a=this.uploadUrl+"/mkblk/"+i.size,u=o&&!(0,s.isChunkExpired)(o.time),l=this.config.checkByMD5,c=function(){return e.updateChunkProgress(i.size,n),e.ctxList[n]={ctx:o.ctx,time:o.time,md5:o.md5},r.default.resolve(null)};return u&&!l?c():(0,s.computeMd5)(i).then(function(t){if(u&&t===o.md5)return c();var r=(0,s.getHeadersForChunkUpload)(e.token),l=e.xhrHandler;return(0,s.request)(a,{method:"POST",headers:r,body:i,onProgress:function(t){e.updateChunkProgress(t.loaded,n)},onCreate:l}).then(function(i){e.ctxList[n]={time:(new Date).getTime(),ctx:i.data.ctx,md5:t}})})},t.prototype.mkFileReq=function(){var t=this,e=(0,o.default)({mimeType:"application/octet-stream"},this.putExtra),n=(0,s.createMkFileUrl)(this.uploadUrl,this.file.size,this.key,e),i=this.ctxList.map(function(t){return t.ctx}).join(","),a=(0,s.getHeadersForMkFile)(this.token),u=this.xhrHandler;return(0,s.request)(n,{method:"POST",body:i,headers:a,onCreate:u}).then(function(e){return t.updateMkFileProgress(1),r.default.resolve(e)})},t.prototype.updateDirectProgress=function(t,e){this.progress={total:this.getProgressInfoItem(t,e+1)},this.onData(this.progress)},t.prototype.finishDirectProgress=function(){var t=this.progress.total;this.progress.total=this.getProgressInfoItem(t.loaded+1,t.size),this.onData(this.progress)},t.prototype.initChunksProgress=function(){this.loaded.chunks=this.chunks.map(function(t){return 0}),this.notifyResumeProgress()},t.prototype.updateChunkProgress=function(t,e){this.loaded.chunks[e]=t,this.notifyResumeProgress()},t.prototype.updateMkFileProgress=function(t){this.loaded.mkFileProgress=t,this.notifyResumeProgress()},t.prototype.notifyResumeProgress=function(){var t=this;this.progress={total:this.getProgressInfoItem((0,s.sum)(this.loaded.chunks)+this.loaded.mkFileProgress,this.file.size+1),chunks:this.chunks.map(function(e,n){return t.getProgressInfoItem(t.loaded.chunks[n],e.size)})},this.onData(this.progress)},t.prototype.getProgressInfoItem=function(t,e){return{loaded:t,size:e,percent:t/e*100}},t}()},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.Pool=void 0;var r=i(n(18)),o=i(n(17));e.Pool=function(){function t(e,n){(0,o.default)(this,t),this.runTask=e,this.queue=[],this.processing=[],this.limit=n}return t.prototype.enqueue=function(t){var e=this;return new r.default(function(n,i){e.queue.push({task:t,resolve:n,reject:i}),e.check()})},t.prototype.run=function(t){var e=this;this.queue=this.queue.filter(function(e){return e!==t}),this.processing.push(t),this.runTask(t.task).then(function(){e.processing=e.processing.filter(function(e){return e!==t}),t.resolve(),e.check()},function(e){return t.reject(e)})},t.prototype.check=function(){var t=this,e=this.processing.length,n=this.limit-e;this.queue.slice(0,n).forEach(function(e,n){t.run(e)})},t}()},function(t,e,n){"use strict";function i(t,e){return t=encodeURIComponent(t),"/"!==e.slice(e.length-1)&&(e+="/"),e+t}function r(t,e,n){if(!/^\d$/.test(t.mode))throw"mode should be number in imageView2";var r=t.mode,o=t.w,a=t.h,s=t.q,u=t.format;if(!o&&!a)throw"param w and h is empty in imageView2";var l="imageView2/"+encodeURIComponent(r);return l+=o?"/w/"+encodeURIComponent(o):"",l+=a?"/h/"+encodeURIComponent(a):"",l+=s?"/q/"+encodeURIComponent(s):"",l+=u?"/format/"+encodeURIComponent(u):"",e&&(l=i(e,n)+"?"+l),l}function o(t,e,n){var r=t["auto-orient"],o=t.thumbnail,a=t.strip,s=t.gravity,u=t.crop,l=t.quality,c=t.rotate,d=t.format,f=t.blur,p="imageMogr2";return p+=r?"/auto-orient":"",p+=o?"/thumbnail/"+encodeURIComponent(o):"",p+=a?"/strip":"",p+=s?"/gravity/"+encodeURIComponent(s):"",p+=l?"/quality/"+encodeURIComponent(l):"",p+=u?"/crop/"+encodeURIComponent(u):"",p+=c?"/rotate/"+encodeURIComponent(c):"",p+=d?"/format/"+encodeURIComponent(d):"",p+=f?"/blur/"+encodeURIComponent(f):"",e&&(p=i(e,n)+"?"+p),p}function a(t,e,n){var r=t.mode;if(!r)throw"mode can't be empty in watermark";var o="watermark/"+r;if(1!==r&&2!==r)throw"mode is wrong";if(1===r){var a=t.image;if(!a)throw"image can't be empty in watermark";o+=a?"/image/"+(0,u.urlSafeBase64Encode)(a):""}if(2===r){var s=t.text,l=t.font,c=t.fontsize,d=t.fill;if(!s)throw"text can't be empty in watermark";o+=s?"/text/"+(0,u.urlSafeBase64Encode)(s):"",o+=l?"/font/"+(0,u.urlSafeBase64Encode)(l):"",o+=c?"/fontsize/"+c:"",o+=d?"/fill/"+(0,u.urlSafeBase64Encode)(d):""}var f=t.dissolve,p=t.gravity,h=t.dx,m=t.dy;return o+=f?"/dissolve/"+encodeURIComponent(f):"",o+=p?"/gravity/"+encodeURIComponent(p):"",o+=h?"/dx/"+encodeURIComponent(h):"",o+=m?"/dy/"+encodeURIComponent(m):"",e&&(o=i(e,n)+"?"+o),o}e.__esModule=!0,e.imageView2=r,e.imageMogr2=o,e.watermark=a,e.imageInfo=function(t,e){var n=i(t,e)+"?imageInfo";return(0,s.request)(n,{method:"GET"})},e.exif=function(t,e){var n=i(t,e)+"?exif";return(0,s.request)(n,{method:"GET"})},e.pipeline=function(t,e,n){var s=void 0,u=void 0,l="";if("[object Array]"===Object.prototype.toString.call(t)){for(var c=0,d=t.length;c<d;c++){if(!(s=t[c]).fop)throw"fop can't be empty in pipeline";switch(s.fop){case"watermark":l+=a(s)+"|";break;case"imageView2":l+=r(s)+"|";break;case"imageMogr2":l+=o(s)+"|";break;default:u=!0}if(u)throw"fop is wrong in pipeline"}if(e){var f=(l=i(e,n)+"?"+l).length;"|"===l.slice(f-1)&&(l=l.slice(0,f-1))}return l}throw"pipeline's first param should be array"};var s=n(12),u=n(56)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.Observable=void 0;var r=i(n(96)),o=i(n(17));e.Observable=function(){function t(e){(0,o.default)(this,t),this.subscribeAction=e}return t.prototype.subscribe=function(t,e,n){var i=new a(t,e,n),r=this.subscribeAction(i);return new s(i,r)},t}();var a=function(){function t(e,n,i){(0,o.default)(this,t),this.isStopped=!1,"object"===(void 0===e?"undefined":(0,r.default)(e))?(this._onNext=e.next,this._onError=e.error,this._onCompleted=e.complete):(this._onNext=e,this._onError=n,this._onCompleted=i)}return t.prototype.next=function(t){!this.isStopped&&this._onNext&&this._onNext(t)},t.prototype.error=function(t){!this.isStopped&&this._onError&&(this.isStopped=!0,this._onError(t))},t.prototype.complete=function(t){!this.isStopped&&this._onCompleted&&(this.isStopped=!0,this._onCompleted(t))},t}(),s=function(){function t(e,n){(0,o.default)(this,t),this.observer=e,this.result=n}return t.prototype.unsubscribe=function(){this.observer.isStopped=!0,this.result()},t}()},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=i(n(97)),o=i(n(99)),a="function"==typeof o.default&&"symbol"==typeof r.default?function(t){return typeof t}:function(t){return t&&"function"==typeof o.default&&t.constructor===o.default&&t!==o.default.prototype?"symbol":typeof t};e.default="function"==typeof o.default&&"symbol"===a(r.default)?function(t){return void 0===t?"undefined":a(t)}:function(t){return t&&"function"==typeof o.default&&t.constructor===o.default&&t!==o.default.prototype?"symbol":void 0===t?"undefined":a(t)}},function(t,e,n){t.exports={default:n(98),__esModule:!0}},function(t,e,n){n(41),n(50),t.exports=n(37).f("iterator")},function(t,e,n){t.exports={default:n(100),__esModule:!0}},function(t,e,n){n(101),n(40),n(107),n(108),t.exports=n(1).Symbol},function(t,e,n){"use strict";var i=n(0),r=n(9),o=n(8),a=n(4),s=n(44),u=n(102).KEY,l=n(10),c=n(30),d=n(23),f=n(22),p=n(2),h=n(37),m=n(38),g=n(103),v=n(104),_=n(3),y=n(7),w=n(11),b=n(28),x=n(21),E=n(45),C=n(105),S=n(106),k=n(6),R=n(15),I=S.f,T=k.f,A=C.f,O=i.Symbol,F=i.JSON,M=F&&F.stringify,L=p("_hidden"),D=p("toPrimitive"),U={}.propertyIsEnumerable,P=c("symbol-registry"),B=c("symbols"),N=c("op-symbols"),z=Object.prototype,$="function"==typeof O,j=i.QObject,q=!j||!j.prototype||!j.prototype.findChild,H=o&&l(function(){return 7!=E(T({},"a",{get:function(){return T(this,"a",{value:7}).a}})).a})?function(t,e,n){var i=I(z,e);i&&delete z[e],T(t,e,n),i&&t!==z&&T(z,e,i)}:T,G=function(t){var e=B[t]=E(O.prototype);return e._k=t,e},V=$&&"symbol"==typeof O.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof O},W=function(t,e,n){return t===z&&W(N,e,n),_(t),e=b(e,!0),_(n),r(B,e)?(n.enumerable?(r(t,L)&&t[L][e]&&(t[L][e]=!1),n=E(n,{enumerable:x(0,!1)})):(r(t,L)||T(t,L,x(1,{})),t[L][e]=!0),H(t,e,n)):T(t,e,n)},X=function(t,e){_(t);for(var n,i=g(e=w(e)),r=0,o=i.length;o>r;)W(t,n=i[r++],e[n]);return t},Y=function(t){var e=U.call(this,t=b(t,!0));return!(this===z&&r(B,t)&&!r(N,t))&&(!(e||!r(this,t)||!r(B,t)||r(this,L)&&this[L][t])||e)},J=function(t,e){if(t=w(t),e=b(e,!0),t!==z||!r(B,e)||r(N,e)){var n=I(t,e);return!n||!r(B,e)||r(t,L)&&t[L][e]||(n.enumerable=!0),n}},K=function(t){for(var e,n=A(w(t)),i=[],o=0;n.length>o;)r(B,e=n[o++])||e==L||e==u||i.push(e);return i},Q=function(t){for(var e,n=t===z,i=A(n?N:w(t)),o=[],a=0;i.length>a;)!r(B,e=i[a++])||n&&!r(z,e)||o.push(B[e]);return o};$||(s((O=function(){if(this instanceof O)throw TypeError("Symbol is not a constructor!");var t=f(arguments.length>0?arguments[0]:void 0),e=function(n){this===z&&e.call(N,n),r(this,L)&&r(this[L],t)&&(this[L][t]=!1),H(this,t,x(1,n))};return o&&q&&H(z,t,{configurable:!0,set:e}),G(t)}).prototype,"toString",function(){return this._k}),S.f=J,k.f=W,n(57).f=C.f=K,n(24).f=Y,n(35).f=Q,o&&!n(13)&&s(z,"propertyIsEnumerable",Y,!0),h.f=function(t){return G(p(t))}),a(a.G+a.W+a.F*!$,{Symbol:O});for(var Z="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),tt=0;Z.length>tt;)p(Z[tt++]);for(var et=R(p.store),nt=0;et.length>nt;)m(et[nt++]);a(a.S+a.F*!$,"Symbol",{for:function(t){return r(P,t+="")?P[t]:P[t]=O(t)},keyFor:function(t){if(!V(t))throw TypeError(t+" is not a symbol!");for(var e in P)if(P[e]===t)return e},useSetter:function(){q=!0},useSimple:function(){q=!1}}),a(a.S+a.F*!$,"Object",{create:function(t,e){return void 0===e?E(t):X(E(t),e)},defineProperty:W,defineProperties:X,getOwnPropertyDescriptor:J,getOwnPropertyNames:K,getOwnPropertySymbols:Q}),F&&a(a.S+a.F*(!$||l(function(){var t=O();return"[null]"!=M([t])||"{}"!=M({a:t})||"{}"!=M(Object(t))})),"JSON",{stringify:function(t){for(var e,n,i=[t],r=1;arguments.length>r;)i.push(arguments[r++]);if(n=e=i[1],(y(e)||void 0!==t)&&!V(t))return v(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!V(e))return e}),i[1]=e,M.apply(F,i)}}),O.prototype[D]||n(5)(O.prototype,D,O.prototype.valueOf),d(O,"Symbol"),d(Math,"Math",!0),d(i.JSON,"JSON",!0)},function(t,e,n){var i=n(22)("meta"),r=n(7),o=n(9),a=n(6).f,s=0,u=Object.isExtensible||function(){return!0},l=!n(10)(function(){return u(Object.preventExtensions({}))}),c=function(t){a(t,i,{value:{i:"O"+ ++s,w:{}}})},d=t.exports={KEY:i,NEED:!1,fastKey:function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,i)){if(!u(t))return"F";if(!e)return"E";c(t)}return t[i].i},getWeak:function(t,e){if(!o(t,i)){if(!u(t))return!0;if(!e)return!1;c(t)}return t[i].w},onFreeze:function(t){return l&&d.NEED&&u(t)&&!o(t,i)&&c(t),t}}},function(t,e,n){var i=n(15),r=n(35),o=n(24);t.exports=function(t){var e=i(t),n=r.f;if(n)for(var a,s=n(t),u=o.f,l=0;s.length>l;)u.call(t,a=s[l++])&&e.push(a);return e}},function(t,e,n){var i=n(16);t.exports=Array.isArray||function(t){return"Array"==i(t)}},function(t,e,n){var i=n(11),r=n(57).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?function(t){try{return r(t)}catch(t){return a.slice()}}(t):r(i(t))}},function(t,e,n){var i=n(24),r=n(21),o=n(11),a=n(28),s=n(9),u=n(43),l=Object.getOwnPropertyDescriptor;e.f=n(8)?l:function(t,e){if(t=o(t),e=a(e,!0),u)try{return l(t,e)}catch(t){}if(s(t,e))return r(!i.f.call(t,e),t[e])}},function(t,e,n){n(38)("asyncIterator")},function(t,e,n){n(38)("observable")},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.StatisticsLogger=void 0;var r=i(n(36)),o=i(n(17)),a=n(12);e.StatisticsLogger=function(){function t(){(0,o.default)(this,t)}return t.prototype.log=function(t,e){var n="";(0,r.default)(t).forEach(function(e){return n+=t[e]+","}),this.send(n,e)},t.prototype.send=function(t,e){var n=(0,a.createXHR)(),i=0;n.open("POST","https://uplog.qbox.me/log/3"),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.setRequestHeader("Authorization","UpToken "+e),n.onreadystatechange=function(){4===n.readyState&&200!==n.status&&++i<=3&&n.send(t)},n.send(t)},t}()},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=i(n(18)),o=i(n(34)),a=i(n(17)),s=i(n(36)),u=n(111),l=n(12),c={PNG:"image/png",JPEG:"image/jpeg",WEBP:"image/webp",BMP:"image/bmp"},d=Math.log(2),f=(0,s.default)(c).map(function(t){return c[t]}),p=c.JPEG,h=function(){function t(e,n){(0,a.default)(this,t),this.config=(0,o.default)({quality:.92,noCompressIfLarger:!1},n),this.file=e}return t.prototype.process=function(){var t=this;this.outputType=this.file.type;var e={};return function(t){return f.includes(t)}(this.file.type)?this.getOriginImage().then(function(e){return t.getCanvas(e)}).then(function(n){var i=1;return t.config.maxWidth&&(i=Math.min(1,t.config.maxWidth/n.width)),t.config.maxHeight&&(i=Math.min(1,i,t.config.maxHeight/n.height)),e.width=n.width,e.height=n.height,t.doScale(n,i)}).then(function(n){var i=t.toBlob(n);return i.size>t.file.size&&t.config.noCompressIfLarger?{dist:t.file,width:e.width,height:e.height}:{dist:i,width:n.width,height:n.height}}):r.default.reject(new Error("unsupported file type: "+this.file.type))},t.prototype.clear=function(t,e,n){this.outputType===p?(t.fillStyle="#fff",t.fillRect(0,0,e,n)):t.clearRect(0,0,e,n)},t.prototype.getOriginImage=function(){var t=this;return new r.default(function(e,n){var i=(0,l.createObjectURL)(t.file),r=new Image;r.onload=function(){e(r)},r.onerror=function(){n("image load error")},r.src=i})},t.prototype.getCanvas=function(t){var e=this;return new r.default(function(n,i){u.EXIF.getData(t,function(){var i=u.EXIF.getTag(t,"Orientation")||1,r=(0,l.getTransform)(t,i),o=r.width,a=r.height,s=r.matrix,c=document.createElement("canvas"),d=c.getContext("2d");c.width=o,c.height=a,e.clear(d,o,a),d.transform.apply(d,s),d.drawImage(t,0,0),n(c)})})},t.prototype.doScale=function(t,e){if(1===e)return r.default.resolve(t);var n=t.getContext("2d"),i=Math.min(4,Math.ceil(1/e/d)),o=Math.pow(e,1/i),a=document.createElement("canvas"),s=a.getContext("2d"),u=t.width,l=t.height,c=u,f=l;a.width=u,a.height=l;for(var p=void 0,h=void 0,m=0;m<i;m++){var g=u*o|0,v=l*o|0;m===i-1&&(g=c*e,v=f*e),m%2==0?(p=t,h=s):(p=a,h=n),this.clear(h,u,l),h.drawImage(p,0,0,u,l,0,0,g,v),u=g,l=v}var _=p===t?a:t,y=h.getImageData(0,0,u,l);return _.width=u,_.height=l,h.putImageData(y,0,0),r.default.resolve(_)},t.prototype.toBlob=function(t){var e=t.toDataURL(this.outputType,this.config.quality),n=atob(e.split(",")[1]).split("").map(function(t){return t.charCodeAt(0)});return new Blob([new Uint8Array(n)],{type:this.outputType})},t}();e.default=function(t,e){return new h(t,e).process()}},function(t,e,i){var r;(function(){function i(t){return!!t.exifdata}function o(t,e){function n(n){var i=a(n);t.exifdata=i||{};var r=function(t){var e=new DataView(t);if(h&&console.log("Got file of length "+t.byteLength),255!=e.getUint8(0)||216!=e.getUint8(1))return h&&console.log("Not a valid JPEG"),!1;for(var n=2,i=t.byteLength;n<i;){if(function(t,e){return 56===t.getUint8(e)&&66===t.getUint8(e+1)&&73===t.getUint8(e+2)&&77===t.getUint8(e+3)&&4===t.getUint8(e+4)&&4===t.getUint8(e+5)}(e,n)){var r=e.getUint8(n+7);return r%2!=0&&(r+=1),0===r&&(r=4),s(t,n+8+r,e.getUint16(n+6+r))}n++}}(n);if(t.iptcdata=r||{},m.isXmpEnabled){var o=function(t){if("DOMParser"in self){var e=new DataView(t);if(h&&console.log("Got file of length "+t.byteLength),255!=e.getUint8(0)||216!=e.getUint8(1))return h&&console.log("Not a valid JPEG"),!1;for(var n=2,i=t.byteLength,r=new DOMParser;n<i-4;){if("http"==c(e,n,4)){var o=n-1,a=e.getUint16(n-2)-1,s=c(e,o,a),u=s.indexOf("xmpmeta>")+8,l=(s=s.substring(s.indexOf("<x:xmpmeta"),u)).indexOf("x:xmpmeta")+10;return s=s.slice(0,l)+'xmlns:Iptc4xmpCore="http://iptc.org/std/Iptc4xmpCore/1.0/xmlns/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tiff="http://ns.adobe.com/tiff/1.0/" xmlns:plus="http://schemas.android.com/apk/lib/com.google.android.gms.plus" xmlns:ext="http://www.gettyimages.com/xsltExtension/1.0" xmlns:exif="http://ns.adobe.com/exif/1.0/" xmlns:stEvt="http://ns.adobe.com/xap/1.0/sType/ResourceEvent#" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmlns:crs="http://ns.adobe.com/camera-raw-settings/1.0/" xmlns:xapGImg="http://ns.adobe.com/xap/1.0/g/img/" xmlns:Iptc4xmpExt="http://iptc.org/std/Iptc4xmpExt/2008-02-29/" '+s.slice(l),p(r.parseFromString(s,"text/xml"))}n++}}}(n);t.xmpdata=o||{}}e&&e.call(t)}if(t.src)if(/^data\:/i.test(t.src))n(function(t,e){e=e||t.match(/^data\:([^\;]+)\;base64,/im)[1]||"",t=t.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var n=atob(t),i=n.length,r=new ArrayBuffer(i),o=new Uint8Array(r),a=0;a<i;a++)o[a]=n.charCodeAt(a);return r}(t.src));else if(/^blob\:/i.test(t.src))(r=new FileReader).onload=function(t){n(t.target.result)},function(t,e){var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="blob",n.onload=function(t){200!=this.status&&0!==this.status||e(this.response)},n.send()}(t.src,function(t){r.readAsArrayBuffer(t)});else{var i=new XMLHttpRequest;i.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";n(i.response),i=null},i.open("GET",t.src,!0),i.responseType="arraybuffer",i.send(null)}else if(self.FileReader&&(t instanceof self.Blob||t instanceof self.File)){var r;(r=new FileReader).onload=function(t){h&&console.log("Got file of length "+t.target.result.byteLength),n(t.target.result)},r.readAsArrayBuffer(t)}}function a(t){var e=new DataView(t);if(h&&console.log("Got file of length "+t.byteLength),255!=e.getUint8(0)||216!=e.getUint8(1))return h&&console.log("Not a valid JPEG"),!1;for(var n,i=2,r=t.byteLength;i<r;){if(255!=e.getUint8(i))return h&&console.log("Not a valid marker at offset "+i+", found: "+e.getUint8(i)),!1;if(n=e.getUint8(i+1),h&&console.log(n),225==n)return h&&console.log("Found 0xFFE1 marker"),d(e,i+4,e.getUint16(i+2));i+=2+e.getUint16(i+2)}}function s(t,e,n){for(var i,r,o,a,s=new DataView(t),u={},l=e;l<e+n;)28===s.getUint8(l)&&2===s.getUint8(l+1)&&(a=s.getUint8(l+2))in b&&(o=s.getInt16(l+3),r=b[a],i=c(s,l+5,o),u.hasOwnProperty(r)?u[r]instanceof Array?u[r].push(i):u[r]=[u[r],i]:u[r]=i),l++;return u}function u(t,e,n,i,r){var o,a,s,u=t.getUint16(n,!r),c={};for(s=0;s<u;s++)o=n+12*s+2,!(a=i[t.getUint16(o,!r)])&&h&&console.log("Unknown tag: "+t.getUint16(o,!r)),c[a]=l(t,o,e,n,r);return c}function l(t,e,n,i,r){var o,a,s,u,l,d,f=t.getUint16(e+2,!r),p=t.getUint32(e+4,!r),h=t.getUint32(e+8,!r)+n;switch(f){case 1:case 7:if(1==p)return t.getUint8(e+8,!r);for(o=p>4?h:e+8,a=[],u=0;u<p;u++)a[u]=t.getUint8(o+u);return a;case 2:return c(t,o=p>4?h:e+8,p-1);case 3:if(1==p)return t.getUint16(e+8,!r);for(o=p>2?h:e+8,a=[],u=0;u<p;u++)a[u]=t.getUint16(o+2*u,!r);return a;case 4:if(1==p)return t.getUint32(e+8,!r);for(a=[],u=0;u<p;u++)a[u]=t.getUint32(h+4*u,!r);return a;case 5:if(1==p)return l=t.getUint32(h,!r),d=t.getUint32(h+4,!r),(s=new Number(l/d)).numerator=l,s.denominator=d,s;for(a=[],u=0;u<p;u++)l=t.getUint32(h+8*u,!r),d=t.getUint32(h+4+8*u,!r),a[u]=new Number(l/d),a[u].numerator=l,a[u].denominator=d;return a;case 9:if(1==p)return t.getInt32(e+8,!r);for(a=[],u=0;u<p;u++)a[u]=t.getInt32(h+4*u,!r);return a;case 10:if(1==p)return t.getInt32(h,!r)/t.getInt32(h+4,!r);for(a=[],u=0;u<p;u++)a[u]=t.getInt32(h+8*u,!r)/t.getInt32(h+4+8*u,!r);return a}}function c(t,e,i){var r="";for(n=e;n<e+i;n++)r+=String.fromCharCode(t.getUint8(n));return r}function d(t,e){if("Exif"!=c(t,e,4))return h&&console.log("Not valid EXIF data! "+c(t,e,4)),!1;var n,i,r,o,a,s=e+6;if(18761==t.getUint16(s))n=!1;else{if(19789!=t.getUint16(s))return h&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;n=!0}if(42!=t.getUint16(s+2,!n))return h&&console.log("Not valid TIFF data! (no 0x002A)"),!1;var l=t.getUint32(s+4,!n);if(l<8)return h&&console.log("Not valid TIFF data! (First offset less than 8)",t.getUint32(s+4,!n)),!1;if((i=u(t,s,s+l,v,n)).ExifIFDPointer)for(r in o=u(t,s,s+i.ExifIFDPointer,g,n)){switch(r){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":o[r]=w[r][o[r]];break;case"ExifVersion":case"FlashpixVersion":o[r]=String.fromCharCode(o[r][0],o[r][1],o[r][2],o[r][3]);break;case"ComponentsConfiguration":o[r]=w.Components[o[r][0]]+w.Components[o[r][1]]+w.Components[o[r][2]]+w.Components[o[r][3]]}i[r]=o[r]}if(i.GPSInfoIFDPointer)for(r in a=u(t,s,s+i.GPSInfoIFDPointer,_,n)){switch(r){case"GPSVersionID":a[r]=a[r][0]+"."+a[r][1]+"."+a[r][2]+"."+a[r][3]}i[r]=a[r]}return i.thumbnail=function(t,e,n,i){var r=function(t,e,n){var i=t.getUint16(e,!n);return t.getUint32(e+2+12*i,!n)}(t,e+n,i);if(!r)return{};if(r>t.byteLength)return{};var o=u(t,e,e+r,y,i);if(o.Compression)switch(o.Compression){case 6:if(o.JpegIFOffset&&o.JpegIFByteCount){var a=e+o.JpegIFOffset,s=o.JpegIFByteCount;o.blob=new Blob([new Uint8Array(t.buffer,a,s)],{type:"image/jpeg"})}break;case 1:console.log("Thumbnail image format is TIFF, which is not implemented.");break;default:console.log("Unknown thumbnail image format '%s'",o.Compression)}else 2==o.PhotometricInterpretation&&console.log("Thumbnail image format is RGB, which is not implemented.");return o}(t,s,l,n),i}function f(t){var e={};if(1==t.nodeType){if(t.attributes.length>0){e["@attributes"]={};for(var n=0;n<t.attributes.length;n++){var i=t.attributes.item(n);e["@attributes"][i.nodeName]=i.nodeValue}}}else if(3==t.nodeType)return t.nodeValue;if(t.hasChildNodes())for(var r=0;r<t.childNodes.length;r++){var o=t.childNodes.item(r),a=o.nodeName;if(null==e[a])e[a]=f(o);else{if(null==e[a].push){var s=e[a];e[a]=[],e[a].push(s)}e[a].push(f(o))}}return e}function p(t){try{var e={};if(t.children.length>0)for(var n=0;n<t.children.length;n++){var i=t.children.item(n),r=i.attributes;for(var o in r){var a=r[o],s=a.nodeName,u=a.nodeValue;void 0!==s&&(e[s]=u)}var l=i.nodeName;if(void 0===e[l])e[l]=f(i);else{if(void 0===e[l].push){var c=e[l];e[l]=[],e[l].push(c)}e[l].push(f(i))}}else e=t.textContent;return e}catch(t){console.log(t.message)}}var h=!1,m=function(t){return t instanceof m?t:this instanceof m?void(this.EXIFwrapped=t):new m(t)};void 0!==t&&t.exports&&(e=t.exports=m),e.EXIF=m;var g=m.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},v=m.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},_=m.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},y=m.IFD1Tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",296:"ResolutionUnit",513:"JpegIFOffset",514:"JpegIFByteCount",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite"},w=m.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}},b={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};m.enableXmp=function(){m.isXmpEnabled=!0},m.disableXmp=function(){m.isXmpEnabled=!1},m.getData=function(t,e){return!((self.Image&&t instanceof self.Image||self.HTMLImageElement&&t instanceof self.HTMLImageElement)&&!t.complete||(i(t)?e&&e.call(t):o(t,e),0))},m.getTag=function(t,e){if(i(t))return t.exifdata[e]},m.getIptcTag=function(t,e){if(i(t))return t.iptcdata[e]},m.getAllTags=function(t){if(!i(t))return{};var e,n=t.exifdata,r={};for(e in n)n.hasOwnProperty(e)&&(r[e]=n[e]);return r},m.getAllIptcTags=function(t){if(!i(t))return{};var e,n=t.iptcdata,r={};for(e in n)n.hasOwnProperty(e)&&(r[e]=n[e]);return r},m.pretty=function(t){if(!i(t))return"";var e,n=t.exifdata,r="";for(e in n)n.hasOwnProperty(e)&&("object"==typeof n[e]?n[e]instanceof Number?r+=e+" : "+n[e]+" ["+n[e].numerator+"/"+n[e].denominator+"]\r\n":r+=e+" : ["+n[e].length+" values]\r\n":r+=e+" : "+n[e]+"\r\n");return r},m.readFromBinaryFile=function(t){return a(t)},void 0===(r=function(){return m}.apply(e,[]))||(t.exports=r)}).call(this)}])})},755:function(t,e,n){"use strict";var i=n(695),r=n(756),o=n(11),a=o(i.a,r.a,!1,null,null,null);a.options.__file="src/views/components/xupload/upload-list.vue",e.a=a.exports},756:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{class:[t.prefixCls+"-list"]},t._l(t.files,function(e){return n("li",{class:t.fileCls(e),on:{click:function(n){t.handleClick(e)}}},[n("span",{on:{click:function(n){t.handlePreview(e)}}},[n("Icon",{attrs:{type:t.format(e)}}),t._v(" "+t._s(e.name)+"\n        ")],1),t._v(" "),n("Icon",{directives:[{name:"show",rawName:"v-show",value:"finished"===e.status,expression:"file.status === 'finished'"}],class:[t.prefixCls+"-list-remove"],attrs:{type:"ios-close-empty"},nativeOn:{click:function(n){t.handleRemove(e)}}}),t._v(" "),n("transition",{attrs:{name:"fade"}},[e.showProgress?n("i-progress",{attrs:{"stroke-width":2,percent:t.parsePercentage(e.percentage),status:"finished"===e.status&&e.showProgress?"success":"normal"}}):t._e()],1)],1)}))},r=[];i._withStripped=!0;var o={render:i,staticRenderFns:r};e.a=o},757:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:[t.prefixCls]},[n("div",{class:t.classes,on:{click:t.handleClick,drop:function(e){e.preventDefault(),t.onDrop(e)},dragover:function(e){e.preventDefault(),t.dragOver=!0},dragleave:function(e){e.preventDefault(),t.dragOver=!1}}},[n("input",{ref:"input",class:[t.prefixCls+"-input"],attrs:{type:"file",multiple:t.multiple,accept:t.accept},on:{change:t.handleChange}}),t._v(" "),t._t("default")],2),t._v(" "),t._t("tip"),t._v(" "),t.showUploadList?n("upload-list",{attrs:{files:t.fileList},on:{"on-file-remove":t.handleRemove,"on-file-preview":t.handlePreview}}):t._e()],2)},r=[];i._withStripped=!0;var o={render:i,staticRenderFns:r};e.a=o},768:function(t,e,n){"use strict";var i=function(t){return"x"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x")?t.pageX:t.pageY},r=function(t){return t=Math.floor(t),t<10?"0"+t:t+""},o=function(t){var e=0;return e=Math.floor(t/60),t-=60*e,r(e)+":"+r(t)};e.a={name:"vueVideo",props:{sources:Array,options:{type:Object,default:function(){return{autoplay:!1,volume:.9,poster:""}}}},data:function(){return{$video:null,video:{$videoSlider:null,len:0,current:0,loaded:0,moving:!1,displayTime:"00:00",pos:{start:0,width:0,innerWidth:0,current:0}},volume:{$volBox:null,muted:!1,percent:60,moving:!1,pos:{start:0,width:0,innerWidth:0,current:0}},player:{$player:null,pos:null},tmp:{contrlHideTimer:null},state:{contrlShow:!1,vol:.5,currentTime:0,fullScreen:!1,playing:!1}}},ready:function(){this.init()},mounted:function(){this.init()},beforeDestroy:function(){document.body.removeEventListener("mousemove",this.mouseMoveAction),document.body.removeEventListener("mouseup",this.mouseUpAction)},methods:{init:function(){this.$video=this.$el.getElementsByTagName("video")[0],this.initCore(),this.options.autoplay&&this.play(),document.body.addEventListener("mousemove",this.mouseMoveAction,!1),document.body.addEventListener("mouseup",this.mouseUpAction,!1)},initCore:function(){this.initVol(),this.initVideo(),this.initPlayer();var t=this.options.volume||.9;this.setVol(t)},initPlayer:function(){var t=this.$el.getElementsByClassName("__cov-video-container")[0];this.player.pos=t.getBoundingClientRect(),this.player.$player=t},initVol:function(){var t=this.$el.getElementsByClassName("__cov-contrl-vol-slider")[0],e=t.getElementsByClassName("__cov-contrl-vol-inner")[0];this.volume.$volBox=t,this.volume.pos.innerWidth=e.getBoundingClientRect().width,this.volume.pos.start=t.getBoundingClientRect().left,this.volume.pos.width=t.getBoundingClientRect().width-this.volume.pos.innerWidth},initVideo:function(){var t=this.$el.getElementsByClassName("__cov-contrl-video-slider")[0],e=t.getElementsByClassName("__cov-contrl-video-inner")[0];this.$videoSlider=t,this.video.pos.start=t.getBoundingClientRect().left,this.video.pos.innerWidth=e.getBoundingClientRect().width,this.video.pos.width=t.getBoundingClientRect().width-this.video.pos.innerWidth,this.getTime()},mouseEnterVideo:function(){this.tmp.contrlHideTimer&&(clearTimeout(this.tmp.contrlHideTimer),this.tmp.contrlHideTimer=null),this.state.contrlShow=!0},mouseLeaveVideo:function(t){var e=this;this.tmp.contrlHideTimer&&clearTimeout(this.tmp.contrlHideTimer),this.tmp.contrlHideTimer=setTimeout(function(){e.state.contrlShow=!1,e.tmp.contrlHideTimer=null},2e3)},toggleContrlShow:function(){this.state.contrlShow=!this.state.contrlShow},getTime:function(){var t=this;this.$video.addEventListener("durationchange",function(t){console.log(t)}),this.$video.addEventListener("progress",function(e){t.video.loaded=100*(t.$video.buffered.end(0)/t.$video.duration-1)}),this.video.len=this.$video.duration},setVideoByTime:function(t){this.$video.currentTime=Math.floor(t*this.video.len)},play:function(){var t=this;this.state.playing=!this.state.playing,this.$video&&(this.state.playing?(this.$video.play(),this.mouseLeaveVideo(),this.$video.addEventListener("timeupdate",this.timeline),this.$video.addEventListener("ended",function(e){t.state.playing=!1,t.video.pos.current=0,t.$video.currentTime=0})):this.$video.pause())},timeline:function(){var t=this.$video.currentTime/this.$video.duration;this.video.pos.current=(this.video.pos.width*t).toFixed(3),this.video.displayTime=o(this.$video.duration-this.$video.currentTime)},volMove:function(t){this.initVol(),this.volume.moving=!0},videoMove:function(t){this.initVideo(),this.video.moving=!0},slideClick:function(t){this.videoSlideMove(t)},volSlideClick:function(t){this.volSlideMove(t)},volMuted:function(){this.$video.muted=!this.$video.muted,this.volume.muted=this.$video.muted},setVol:function(t){this.$video&&(this.volume.pos.current=t*this.volume.pos.width,this.volume.percent=100*t,this.$video.volume=t)},fullScreen:function(){this.state.fullScreen?(this.state.fullScreen=!1,document.webkitCancelFullScreen()):(this.state.fullScreen=!0,this.$video.webkitRequestFullScreen()),setTimeout(this.initVideo,200)},mouseMoveAction:function(t){this.volume.moving&&this.volSlideMove(t),this.video.moving&&this.videoSlideMove(t),this.contrlHider(t)},contrlHider:function(t){var e=i(t,"x"),n=i(t,"y");if(this.player.pos)return e>this.player.pos.left&&e<this.player.pos.left+this.player.pos.width&&n>this.player.pos.top+.6*this.player.pos.height&&n<this.player.pos.top+this.player.pos.height?this.mouseEnterVideo():this.mouseLeaveVideo()},volSlideMove:function(t){var e=i(t)-this.volume.pos.start;e>0&&e<this.volume.pos.width&&this.setVol(e/this.volume.pos.width)},videoSlideMove:function(t){var e=i(t)-this.video.pos.start;e>0&&e<this.video.pos.width&&(this.video.pos.current=e,this.setVideoByTime(e/this.video.pos.width))},mouseUpAction:function(t){this.volume.moving=!1,this.video.moving=!1}}}},770:function(t,e){},771:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"voice",class:t.isPlaying?"active":"",on:{click:t.togglePlay}},[n("audio",{ref:"player",staticStyle:{display:"none"},attrs:{controls:"controls",preload:"auto",src:t.src},on:{ended:t.ended}})])},r=[];i._withStripped=!0;var o={render:i,staticRenderFns:r};e.a=o},776:function(t,e,n){"use strict";function i(t){a||n(894)}var r=n(768),o=n(895),a=!1,s=n(11),u=i,l=s(r.a,o.a,!1,u,null,null);l.options.__file="src/views/components/vueVideo.vue",e.a=l.exports},894:function(t,e){},895:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"__cov-video-container",on:{mouseenter:t.mouseEnterVideo,mouseleave:t.mouseLeaveVideo}},[n("video",{staticClass:"__cov-video",class:{"hide-cursor":!t.state.contrlShow},attrs:{poster:t.options.poster}},t._l(t.sources,function(t){return n("source",{attrs:{src:t.src,type:t.type}})})),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.state.contrlShow,expression:"state.contrlShow"}],staticClass:"__cov-contrl-content",attrs:{transition:"fade"}},[n("button",{staticClass:"__cov-contrl-play-btn",on:{click:t.play}},[n("svg",{directives:[{name:"show",rawName:"v-show",value:!t.state.playing,expression:"!state.playing"}],staticClass:"__cov-contrl-play-btn-icon",attrs:{viewBox:"0 0 47 57",version:"1.1",xmlns:"http://www.w3.org/2000/svg"}},[n("title",[t._v("Triangle 1")]),t._v(" "),n("desc",[t._v("Created with Sketch.")]),t._v(" "),n("defs"),t._v(" "),n("g",{attrs:{id:"Page-1",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"}},[n("polygon",{attrs:{id:"Triangle-1",stroke:"#FFFFFF",fill:"#FFFFFF",points:"1 56 1 1 47 28.5"}})])]),t._v(" "),n("svg",{directives:[{name:"show",rawName:"v-show",value:t.state.playing,expression:"state.playing"}],staticClass:"__cov-contrl-play-btn-icon",attrs:{viewBox:"0 0 15 22",version:"1.1",xmlns:"http://www.w3.org/2000/svg"}},[n("title",[t._v("Combined Shape")]),t._v(" "),n("desc",[t._v("Created with Sketch.")]),t._v(" "),n("defs",[n("path",{attrs:{d:"M0,0.979149244 L5,0.979149244 L5,22 L0,22 L0,0.979149244 Z M10,0.979149244 L15,0.979149244 L15,22 L10,22 L10,0.979149244 Z",id:"path-1"}}),t._v(" "),n("mask",{attrs:{id:"mask-2",maskContentUnits:"userSpaceOnUse",maskUnits:"objectBoundingBox",x:"0",y:"0",width:"15",height:"21.0208508",fill:"white"}},[n("use",{attrs:{"xlink:href":"#path-1"}})])]),t._v(" "),n("g",{attrs:{id:"Page-1",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"}},[n("use",{attrs:{id:"Combined-Shape",stroke:"#FFFFFF",mask:"url(#mask-2)","stroke-width":"2",fill:"#FFFFFF","xlink:href":"#path-1"}})])])]),t._v(" "),n("div",{staticClass:"__cov-contrl-video-slider",on:{click:t.slideClick,mousedown:t.videoMove}},[n("div",{staticClass:"__cov-contrl-video-inner",style:{transform:"translate3d("+t.video.pos.current+"px, 0, 0)"}}),t._v(" "),n("div",{staticClass:"__cov-contrl-video-rail"},[n("div",{staticClass:"__cov-contrl-video-rail-inner",style:{transform:"translate3d("+t.video.loaded+"%, 0, 0)"}})])]),t._v(" "),n("div",{staticClass:"__cov-contrl-video-time"},[n("span",{staticClass:"__cov-contrl-video-time-text"},[t._v(t._s(t.video.displayTime))])]),t._v(" "),n("div",{staticClass:"__cov-contrl-vol-box"},[n("button",{staticClass:"__cov-contrl-play-btn",on:{click:t.volMuted}},[n("svg",{staticClass:"__cov-contrl-vol-btn-icon",attrs:{viewBox:"0 0 41 44",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[n("title",[t._v("vol")]),t._v(" "),n("desc",[t._v("Created with Sketch.")]),t._v(" "),n("defs",[n("path",{attrs:{d:"M8.61522369,12 L20,0.615223689 L20,37.3847763 L8.61522369,26 L1.99201702,26 C0.891856397,26 0,25.1029399 0,23.9941413 L0,14.0058587 C0,12.8980535 0.900176167,12 1.99201702,12 L8.61522369,12 L8.61522369,12 Z",id:"cov-vol"}})]),t._v(" "),n("g",{attrs:{id:"Page-1",stroke:"none","stroke-width":"2",fill:"none","fill-rule":"evenodd"}},[n("g",{attrs:{id:"vol",transform:"translate(2.000000, 3.000000)"}},[n("g",{attrs:{id:"cov-vol-icon"}},[n("g",{attrs:{id:"Combined-Shape-Clipped"}},[n("path",{directives:[{name:"show",rawName:"v-show",value:t.volume.percent>1&&!t.volume.muted,expression:"volume.percent > 1 && !volume.muted"}],attrs:{d:"M25,29.5538997 C28.4589093,27.6757536 31.2629093,23.2984641 31.2629093,19.7769499 C31.2629093,16.2554357 28.4589093,11.8781461 25,10",id:"vol-range-2",stroke:"#FFFFFF"}}),t._v(" "),n("path",{directives:[{name:"show",rawName:"v-show",value:t.volume.percent>70&&!t.volume.muted,expression:"volume.percent > 70 && !volume.muted"}],attrs:{d:"M28,35.5538997 C33.5816016,32.5231573 38.1063837,25.4595762 38.1063837,19.7769499 C38.1063837,14.0943235 33.5816016,7.03074247 28,4",id:"vol-range-2",stroke:"#FFFFFF"}}),t._v(" "),n("mask",{attrs:{id:"mask-2",fill:"white"}},[n("use",{attrs:{"xlink:href":"#cov-vol"}})]),t._v(" "),n("use",{attrs:{id:"vol-path",stroke:"#FFFFFF","stroke-width":"3","xlink:href":"#cov-vol"}}),t._v(" "),n("g",{attrs:{id:"Combined-Shape",mask:"url(#mask-2)",stroke:"#FFFFFF","stroke-width":"2",fill:"#FFFFFF"}},[n("path",{attrs:{d:"M8.61522369,12 L20,0.615223689 L20,37.3847763 L8.61522369,26 L1.99201702,26 C0.891856397,26 0,25.1029399 0,23.9941413 L0,14.0058587 C0,12.8980535 0.900176167,12 1.99201702,12 L8.61522369,12 L8.61522369,12 Z",id:"cov-vol"}})])])])])])])]),t._v(" "),n("div",{staticClass:"__cov-contrl-vol-slider",on:{click:t.volSlideClick,mousedown:t.volMove}},[n("div",{staticClass:"__cov-contrl-vol-inner",style:{transform:"translate3d("+t.volume.pos.current+"px, 0, 0)"}}),t._v(" "),n("div",{staticClass:"__cov-contrl-vol-rail"})])]),t._v(" "),n("button",{staticClass:"__cov-contrl-play-btn",on:{click:t.fullScreen}},[n("svg",{staticClass:"__cov-contrl-vol-btn-icon",attrs:{viewBox:"0 0 33 33",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[n("defs"),t._v(" "),n("g",{attrs:{id:"Page-1",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"}},[n("path",{attrs:{d:"M31.1682064,22 L31.1682064,31.0073537 L22,31.0073537 M22,1 L31.0073537,1 L31.0073537,10.1682064 M1,10.0073537 L1,1 L10.1682064,1 M10.0073537,31.1682064 L1,31.1682064 L1,22",id:"Combined-Shape",stroke:"#FFFFFF","stroke-width":"2"}})])])])])])])},r=[];i._withStripped=!0;var o={render:i,staticRenderFns:r};e.a=o},923:function(t,e,n){"use strict";var i=n(678),r=n.n(i),o=n(1);e.a={data:function(){return{cfg_name:"",cfg_id:0,config:{},action:"edit",loading:!0}},mounted:function(){this.init_config_data()},methods:{init_config_data:function(){var t=this;this.loading=!0,this.$http.get("configs?cfg_name="+this.cfg_name).then(function(e){if(o.a.isArray(e.body.data)&&0===e.body.data.length)t.action="add";else{0==e.body.data.cfg_id&&(t.action="add");for(var n in e.body.data.cfg_value)t.$set(t.config,n,e.body.data.cfg_value[n]);t.cfg_id=e.body.data.cfg_id}t.initFinished(),t.loading=!1}).catch(function(e){t.$Message.error(e.message)})},initFinished:function(){},handleSubmit:function(){var t=this,e="add"===this.action?["post","configs"]:["put","configs/"+this.cfg_id],n=r()(e,2),i=n[0],a=n[1],s={cfg_name:this.cfg_name,cfg_value:this.config};this.loading=!0,this.$http[i](a,s).then(function(e){var n=t.cfg_name;"lesson"==n&&(n="lesson_config"),"params"==n&&(n="configs"),"org_pc_ui"==n&&(n="quick_navs"),t.$Message.success("保存成功!"),o.a.isDefined(t.$store.state.gvars[n])&&t.$store.dispatch("updateGlobalVar",n),t.init_config_data()}).catch(function(e){t.$Message.error(e.message)})},restoreDefault:function(){var t=this;this.confirm("你确定恢复默认设置吗？").then(function(){t.loading=!0,t.$rest("configs").delete(t.cfg_id).success(function(e){t.$Message.success("恢复成功");var n="";"org_pc_ui"==t.cfg_name&&(n="quick_navs"),"params"==t.cfg_name&&(n="configs"),""!==n&&t.$store.dispatch("updateGlobalVar",n),t.init_config_data()}).error(function(e){t.$Message.error(e.body.message)})})}}}}});