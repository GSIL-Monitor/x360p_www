webpackJsonp([223],{1644:function(t,e,n){"use strict";var a=n(678),i=n.n(a),s=n(209),o=n(207),r=n(208);e.a={mixins:[s.a,o.a,r.a],data:function(){return{cfg_id:0,cfg_name:"print_vars",data:{}}},mounted:function(){this.init_data()},methods:{ok:function(){var t=this,e={cfg_name:this.cfg_name,cfg_value:this.data},n=0==this.cfg_id?["post","configs"]:["put","configs/"+this.cfg_id],a=i()(n,2),s=a[0],o=a[1];this.$rest(o)[s](e).success(function(e){t.$Message.success("保存成功"),t.$store.dispatch("updateGlobalVar","configs"),t.close()}).error(function(e){t.$Message.error(e.body.message)})},init_data:function(){var t=this;this.$rest("configs?cfg_name="+this.cfg_name).get().success(function(e){t.cfg_id=e.cfg_id,t.data=e.cfg_value}).error(function(e){t.$Message.error(e.body.message)})},addDefine:function(t){this.$Modal.open("system/configs/print/customize-define-modal.vue",{on:{save:function(e){t.define.push(e)}}}).then(function(t){t.show("添加特殊值")})},getBranchs:function(t){var e=this,n=[];return t.bid.forEach(function(t){n.push(e.$filter("branch_name")(t))}),n.join("、")},getCompanys:function(t){var e=this,n=[];return t.dept_id.forEach(function(t){n.push(e.$filter("dpt_name")(t))}),n.join("、")},delDefineItem:function(t,e){t.define.splice(e,1)}}}},2262:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Modal",{directives:[{name:"drag-modal",rawName:"v-drag-modal"}],attrs:{"mask-closable":!1,title:t.modal$.title,width:"700"},model:{value:t.modal$.show,callback:function(e){t.$set(t.modal$,"show",e)},expression:"modal$.show"}},[n("table",{staticClass:"modal-table"},[n("thead",[n("tr",[n("th",{attrs:{width:"120"}},[n("div",{staticClass:"ivu-table-cell"},[t._v("变量名")])]),t._v(" "),n("th",[n("div",{staticClass:"ivu-table-cell"},[t._v("默认值")])]),t._v(" "),n("th",[n("div",{staticClass:"ivu-table-cell"},[t._v("特殊值")])])])]),t._v(" "),n("tbody",t._l(t.data,function(e,a){return n("tr",[n("td",[n("div",{staticClass:"ivu-table-cell"},[n("span",[t._v("{{diy.")]),t._v(" "),n("span",[t._v(t._s(e.name))]),t._v(" "),n("span",[t._v("}}")])])]),t._v(" "),n("td",[n("div",{staticClass:"ivu-table-cell"},[n("Input",{staticStyle:{width:"150px"},model:{value:e.default,callback:function(n){t.$set(e,"default",n)},expression:"value.default"}})],1)]),t._v(" "),n("td",[n("div",{staticClass:"ivu-table-cell vars-define"},[t._l(e.define,function(a,i){return n("p",{staticStyle:{"margin-bottom":"4px"}},["bid"===a.field?n("span",[t._v(t._s(t.getBranchs(a)))]):n("span",[t._v(t._s(t.getCompanys(a)))]),t._v("："+t._s(a.value)+"\n\t\t\t\t\t\t\t"),n("Icon",{attrs:{type:"close",color:"#ef0101"},nativeOn:{click:function(n){t.delDefineItem(e,i)}}})],1)}),t._v(" "),n("Button",{attrs:{type:"ghost",size:"small",icon:"plus",shape:"circle",title:"添加特殊值"},on:{click:function(n){t.addDefine(e)}}})],2)])])}))]),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"ghost"},on:{click:t.close}},[t._v("关闭")]),t._v(" "),n("Button",{attrs:{type:"primary"},on:{click:t.ok}},[t._v("保存")])],1)])},i=[];a._withStripped=!0;var s={render:a,staticRenderFns:i};e.a=s},440:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(1644),i=n(2262),s=n(11),o=s(a.a,i.a,!1,null,null,null);o.options.__file="src/views/system/configs/print/customize-field-modal.vue",e.default=o.exports},678:function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(684),s=a(i),o=n(210),r=a(o);e.default=function(){function t(t,e){var n=[],a=!0,i=!1,s=void 0;try{for(var o,c=(0,r.default)(t);!(a=(o=c.next()).done)&&(n.push(o.value),!e||n.length!==e);a=!0);}catch(t){i=!0,s=t}finally{try{!a&&c.return&&c.return()}finally{if(i)throw s}}return n}return function(e,n){if(Array.isArray(e))return e;if((0,s.default)(Object(e)))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},684:function(t,e,n){t.exports={default:n(685),__esModule:!0}},685:function(t,e,n){n(36),n(26),t.exports=n(686)},686:function(t,e,n){var a=n(56),i=n(3)("iterator"),s=n(18);t.exports=n(2).isIterable=function(t){var e=Object(t);return void 0!==e[i]||"@@iterator"in e||s.hasOwnProperty(a(e))}}});