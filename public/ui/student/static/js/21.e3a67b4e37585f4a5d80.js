webpackJsonp([21],{IpLQ:function(e,n,t){var s=t("PL+W");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);t("FIqI")("17350e62",s,!0,{})},LSW6:function(e,n,t){"use strict";function s(e){t("IpLQ")}Object.defineProperty(n,"__esModule",{value:!0});var i=t("ND7p");t.n(i);for(var o in i)"default"!==o&&function(e){t.d(n,e,function(){return i[e]})}(o);var r=t("V1zd"),a=t.n(r),u=t("vyaa"),l=t("vSla"),d=s,c=l(a.a,u.a,!1,d,null,null);n.default=c.exports},ND7p:function(e,n,t){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=t("TVG1"),o=s(i),r=t("8Llf"),a=s(r),u=t("gpPJ"),l=s(u),d=t("CKVb"),c=s(d),p=t("cTn1"),h=s(p),m=t("fvyU"),f=s(m),w=t("IXui"),v=s(w),g={name:"",newname:"",mobile:"",newmobile:"",vcode:"",oldpassword:"",password:"",repassword:""};n.default={mixins:[a.default],components:{Cell:l.default,Popup:h.default,Group:c.default,XInput:f.default,XButton:v.default},data:function(){return{popup_setting:!1,action:"",tId:null,send:{text:"发送验证码",loading:!1},user:o.default.copy(g)}},mounted:function(){this.init_data()},methods:{sendCapt:function(){if(!this.checkTel())return!1;this.getCapt()},getCapt:function(){var e=this,n=59;if(this.send.loading)return!1;this.send={loading:!0,text:"60s"},this.tId=setInterval(function(){n<10&&(n="0"+n),e.send.text=n+"s",--n<0&&(clearInterval(e.tId),e.send={loading:!1,text:"发送验证码"})},1e3),this.$rest("open/vcode").post({mobile:this.user.newmobile,type:"change"}).success(function(e){}).error(function(n){e.alert("获取验证码失败",n.body.message),clearInterval(e.tId),e.send={loading:!1,text:"发送验证码"}})},checkTel:function(){var e=this.user.newmobile;return""===e?(this.alert("请先输入手机号","手机号不能为空"),!1):!(""!==e&&!/^1[35789]{1}\d{9}$/.test(e))||(this.alert("请重新输入手机号","手机号格式不正确"),!1)},show_popup:function(e){this.action=e,this.popup_setting=!0},hide_popup:function(){this.user.newmobile="",this.user.newname=this.user.name,this.popup_setting=!1,this.send={text:"发送验证码",loading:!1},window.clearInterval(this.tId)},edit_profile:function(){var e=this;if(this.user.password===this.user.repassword){var n={action:this.action};"edit_name"==this.action?n.name=this.user.newname:"edit_mobile"==this.action?(n.mobile=this.user.newmobile,n.vcode=this.user.vcode):(n.oldpassword=this.user.oldpassword,n.password=this.user.password,n.repassword=this.user.repassword),this.$http.post("users/edit_profile",n).then(function(n){"edit_name"==e.action?(e.user.name=e.user.newname,e.$store.commit("updateUserInfo",{user:e.user,action:"changeName"})):"edit_mobile"==e.action&&(e.user.mobile=e.user.newmobile,e.$store.commit("updateUserInfo",{user:e.user,action:"changeMobile"})),e.toast("修改成功","success"),e.hide_popup()}).catch(function(n){console.log(n),e.toast(n.body.message,"warn")})}else this.toast("两次密码不一致","warn")},init_data:function(){var e=this.$store.state.user.info;e&&(this.user.name=e.name,this.user.newname=e.name,this.user.mobile=e.mobile)},logout:function(){var e=this;this.$http.get("logout").then(function(n){e.$store.commit("clearLoginInfo"),e.$router.push({path:"../login"})}).catch(function(n){e.$Message.error(n.body.message)})}},computed:{required:function(){var e=this.user;return"edit_name"==this.action?0===e.newname.length:"edit_mobile"==this.action?!/^1[35789]{1}\d{9}$/.test(e.newmobile)||0===e.vcode.length:0===e.oldpassword.length||0===e.password.length||0===e.repassword.length}}}},"PL+W":function(e,n,t){n=e.exports=t("UTlt")(!0),n.push([e.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","",{version:3,sources:[],names:[],mappings:"",file:"setting.vue",sourceRoot:""}])},V1zd:function(e,n,t){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=t("TVG1"),o=s(i),r=t("8Llf"),a=s(r),u=t("gpPJ"),l=s(u),d=t("CKVb"),c=s(d),p=t("cTn1"),h=s(p),m=t("fvyU"),f=s(m),w=t("IXui"),v=s(w),g={name:"",newname:"",mobile:"",newmobile:"",vcode:"",oldpassword:"",password:"",repassword:""};n.default={mixins:[a.default],components:{Cell:l.default,Popup:h.default,Group:c.default,XInput:f.default,XButton:v.default},data:function(){return{popup_setting:!1,action:"",tId:null,send:{text:"发送验证码",loading:!1},user:o.default.copy(g)}},mounted:function(){this.init_data()},methods:{sendCapt:function(){if(!this.checkTel())return!1;this.getCapt()},getCapt:function(){var e=this,n=59;if(this.send.loading)return!1;this.send={loading:!0,text:"60s"},this.tId=setInterval(function(){n<10&&(n="0"+n),e.send.text=n+"s",--n<0&&(clearInterval(e.tId),e.send={loading:!1,text:"发送验证码"})},1e3),this.$rest("open/vcode").post({mobile:this.user.newmobile,type:"change"}).success(function(e){}).error(function(n){e.alert("获取验证码失败",n.body.message),clearInterval(e.tId),e.send={loading:!1,text:"发送验证码"}})},checkTel:function(){var e=this.user.newmobile;return""===e?(this.alert("请先输入手机号","手机号不能为空"),!1):!(""!==e&&!/^1[35789]{1}\d{9}$/.test(e))||(this.alert("请重新输入手机号","手机号格式不正确"),!1)},show_popup:function(e){this.action=e,this.popup_setting=!0},hide_popup:function(){this.user.newmobile="",this.user.newname=this.user.name,this.popup_setting=!1,this.send={text:"发送验证码",loading:!1},window.clearInterval(this.tId)},edit_profile:function(){var e=this;if(this.user.password===this.user.repassword){var n={action:this.action};"edit_name"==this.action?n.name=this.user.newname:"edit_mobile"==this.action?(n.mobile=this.user.newmobile,n.vcode=this.user.vcode):(n.oldpassword=this.user.oldpassword,n.password=this.user.password,n.repassword=this.user.repassword),this.$http.post("users/edit_profile",n).then(function(n){"edit_name"==e.action?(e.user.name=e.user.newname,e.$store.commit("updateUserInfo",{user:e.user,action:"changeName"})):"edit_mobile"==e.action&&(e.user.mobile=e.user.newmobile,e.$store.commit("updateUserInfo",{user:e.user,action:"changeMobile"})),e.toast("修改成功","success"),e.hide_popup()}).catch(function(n){console.log(n),e.toast(n.body.message,"warn")})}else this.toast("两次密码不一致","warn")},init_data:function(){var e=this.$store.state.user.info;e&&(this.user.name=e.name,this.user.newname=e.name,this.user.mobile=e.mobile)},logout:function(){var e=this;this.$http.get("logout").then(function(n){e.$store.commit("clearLoginInfo"),e.$router.push({path:"../login"})}).catch(function(n){e.$Message.error(n.body.message)})}},computed:{required:function(){var e=this.user;return"edit_name"==this.action?0===e.newname.length:"edit_mobile"==this.action?!/^1[35789]{1}\d{9}$/.test(e.newmobile)||0===e.vcode.length:0===e.oldpassword.length||0===e.password.length||0===e.repassword.length}}}},vyaa:function(e,n,t){"use strict";var s=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("group",[t("cell",{attrs:{title:"姓名"},model:{value:e.user.name,callback:function(n){e.$set(e.user,"name",n)},expression:"user.name"}})],1),e._v(" "),t("group",[t("cell",{attrs:{title:"手机号绑定","is-link":""},nativeOn:{click:function(n){e.show_popup("edit_mobile")}}},[t("span",{staticClass:"text-disable",attrs:{slot:"value"},slot:"value"},[e._v(e._s(e.user.mobile))])]),e._v(" "),t("cell",{attrs:{title:"修改密码","is-link":""},nativeOn:{click:function(n){e.show_popup("resetpwd")}}})],1),e._v(" "),t("group",[t("cell",{attrs:{title:"退出","is-link":""},nativeOn:{click:function(n){return e.logout(n)}}})],1),e._v(" "),t("popup",{style:{top:e.headerHeight+"px"},attrs:{height:"100%",position:"bottom"},model:{value:e.popup_setting,callback:function(n){e.popup_setting=n},expression:"popup_setting"}},["edit_name"==e.action?t("group",[t("x-input",{attrs:{title:"",type:"text",placeholder:"姓名 ",required:!0},model:{value:e.user.newname,callback:function(n){e.$set(e.user,"newname",n)},expression:"user.newname"}})],1):e._e(),e._v(" "),"edit_mobile"==e.action?t("group",[t("x-input",{attrs:{title:"",type:"text",placeholder:"请输入手机号",required:!0},model:{value:e.user.newmobile,callback:function(n){e.$set(e.user,"newmobile",n)},expression:"user.newmobile"}},[t("x-button",{attrs:{slot:"right",type:"primary",mini:"",disabled:e.send.loading},nativeOn:{click:function(n){return e.sendCapt(n)}},slot:"right"},[e._v(e._s(e.send.text))])],1),e._v(" "),t("x-input",{attrs:{title:"",type:"text",placeholder:"请输入验证码 ",required:!0},model:{value:e.user.vcode,callback:function(n){e.$set(e.user,"vcode",n)},expression:"user.vcode"}})],1):e._e(),e._v(" "),"resetpwd"==e.action?t("group",[t("x-input",{attrs:{title:"",required:!0,type:"password",placeholder:"初始密码"},model:{value:e.user.oldpassword,callback:function(n){e.$set(e.user,"oldpassword",n)},expression:"user.oldpassword"}}),e._v(" "),t("x-input",{attrs:{title:"",required:!0,type:"password",placeholder:"新密码"},model:{value:e.user.password,callback:function(n){e.$set(e.user,"password",n)},expression:"user.password"}}),e._v(" "),t("x-input",{attrs:{title:"",required:!0,type:"password",placeholder:"再输一遍"},model:{value:e.user.repassword,callback:function(n){e.$set(e.user,"repassword",n)},expression:"user.repassword"}})],1):e._e(),e._v(" "),t("div",{staticClass:"pd-10"},[t("x-button",{staticClass:"bg-blue",attrs:{type:"primary",disabled:e.required},nativeOn:{click:function(n){return e.edit_profile(n)}}},[e._v("确认")]),e._v(" "),t("x-button",{nativeOn:{click:function(n){return e.hide_popup(n)}}},[e._v("取消")])],1)],1)],1)},i=[],o={render:s,staticRenderFns:i};n.a=o}});
//# sourceMappingURL=21.e3a67b4e37585f4a5d80.js.map