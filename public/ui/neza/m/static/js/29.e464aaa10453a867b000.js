webpackJsonp([29],{"+mid":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("Gi0K");n.n(a);for(var i in a)"default"!==i&&function(t){n.d(e,t,function(){return a[t]})}(i);var r=n("HLLn"),o=n.n(r),u=n("qvIf"),s=n("C7Lr"),l=s(o.a,u.a,!1,null,null,null);e.default=l.exports},"9ium":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("gQw6");n.n(a);for(var i in a)"default"!==i&&function(t){n.d(e,t,function(){return a[t]})}(i);var r=n("IWAI"),o=n.n(r),u=n("ejXP"),s=n("C7Lr"),l=s(o.a,u.a,!1,null,null,null);e.default=l.exports},Gi0K:function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n("+VlJ"),r=(a(i),n("VD+p")),o=a(r),u=n("TVG1"),s=a(u),l=n("8Llf"),d=a(l),c=n("KUj2"),f=a(c),_=n("m1Gx"),h=a(_),m=n("9pan"),p=a(m);e.default={mixins:[d.default,f.default],components:{XTable:h.default,XPage:p.default},props:{bids:{type:Array,default:[]},group:{type:String,default:"bid"},yearMonth:{type:String,default:(0,o.default)(new Date).format("YYYY-MM")}},data:function(){return{data:[],total:0,pageIndex:1,pageSize:10,att_way_list:{0:"登记考勤",1:"刷卡考勤",2:"老师点名考勤",3:"自由登记考勤"}}},watch:{bids:function(t){this.pagenation(1)},group:function(t){this.pagenation(1)},yearMonth:function(t){this.pagenation(1)}},mounted:function(){this.init_data()},methods:{pagenation:function(t){this.pageIndex=t,this.init_data()},init_data:function(){var t=this,e={page:this.pageIndex,pagesize:this.pageSize};this.showLoading(),this.$rest(this.data_uri).get(e).success(function(e){t.data=e.list,t.total=e.total,t.pageSize=parseInt(e.pagesize),t.loadFinished()})},loadFinished:function(){var t=this,e=this.data;e&&e.length>0&&e.push({column_total:!0}),setTimeout(function(){t.hideLoading()},300)},getTotal:function(t){var e=this.data,n=0;return e&&e.length>0&&(e.forEach(function(e){e[t]&&(n+=Number(e[t]))}),u._.isNumber(e[e.length-2][t])||(n=parseFloat(n).toFixed(2))),n}},computed:{tableHeight:function(){return(window.innerHeight||document.innerHeight)-(101+this.headerHeight)},columns:function(){var t=this,e=this.group,n={key:"first_column",width:100,fixed:"left",column_render:function(t,e){},render:function(t,e){return e.row.column_total?"合计":n.column_render(t,e)}},a=function(e,n,a){return n.row.column_total?e("span",{class:"text-danger"},t.getTotal(a)):n.row[a]},i={title:"上课次数",key:"total_class_attendance",width:100,render:function(t,e){return a(t,e,"total_class_attendance")}},r={title:"应到人次数",key:"total_student_attendance",width:120,render:function(t,e){return a(t,e,"total_student_attendance")}},o={title:"出勤计费次数",key:"total_in",width:150,render:function(t,e){return a(t,e,"total_in")}},u={title:"出勤未计费次数",key:"in_unconsume_num",width:150,render:function(t,e){return a(t,e,"in_unconsume_num")}},s={title:"出勤率",key:"in_rate",width:100,render:function(t,e){return e.row.column_total?"--":parseFloat(100*e.row.in_rate).toFixed(2)+"%"}},l={title:"缺勤计费次数",key:"out_consume_num",width:150,render:function(t,e){return a(t,e,"out_consume_num")}},d={title:"缺勤未计费次数",key:"out_unconsume_num",width:150,render:function(t,e){return a(t,e,"out_unconsume_num")}},c={title:"缺勤率",key:"out_rate",width:100,render:function(t,e){return e.row.column_total?"--":parseFloat(100*e.row.out_rate).toFixed(2)+"%"}};switch(e){case"bid":n.title="校区",n.column_render=function(t,e){return e.row.branch?e.row.branch.branch_name:"--"};break;case"lid":n.title="课程",n.column_render=function(t,e){return e.row.lesson?e.row.lesson.lesson_name:"--"};break;case"sj_id":n.title="科目",n.column_render=function(t,e){return e.row.subject?e.row.subject.subject_name:"--"};break;case"cid":n.title="班级",n.column_render=function(t,e){return e.row.cls?e.row.cls.class_name:"--"};break;case"eid":n.title="老师",n.column_render=function(t,e){return e.row.employee?e.row.employee.ename:"--"};break;case"sid":n.title="学员",n.column_render=function(t,e){return e.row.student?e.row.student.student_name:"--"};break;case"att_way":n.title="考勤方式",n.column_render=function(e,n){return t.att_way_list[n.row.att_way]}}return[n,i,r,o,u,s,l,d,c]},data_uri:function(){var t=this.group,e=this.yearMonth+"-01",n=this.yearMonth+"-"+(0,o.default)(this.yearMonth).daysInMonth(),a="";return this.bids.length&&(a=s.default.sprintf("&bid=[In,%s]",this.bids.join(","))),s.default.sprintf("%s?group=%s&int_day=[Between,%s,%s]%s","report_attendances",t,e,n,a)}}}},HLLn:function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n("+VlJ"),r=(a(i),n("VD+p")),o=a(r),u=n("TVG1"),s=a(u),l=n("8Llf"),d=a(l),c=n("KUj2"),f=a(c),_=n("m1Gx"),h=a(_),m=n("9pan"),p=a(m);e.default={mixins:[d.default,f.default],components:{XTable:h.default,XPage:p.default},props:{bids:{type:Array,default:[]},group:{type:String,default:"bid"},yearMonth:{type:String,default:(0,o.default)(new Date).format("YYYY-MM")}},data:function(){return{data:[],total:0,pageIndex:1,pageSize:10,att_way_list:{0:"登记考勤",1:"刷卡考勤",2:"老师点名考勤",3:"自由登记考勤"}}},watch:{bids:function(t){this.pagenation(1)},group:function(t){this.pagenation(1)},yearMonth:function(t){this.pagenation(1)}},mounted:function(){this.init_data()},methods:{pagenation:function(t){this.pageIndex=t,this.init_data()},init_data:function(){var t=this,e={page:this.pageIndex,pagesize:this.pageSize};this.showLoading(),this.$rest(this.data_uri).get(e).success(function(e){t.data=e.list,t.total=e.total,t.pageSize=parseInt(e.pagesize),t.loadFinished()})},loadFinished:function(){var t=this,e=this.data;e&&e.length>0&&e.push({column_total:!0}),setTimeout(function(){t.hideLoading()},300)},getTotal:function(t){var e=this.data,n=0;return e&&e.length>0&&(e.forEach(function(e){e[t]&&(n+=Number(e[t]))}),u._.isNumber(e[e.length-2][t])||(n=parseFloat(n).toFixed(2))),n}},computed:{tableHeight:function(){return(window.innerHeight||document.innerHeight)-(101+this.headerHeight)},columns:function(){var t=this,e=this.group,n={key:"first_column",width:100,fixed:"left",column_render:function(t,e){},render:function(t,e){return e.row.column_total?"合计":n.column_render(t,e)}},a=function(e,n,a){return n.row.column_total?e("span",{class:"text-danger"},t.getTotal(a)):n.row[a]},i={title:"上课次数",key:"total_class_attendance",width:100,render:function(t,e){return a(t,e,"total_class_attendance")}},r={title:"应到人次数",key:"total_student_attendance",width:120,render:function(t,e){return a(t,e,"total_student_attendance")}},o={title:"出勤计费次数",key:"total_in",width:150,render:function(t,e){return a(t,e,"total_in")}},u={title:"出勤未计费次数",key:"in_unconsume_num",width:150,render:function(t,e){return a(t,e,"in_unconsume_num")}},s={title:"出勤率",key:"in_rate",width:100,render:function(t,e){return e.row.column_total?"--":parseFloat(100*e.row.in_rate).toFixed(2)+"%"}},l={title:"缺勤计费次数",key:"out_consume_num",width:150,render:function(t,e){return a(t,e,"out_consume_num")}},d={title:"缺勤未计费次数",key:"out_unconsume_num",width:150,render:function(t,e){return a(t,e,"out_unconsume_num")}},c={title:"缺勤率",key:"out_rate",width:100,render:function(t,e){return e.row.column_total?"--":parseFloat(100*e.row.out_rate).toFixed(2)+"%"}};switch(e){case"bid":n.title="校区",n.column_render=function(t,e){return e.row.branch?e.row.branch.branch_name:"--"};break;case"lid":n.title="课程",n.column_render=function(t,e){return e.row.lesson?e.row.lesson.lesson_name:"--"};break;case"sj_id":n.title="科目",n.column_render=function(t,e){return e.row.subject?e.row.subject.subject_name:"--"};break;case"cid":n.title="班级",n.column_render=function(t,e){return e.row.cls?e.row.cls.class_name:"--"};break;case"eid":n.title="老师",n.column_render=function(t,e){return e.row.employee?e.row.employee.ename:"--"};break;case"sid":n.title="学员",n.column_render=function(t,e){return e.row.student?e.row.student.student_name:"--"};break;case"att_way":n.title="考勤方式",n.column_render=function(e,n){return t.att_way_list[n.row.att_way]}}return[n,i,r,o,u,s,l,d,c]},data_uri:function(){var t=this.group,e=this.yearMonth+"-01",n=this.yearMonth+"-"+(0,o.default)(this.yearMonth).daysInMonth(),a="";return this.bids.length&&(a=s.default.sprintf("&bid=[In,%s]",this.bids.join(","))),s.default.sprintf("%s?group=%s&int_day=[Between,%s,%s]%s","report_attendances",t,e,n,a)}}}},IWAI:function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n("+6Lo"),r=a(i),o=n("S9nr"),u=a(o),s=n("o+C2"),l=a(s),d=n("+mid"),c=a(d),f=n("EBxd"),_=a(f);e.default={mixins:[r.default],components:{XTable:c.default,Datetime:u.default,PopupPicker:l.default,SelectBranch:_.default},data:function(){return{popupShow:!1,filter:["bid"],filterList:[{value:"bid",name:"按校区"},{value:"lid",name:"按课程"},{value:"sj_id",name:"按科目"},{value:"cid",name:"按班级"},{value:"eid",name:"按老师"},{value:"sid",name:"按学员"},{value:"att_way",name:"按考勤方式"}]}}}},ejXP:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bg-white height-full"},[n("div",{staticClass:"x-header"},[n("span",{staticClass:"icon icon-ios-arrow-left",on:{click:t.preMonth}}),t._v(" "),n("datetime",{attrs:{format:"YYYY-MM","max-year":t.maxYear},model:{value:t.yearMonth,callback:function(e){t.yearMonth=e},expression:"yearMonth"}},[n("span",{staticClass:"title"},[t._v(t._s(t.title))])]),t._v(" "),n("span",{staticClass:"icon icon-ios-arrow-right",on:{click:t.nextMonth}}),t._v(" "),n("div",{staticClass:"x-header-filter",on:{click:function(e){t.popupShow=!0}}},[n("i",{staticClass:"icon icon-funnel"}),t._v("\n\t\t\t"+t._s(t.$refs.filter?t.$refs.filter.getNameValues():"按校区")+"\n\t\t")])],1),t._v(" "),n("select-branch",{model:{value:t.bids,callback:function(e){t.bids=e},expression:"bids"}}),t._v(" "),n("x-table",{attrs:{bids:t.bids,"year-month":t.yearMonth,group:t.filter[0]}}),t._v(" "),n("popup-picker",{ref:"filter",attrs:{show:t.popupShow,"show-cell":!1,columns:1,data:t.filterList},on:{"update:show":function(e){t.popupShow=e}},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})],1)},i=[],r={render:a,staticRenderFns:i};e.a=r},gQw6:function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n("+6Lo"),r=a(i),o=n("S9nr"),u=a(o),s=n("o+C2"),l=a(s),d=n("+mid"),c=a(d),f=n("EBxd"),_=a(f);e.default={mixins:[r.default],components:{XTable:c.default,Datetime:u.default,PopupPicker:l.default,SelectBranch:_.default},data:function(){return{popupShow:!1,filter:["bid"],filterList:[{value:"bid",name:"按校区"},{value:"lid",name:"按课程"},{value:"sj_id",name:"按科目"},{value:"cid",name:"按班级"},{value:"eid",name:"按老师"},{value:"sid",name:"按学员"},{value:"att_way",name:"按考勤方式"}]}}}},qvIf:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("x-table",{attrs:{height:t.tableHeight,width:"100%",border:!1,columns:t.columns,data:t.data}}),t._v(" "),n("div",{staticClass:"pd-10 text-center"},[n("x-page",{attrs:{total:t.total,current:t.pageIndex,"page-size":t.pageSize,"show-total":!0},on:{"on-change":t.pagenation}})],1)],1)},i=[],r={render:a,staticRenderFns:i};e.a=r}});
//# sourceMappingURL=29.e464aaa10453a867b000.js.map