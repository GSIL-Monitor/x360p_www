webpackJsonp([24],{"+rr9":function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=a("+6Lo"),r=n(i),o=a("S9nr"),s=n(o),l=a("o+C2"),u=n(l),d=a("nPWc"),c=n(d),f=a("EBxd"),p=n(f);e.default={mixins:[r.default],components:{XTable:c.default,Datetime:s.default,PopupPicker:u.default,SelectBranch:p.default},data:function(){return{popupShow:!1,filter:["report_performances"],filterList:[{name:"签单业绩汇总",value:"report_performances"},{name:"回款业绩汇总",value:"report_performances/employee_receipts"}]}}}},HARp:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bg-white height-full"},[a("div",{staticClass:"x-header"},[a("span",{staticClass:"icon icon-ios-arrow-left",on:{click:t.preMonth}}),t._v(" "),a("datetime",{attrs:{format:"YYYY-MM","max-year":t.maxYear},model:{value:t.yearMonth,callback:function(e){t.yearMonth=e},expression:"yearMonth"}},[a("span",{staticClass:"title"},[t._v(t._s(t.title))])]),t._v(" "),a("span",{staticClass:"icon icon-ios-arrow-right",on:{click:t.nextMonth}}),t._v(" "),a("div",{staticClass:"x-header-filter",on:{click:function(e){t.popupShow=!0}}},[a("i",{staticClass:"icon icon-funnel"}),t._v("\n\t\t\t"+t._s(t.$refs.filter?t.$refs.filter.getNameValues():"签单业绩汇总")+"\n\t\t")])],1),t._v(" "),a("select-branch",{model:{value:t.bids,callback:function(e){t.bids=e},expression:"bids"}}),t._v(" "),a("x-table",{attrs:{bids:t.bids,"year-month":t.yearMonth,group:t.filter[0]}}),t._v(" "),a("popup-picker",{ref:"filter",attrs:{show:t.popupShow,"show-cell":!1,columns:1,data:t.filterList},on:{"update:show":function(e){t.popupShow=e}},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})],1)},i=[],r={render:n,staticRenderFns:i};e.a=r},eYLt:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("x-table",{attrs:{height:t.tableHeight,width:"100%",border:!1,columns:t.columns,data:t.data}}),t._v(" "),a("div",{staticClass:"pd-10 text-center"},[a("x-page",{attrs:{total:t.total,current:t.pageIndex,"page-size":t.pageSize,"show-total":!0},on:{"on-change":t.pagenation}})],1)],1)},i=[],r={render:n,staticRenderFns:i};e.a=r},kl7y:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=a("+6Lo"),r=n(i),o=a("S9nr"),s=n(o),l=a("o+C2"),u=n(l),d=a("nPWc"),c=n(d),f=a("EBxd"),p=n(f);e.default={mixins:[r.default],components:{XTable:c.default,Datetime:s.default,PopupPicker:u.default,SelectBranch:p.default},data:function(){return{popupShow:!1,filter:["report_performances"],filterList:[{name:"签单业绩汇总",value:"report_performances"},{name:"回款业绩汇总",value:"report_performances/employee_receipts"}]}}}},nPWc:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("xSSE");a.n(n);for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);var r=a("q4ao"),o=a.n(r),s=a("eYLt"),l=a("vSla"),u=l(o.a,s.a,!1,null,null,null);e.default=u.exports},q4ao:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=a("MVMM"),r=(n(i),a("6ROu")),o=n(r),s=a("TVG1"),l=n(s),u=a("8Llf"),d=n(u),c=a("KUj2"),f=n(c),p=a("m1Gx"),h=n(p),_=a("9pan"),m=n(_);e.default={mixins:[d.default,f.default],components:{XTable:h.default,XPage:m.default},props:{bids:{type:Array,default:[]},group:{type:String,default:"report_performances"},yearMonth:{type:String,default:(0,o.default)(new Date).format("YYYY-MM")}},data:function(){return{data:[],total:0,pageIndex:1,pageSize:10}},watch:{bids:function(t){this.init_data()},group:function(t){this.pagenation(1)},yearMonth:function(t){this.pagenation(1)}},mounted:function(){this.init_data()},methods:{pagenation:function(t){this.pageIndex=t,this.init_data()},init_data:function(){var t=this,e={page:this.pageIndex,pagesize:this.pageSize};this.showLoading(),this.$rest(this.data_uri).get(e).success(function(e){t.data=e.list,t.total=e.total,t.pageSize=parseInt(e.pagesize),t.loadFinished()})},loadFinished:function(){var t=this,e=this.data;e&&e.length>0&&e.push({column_total:!0}),setTimeout(function(){t.hideLoading()},300)},getTotal:function(t,e){var a=this.data,n=0;return a&&a.length>0&&(a.forEach(function(t){t[e]&&(n+=Number(t[e]))}),s._.isNumber(a[a.length-2][e])||(n=parseFloat(n).toFixed(2))),t("span",{class:"text-danger"},n)}},computed:{tableHeight:function(){return(window.innerHeight||document.innerHeight)-(101+this.headerHeight)},columns:function(){var t=this,e=[],a={title:"工号",key:"eid",width:100},n={title:"姓名",key:"ename",width:100,fixed:"left",render:function(e,a){return a.row.column_total?"合计":t.$filter("ename")(a.row.eid)}},i={title:"签单角色",key:"sale_role_did",width:120,render:function(e,a){return t.labelDicts(a.row.sale_role_did,"sale_role")}},r={title:"签单金额",key:"total_amount",width:100,render:function(e,a){return a.row.column_total?t.getTotal(e,"total_amount"):a.row.total_amount}};return"report_performances/employee_receipts"==this.group&&(i.title="回款角色",r.title="回款金额"),e.push(n,a,i,r),e},data_uri:function(){var t=(0,o.default)(this.yearMonth+"-01").format("YYYYMMDD"),e=(0,o.default)(this.yearMonth+"-"+(0,o.default)(this.yearMonth).daysInMonth()).format("YYYYMMDD"),a=this.group,n="";return this.bids.length&&(n=l.default.sprintf("&bid=[In,%s]",this.bids.join(","))),l.default.sprintf("%s?group=eid,sale_role_did&create_time=[between,%s,%s]%s",a,t,e,n)}}}},thTM:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("kl7y");a.n(n);for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);var r=a("+rr9"),o=a.n(r),s=a("HARp"),l=a("vSla"),u=l(o.a,s.a,!1,null,null,null);e.default=u.exports},xSSE:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=a("MVMM"),r=(n(i),a("6ROu")),o=n(r),s=a("TVG1"),l=n(s),u=a("8Llf"),d=n(u),c=a("KUj2"),f=n(c),p=a("m1Gx"),h=n(p),_=a("9pan"),m=n(_);e.default={mixins:[d.default,f.default],components:{XTable:h.default,XPage:m.default},props:{bids:{type:Array,default:[]},group:{type:String,default:"report_performances"},yearMonth:{type:String,default:(0,o.default)(new Date).format("YYYY-MM")}},data:function(){return{data:[],total:0,pageIndex:1,pageSize:10}},watch:{bids:function(t){this.init_data()},group:function(t){this.pagenation(1)},yearMonth:function(t){this.pagenation(1)}},mounted:function(){this.init_data()},methods:{pagenation:function(t){this.pageIndex=t,this.init_data()},init_data:function(){var t=this,e={page:this.pageIndex,pagesize:this.pageSize};this.showLoading(),this.$rest(this.data_uri).get(e).success(function(e){t.data=e.list,t.total=e.total,t.pageSize=parseInt(e.pagesize),t.loadFinished()})},loadFinished:function(){var t=this,e=this.data;e&&e.length>0&&e.push({column_total:!0}),setTimeout(function(){t.hideLoading()},300)},getTotal:function(t,e){var a=this.data,n=0;return a&&a.length>0&&(a.forEach(function(t){t[e]&&(n+=Number(t[e]))}),s._.isNumber(a[a.length-2][e])||(n=parseFloat(n).toFixed(2))),t("span",{class:"text-danger"},n)}},computed:{tableHeight:function(){return(window.innerHeight||document.innerHeight)-(101+this.headerHeight)},columns:function(){var t=this,e=[],a={title:"工号",key:"eid",width:100},n={title:"姓名",key:"ename",width:100,fixed:"left",render:function(e,a){return a.row.column_total?"合计":t.$filter("ename")(a.row.eid)}},i={title:"签单角色",key:"sale_role_did",width:120,render:function(e,a){return t.labelDicts(a.row.sale_role_did,"sale_role")}},r={title:"签单金额",key:"total_amount",width:100,render:function(e,a){return a.row.column_total?t.getTotal(e,"total_amount"):a.row.total_amount}};return"report_performances/employee_receipts"==this.group&&(i.title="回款角色",r.title="回款金额"),e.push(n,a,i,r),e},data_uri:function(){var t=(0,o.default)(this.yearMonth+"-01").format("YYYYMMDD"),e=(0,o.default)(this.yearMonth+"-"+(0,o.default)(this.yearMonth).daysInMonth()).format("YYYYMMDD"),a=this.group,n="";return this.bids.length&&(n=l.default.sprintf("&bid=[In,%s]",this.bids.join(","))),l.default.sprintf("%s?group=eid,sale_role_did&create_time=[between,%s,%s]%s",a,t,e,n)}}}}});
//# sourceMappingURL=24.10513b2389a630e95aa7.js.map