webpackJsonp([30],{291:function(s,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t(371),o=t(409),i=t(16),r=i(a.a,o.a,!1,null,null,null);r.options.__file="src/views/business/clients/dbinstall-modal.vue",e.default=r.exports},371:function(s,e,t){"use strict";var a=t(5),o=t(0),i=(t.n(o),t(201),t(198)),r=t(200),n=t(199);e.a={mixins:[n.a,i.a,r.a],components:{},data:function(){return{info:{},db:{cid:0,ds_id:0,host:"",database:"",username:"",password:""},rules:{database:[{required:!0,message:"请输入数据库名",trigger:"blur"}],username:[{required:!0,message:"请输入数据库用户名",trigger:"blur"}],password:[{required:!0,message:"请输入数据库密码",trigger:"blur"}]}}},watch:{},mounted:function(){},methods:{setInfo:function(s){return this.info=a.a.copy(s),this.db.cid=this.info.cid,this.db.host=this.info.host,this.db.database="x360p_"+this.info.host,this.db.username=this.info.host+"_root",this.db.password=a.a.random(10),this},cancel:function(){this.close(),this.info={},this.$form("form").reset()},ok:function(){var s=this;this.$rest("clients").add_url_param(this.info.cid,"doinstall").post(this.db).success(function(e){s.$Message.success("数据库安装成功!"),s.$emit("on-success"),s.close()}).error(function(e){s.$Message.error(e.body.message)})}}}},409:function(s,e,t){"use strict";var a=function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("Modal",{directives:[{name:"drag-modal",rawName:"v-drag-modal"}],attrs:{"mask-closable":!1,title:s.modal$.title,width:"450"},on:{"on-cancel":s.cancel},model:{value:s.modal$.show,callback:function(e){s.$set(s.modal$,"show",e)},expression:"modal$.show"}},[s.modal$.show?t("Form",{ref:"form",attrs:{"label-width":120,model:s.db,rules:s.rules}},[t("Form-item",{attrs:{label:"客户名称"}},[t("span",[s._v(s._s(s.info.client_name))])]),s._v(" "),t("Form-item",{attrs:{label:"二级域名"}},[t("span",[s._v(s._s(s.info.host))])]),s._v(" "),t("Form-item",{attrs:{label:"数据库服务器"}},[t("Select",{model:{value:s.db.ds_id,callback:function(e){s.$set(s.db,"ds_id",e)},expression:"db.ds_id"}},s._l(s.dbservers,function(e){return t("Option",{key:e.ds_id,attrs:{value:e.ds_id}},[s._v(s._s(e.ip)+" ("+s._s(e.db_nums)+")")])}))],1),s._v(" "),t("Form-item",{attrs:{label:"数据库名称"}},[t("Input",{attrs:{readonly:""},model:{value:s.db.database,callback:function(e){s.$set(s.db,"database",e)},expression:"db.database"}})],1),s._v(" "),t("Form-item",{attrs:{label:"数据库用户名"}},[t("Input",{model:{value:s.db.username,callback:function(e){s.$set(s.db,"username",e)},expression:"db.username"}})],1),s._v(" "),t("Form-item",{attrs:{label:"数据库密码"}},[t("Input",{model:{value:s.db.password,callback:function(e){s.$set(s.db,"password",e)},expression:"db.password"}})],1)],1):s._e(),s._v(" "),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("Button",{attrs:{type:"ghost",disabled:s.saving},on:{click:s.cancel}},[s._v("取消")]),s._v(" "),t("Button",{attrs:{type:"primary",loading:s.saving},on:{click:s.ok}},[s._v("确定")])],1)],1)},o=[];a._withStripped=!0;var i={render:a,staticRenderFns:o};e.a=i}});