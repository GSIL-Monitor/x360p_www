webpackJsonp([7],{"dl9/":function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=s("8Llf"),i=s("TVG1"),o=s("Ym9J"),r=s.n(o),n=!1,c={mixins:[e.a],data:function(){return{action:"default",year:1,num_changed:!1,order_amount:"",loading:!1,paycode:null,is_pay:!1}},mounted:function(){1==this.$store.state.client.is_init_pay?this.getPaycode():this.push("/base")},beforeDestroy:function(){n=!0},methods:{getPaycode:function(){var t=this;this.loading=!0,this.num_changed=!1,this.$http.post("paycode/charge",{year:this.year}).then(function(a){t.loading=!1,t.paycode=a.body.data,t.order_amount=t.paycode.total_fee,n=!1,t.check_order()},function(a){t.loading=!1})},push:function(t){this.$router.replace(t)},check_order:function(){var t=this;this.is_pay||n||this.$rest("orders").add_url_param(this.paycode.vo_id).get().success(function(a){1==a.pay_status?(t.is_pay=!0,t.$store.commit("addClientExpiredYear",t.year),t.success()):t.th=setTimeout(function(){t.check_order()},3e3)}).error(function(a){t.th=setTimeout(function(){t.check_order()},3e3)})},success:function(){this.action="success"},gosystem:function(){var t=this.$store.state.user.info.product_url.split("://"),a=t[0]+"://"+this.$store.state.client.host+"."+t[1];location.href=a},goalipay:function(){document.forms.alipayform.submit()}},watch:{year:function(t){this.num_changed=!0}},computed:{expire_day:function(){return this.$store.state.client.expire_day},endDate:function(){var t=1e4*this.year,a=this.$store.state.client.expire_day,s=r()().format("YYYYMMDD");return a<s&&(a=s),a+t},total:function(){var t=i.b.float(this.$store.state.client.init_renew_amount)+i.b.float(this.$store.state.client.add_renew_amount),a=this.year;return i.b.float(t*a).toFixed(2)}}},l={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",["default"==t.action?[e("div",[e("label",{staticStyle:{width:"100px",display:"inline-block"}},[t._v("续费时长")]),t._v(" "),e("InputNumber",{attrs:{min:1,max:3},model:{value:t.year,callback:function(a){t.year=a},expression:"year"}}),t._v(" "),e("span",[t._v("（年）")]),t._v(" "),t.num_changed?e("Button",{attrs:{type:"default"},on:{click:t.getPaycode}},[t._v("确定")]):t._e(),t._v(" "),t.loading||""==t.order_amount?t._e():e("span",{staticClass:"money pull-right"},[t._v("￥"+t._s(t.order_amount))]),t._v(" "),e("p",{staticClass:"mt-2",staticStyle:{"text-indent":"100px"}},[t._v("（到期日期："+t._s(t._f("int_date")(t.endDate))+"）")])],1),t._v(" "),e("p",{staticClass:"mt-3"},[t._v("如果您对以上费用信息有疑问，请停止操作，并直接联系您的客服顾问")]),t._v(" "),t.loading?e("div",{staticClass:"rel-box"},[e("Spin",{attrs:{fix:""}},[t._v("正在加载付款方式，请稍等...")])],1):[e("h2",{staticClass:"m-b"},[e("Icon",{attrs:{type:"qr-scanner"}}),t._v(" "),e("strong",[t._v("请选择任意一种方式付款")])],1),t._v(" "),e("Row",[t.paycode&&""!=t.paycode.wxpay_qr_url?e("Col",{attrs:{span:"12"}},[e("div",{staticClass:"pay-code"},[e("img",{staticClass:"t",attrs:{src:s("w5+p")}}),t._v(" "),e("img",{staticClass:"qr",attrs:{src:"/vipapi/open/qrcode?uri="+t.paycode.wxpay_qr_url}}),t._v(" "),e("p",[t._v("请直接用微信扫码付款")])])]):t._e(),t._v(" "),t.paycode&&""!=t.paycode.alipay_qr_url?e("Col",{attrs:{span:"12"}},[e("div",{staticClass:"pay-code"},[e("img",{staticClass:"t",attrs:{src:s("dpI2")}}),t._v(" "),e("img",{staticClass:"qr",attrs:{src:"/vipapi/open/qrcode?uri="+t.paycode.wxpay_qr_url}})])]):t._e(),t._v(" "),t.paycode&&""!=t.paycode.alipay_html?e("Col",{attrs:{span:"12"}},[e("div",{staticClass:"pay-code"},[e("img",{staticClass:"t",attrs:{src:s("dpI2")}}),t._v(" "),e("img",{staticClass:"qr border",attrs:{src:s("7/84")}}),t._v(" "),e("Button",{staticClass:"pay-btn",attrs:{type:"primary"},on:{click:t.goalipay}},[t._v("请点击付款")])],1),t._v(" "),e("div",{staticClass:"pay-form",domProps:{innerHTML:t._s(t.paycode.alipay_html)}})]):t._e()],1)]]:t._e(),t._v(" "),"success"==t.action?[e("Alert",{attrs:{type:"success","show-icon":""}},[t._v("\n\t        续费成功\n\t        "),e("div",{attrs:{slot:"desc"},slot:"desc"},[e("p",[t._v("您已经完成缴费，并成功将系统续期"),e("span",{staticClass:"important"},[t._v(t._s(t.year))]),t._v("年，您的系统新的有效期是 "),e("span",{staticClass:"important"},[t._v(t._s(t._f("int_date")(t.expire_day)))]),t._v("。")]),t._v(" "),e("Button",{attrs:{type:"ghost",size:"small",icon:"log-in"},on:{click:t.gosystem}},[t._v("前往登录")])],1)])]:t._e()],2)},staticRenderFns:[]},_=s("8AGX")(c,l,!1,null,null,null);a.default=_.exports}});
//# sourceMappingURL=7.6298d6c96fbd537cd905.js.map