{"version":3,"sources":["webpack:///src/views/expand.vue","webpack:///./src/views/expand.vue?e355","webpack:///./src/views/expand.vue"],"names":["CLEAR_TIMEOUT","expand","common_mixin","getPaycode","_this","this","num","then","response","data","total_fee","check_order","uri","_this2","vo_id","get","success","year","error","product_url","url","submit","account_num_limit","views_expand","render","_vm","_h","$createElement","_c","_self","action","staticStyle","width","display","_v","attrs","min","max","model","value","callback","$$v","expression","type","on","click","_e","loading","order_amount","staticClass","_s","text-indent","total_num_limit","fix","amount","paycode","wxpay_qr_url","span","src","__webpack_require__","alipay_qr_url","alipay_html","goalipay","domProps","innerHTML","show-icon","slot","accont_num_limit","size","icon","gosystem","staticRenderFns","Component","normalizeComponent","__webpack_exports__"],"mappings":"uHA8DAA,wBAAA,GACAC,WAEAC,EAAA,iCAGA,cACA,eACA,eACA,YACA,UACA,aAEA,oEAOAC,uBAHA,sCAOA,kCAGA,IAAAC,EAAAC,mBACA,oBACA,8CACAC,MAAAC,KAAA,SAAAC,cAGA,mBACAC,8BACAC,aACA,IACAC,sCAEA,2CAIAC,2BAEA,IAAAC,EAAAR,qEAIAS,OACAC,MAAAC,QAAA,SAAAP,8BAGA,+CACAQ,QACAD,wCAGAL,eAEA,OAEAO,MAAA,SAAAV,gCAGAG,eAEA,uCAIA,iEAGAQ,kBACA,wDACA,iBACAC,iDAGAC,oDAKA,2EAKAC,qGAGAhB,OCxJAiB,GADiBC,OAFjB,WAA0B,IAAAC,EAAApB,KAAaqB,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,kBAAAH,EAAAK,QAAAF,EAAA,OAAAA,EAAA,SAAkEG,aAAaC,MAAA,QAAAC,QAAA,kBAA0CR,EAAAS,GAAA,UAAAT,EAAAS,GAAA,KAAAN,EAAA,eAAiDO,OAAOC,IAAA,EAAAC,IAAA,KAAmBC,OAAQC,MAAAd,EAAA,IAAAe,SAAA,SAAAC,GAAyChB,EAAAnB,IAAAmC,GAAYC,WAAA,SAAmBjB,EAAAS,GAAA,KAAAN,EAAA,QAAAH,EAAAS,GAAA,YAAAT,EAAAS,GAAA,KAAAT,EAAA,YAAAG,EAAA,UAAuFO,OAAOQ,KAAA,WAAiBC,IAAKC,MAAApB,EAAAtB,cAAwBsB,EAAAS,GAAA,QAAAT,EAAAqB,KAAArB,EAAAS,GAAA,KAAAT,EAAAsB,SAAA,IAAAtB,EAAAuB,aAAyHvB,EAAAqB,KAAzHlB,EAAA,QAA0FqB,YAAA,qBAA+BxB,EAAAS,GAAA,IAAAT,EAAAyB,GAAAzB,EAAAuB,iBAAAvB,EAAAS,GAAA,KAAAN,EAAA,KAAsEqB,YAAA,OAAAlB,aAAgCoB,cAAA,WAAuB1B,EAAAS,GAAA,UAAAT,EAAAyB,GAAAzB,EAAA2B,iBAAA,WAAA3B,EAAAS,GAAA,KAAAN,EAAA,KAA8EqB,YAAA,SAAmBxB,EAAAS,GAAA,qCAAAT,EAAAS,GAAA,KAAAT,EAAA,QAAAG,EAAA,OAAkFqB,YAAA,YAAsBrB,EAAA,QAAaO,OAAOkB,IAAA,MAAU5B,EAAAS,GAAA,qBAAAT,EAAAS,GAAA,KAAAN,EAAA,QAAqDqB,YAAA,UAAoBxB,EAAAS,GAAA,IAAAT,EAAAyB,GAAAzB,EAAA6B,YAAA,IAAA1B,EAAA,MAAiDqB,YAAA,QAAkBrB,EAAA,QAAaO,OAAOQ,KAAA,gBAAqBlB,EAAAS,GAAA,KAAAN,EAAA,UAAAH,EAAAS,GAAA,qBAAAT,EAAAS,GAAA,KAAAN,EAAA,OAAAH,EAAA8B,SAAA,IAAA9B,EAAA8B,QAAAC,aAAA5B,EAAA,OAAuIO,OAAOsB,KAAA,QAAa7B,EAAA,OAAYqB,YAAA,aAAuBrB,EAAA,OAAYqB,YAAA,IAAAd,OAAuBuB,IAAAC,EAAA,WAAuClC,EAAAS,GAAA,KAAAN,EAAA,OAAwBqB,YAAA,KAAAd,OAAwBuB,IAAA,2BAAAjC,EAAA8B,QAAAC,gBAA2D/B,EAAAS,GAAA,KAAAN,EAAA,KAAAH,EAAAS,GAAA,oBAAAT,EAAAqB,KAAArB,EAAAS,GAAA,KAAAT,EAAA8B,SAAA,IAAA9B,EAAA8B,QAAAK,cAAAhC,EAAA,OAAiIO,OAAOsB,KAAA,QAAa7B,EAAA,OAAYqB,YAAA,aAAuBrB,EAAA,OAAYqB,YAAA,IAAAd,OAAuBuB,IAAAC,EAAA,WAAwClC,EAAAS,GAAA,KAAAN,EAAA,OAAwBqB,YAAA,KAAAd,OAAwBuB,IAAA,2BAAAjC,EAAA8B,QAAAC,oBAA2D/B,EAAAqB,KAAArB,EAAAS,GAAA,KAAAT,EAAA8B,SAAA,IAAA9B,EAAA8B,QAAAM,YAAAjC,EAAA,OAAoFO,OAAOsB,KAAA,QAAa7B,EAAA,OAAYqB,YAAA,aAAuBrB,EAAA,OAAYqB,YAAA,IAAAd,OAAuBuB,IAAAC,EAAA,WAAwClC,EAAAS,GAAA,KAAAN,EAAA,OAAwBqB,YAAA,YAAAd,OAA+BuB,IAAAC,EAAA,WAAoClC,EAAAS,GAAA,KAAAN,EAAA,UAA2BqB,YAAA,UAAAd,OAA6BQ,KAAA,WAAiBC,IAAKC,MAAApB,EAAAqC,YAAsBrC,EAAAS,GAAA,eAAAT,EAAAS,GAAA,KAAAN,EAAA,OAA8CqB,YAAA,WAAAc,UAAiCC,UAAAvC,EAAAyB,GAAAzB,EAAA8B,QAAAM,kBAA6CpC,EAAAqB,MAAA,KAAArB,EAAAqB,KAAArB,EAAAS,GAAA,gBAAAT,EAAAK,QAAAF,EAAA,SAA+EO,OAAOQ,KAAA,UAAAsB,YAAA,MAAiCxC,EAAAS,GAAA,gCAAAN,EAAA,OAAmDO,OAAO+B,KAAA,QAAcA,KAAA,SAAatC,EAAA,KAAAH,EAAAS,GAAA,oBAAAN,EAAA,QAAgDqB,YAAA,cAAwBxB,EAAAS,GAAAT,EAAAyB,GAAAzB,EAAAR,SAAAQ,EAAAS,GAAA,mBAAAN,EAAA,QAAkEqB,YAAA,cAAwBxB,EAAAS,GAAAT,EAAAyB,GAAAzB,EAAA0C,qBAAA1C,EAAAS,GAAA,OAAAT,EAAAS,GAAA,KAAAN,EAAA,UAAgFO,OAAOQ,KAAA,QAAAyB,KAAA,QAAAC,KAAA,UAA8CzB,IAAKC,MAAApB,EAAA6C,YAAsB7C,EAAAS,GAAA,iBAAAT,EAAAqB,MAAA,IAE13FyB,oBCYjBC,EAdAb,EAAA,OAcAc,CACAxE,EACAsB,GATA,EAEA,KAEA,KAEA,MAUAmD,EAAA,QAAAF,EAAA","file":"static/js/8.b2a02a01b5249fe608b0.js","sourcesContent":["<template>\r\n\t<div>\t\t\r\n\t\t<template v-if=\"action == 'default'\">\r\n\t\t<div>\r\n\t\t\t<label style=\"width:100px;display: inline-block;\">扩充容量</label>\r\n\t\t\t<InputNumber v-model=\"num\" :min=\"1\" :max=\"1000\"></InputNumber>\r\n\t\t\t<span>（账号许可）</span>\r\n\t\t\t<Button type=\"default\" @click=\"getPaycode\" v-if=\"num_changed\">确定</Button>\r\n\t\t\t<span class=\"money pull-right\" v-if=\"!loading && order_amount != ''\">￥{{order_amount}}</span>\r\n\t\t\t<p class=\"mt-2\" style=\"text-indent: 100px;\">（总账号许可：{{total_num_limit}}）</p>\t\t\t\r\n\t\t</div>\r\n\t\t<p class=\"mt-3\">如果您对以上费用信息有疑问，请停止操作，并直接联系您的客服顾问</p>\r\n\t\t\t<div class=\"rel-box\" v-if=\"loading\">\r\n\t\t        <Spin fix>正在加载付款方式，请稍等...</Spin>\r\n\t\t\t\t<span class=\"money\">￥{{amount}}</span>\r\n\t\t    </div>\r\n\t\t    <template v-else>\r\n\t\t    \t<h2 class=\"m-b\">\r\n\t\t            <Icon type=\"qr-scanner\"></Icon>\r\n\t\t            <strong>请选择任意一种方式付款</strong>\r\n\t\t        </h2>\r\n\t\t        <Row>\r\n\t\t        \t<Col span=\"12\" v-if=\"paycode && paycode.wxpay_qr_url != ''\">\r\n\t\t        \t\t<div class=\"pay-code\">\r\n\t\t        \t\t\t<img class=\"t\" src=\"../img/pay_wxpay.png\">\r\n\t\t        \t\t\t<img class=\"qr\" :src=\"'/vipapi/open/qrcode?uri='+paycode.wxpay_qr_url\">\r\n\t\t        \t\t\t<p>请直接用微信扫码付款</p>\r\n\t\t        \t\t</div>\r\n\t\t        \t</Col>\r\n\t\t        \t<Col span=\"12\" v-if=\"paycode && paycode.alipay_qr_url != ''\">\r\n\t\t        \t\t<div class=\"pay-code\">\r\n\t\t        \t\t\t<img class=\"t\" src=\"../img/pay_alipay.png\">\r\n\t\t        \t\t\t<img class=\"qr\" :src=\"'/vipapi/open/qrcode?uri='+paycode.wxpay_qr_url\">\r\n\t\t        \t\t</div>\r\n\t\t        \t</Col>\r\n\t\t        \t<Col span=\"12\" v-if=\"paycode && paycode.alipay_html != ''\">\r\n\t\t        \t\t<div class=\"pay-code\">\r\n\t\t        \t\t\t<img class=\"t\" src=\"../img/pay_alipay.png\">\r\n\t\t        \t\t\t<img class=\"qr border\" src=\"../img/alipay.png\">\r\n\t\t\t\t\t\t\t<Button class=\"pay-btn\" type=\"primary\" @click=\"goalipay\">请点击付款</Button>\r\n\t\t        \t\t</div>\r\n\t\t        \t\t<div class=\"pay-form\" v-html=\"paycode.alipay_html\">\r\n\t\t        \t\t</div>\r\n\t\t        \t</Col>\r\n\t\t        </Row>\r\n\t\t    </template>\r\n\t\t</template>\r\n\t\t<template v-if=\"action == 'success'\">\r\n\t\t\t<Alert type=\"success\" show-icon>\r\n\t\t        扩容成功\r\n\t\t        <div slot=\"desc\">\r\n\t\t        \t<p>您已经完成缴费，并成功将系统扩容<span class=\"important\">{{year}}</span>年，您的系统新的账号许可数是 <span class=\"important\">{{accont_num_limit}}</span>。</p>\r\n\t\t        \t<Button type=\"ghost\" size=\"small\" @click=\"gosystem\" icon=\"log-in\">前往登录</Button> </div>\r\n\t\t    </Alert>\r\n\t\t</template>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport common from '@/libs/common.mixin'\r\n\timport util from '@/libs/util'\r\n\timport moment from 'moment'\r\n\r\n\tlet CLEAR_TIMEOUT = false\r\n\texport default{\r\n\t\tmixins:[common],\r\n\t\tdata () {\r\n\t\t\treturn {\r\n\t\t\t\taction:'default',\r\n\t\t\t\tnum: 1,\r\n\t\t\t\tnum_changed:false,\r\n\t\t\t\torder_amount:'',\r\n\t\t\t\tloading:false,\r\n\t\t\t\tpaycode:null,\r\n\t\t\t\tis_pay:false\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted(){\r\n\t\t\tif(this.$store.state.client.is_init_pay != 1){\r\n\t\t\t\tthis.push('/base')\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tthis.getPaycode()\r\n\t\t},\r\n\t\tbeforeDestroy(){\r\n\t\t\tCLEAR_TIMEOUT = true\r\n\t\t\t\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tgetPaycode(){\r\n\t\t\t\tthis.loading = true\r\n\t\t\t\tthis.num_changed = false\r\n\t\t\t\tthis.$http.post('paycode/expand',{nums:this.num})\r\n\t\t\t\t.then(response=>{\r\n\t\t\t\t\tthis.loading = false\r\n\r\n\t\t\t\t\tthis.paycode = response.body.data\r\n\t\t\t\t\tthis.order_amount = this.paycode.total_fee\r\n\t\t\t\t\tCLEAR_TIMEOUT = false\r\n\t\t\t\t\tthis.check_order()\r\n\t\t\t\t},response=>{\r\n\t\t\t\t\tthis.loading = false\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tpush (uri) {\r\n\t\t\t\tthis.$router.replace(uri)\r\n\t\t\t},\r\n\t\t\tcheck_order(){\r\n\t\t\t\tif(this.is_pay || CLEAR_TIMEOUT){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.$rest('orders').add_url_param(this.paycode.vo_id)\r\n\t\t\t\t.get()\r\n\t\t\t\t.success(data=>{\r\n\t\t\t\t\tif(data.pay_status == 1){\r\n\t\t\t\t\t\tthis.is_pay = true\r\n\t\t\t\t\t\tthis.$store.commit('addClientAccountLimitNum',this.year)\r\n\t\t\t\t\t\tthis.success()\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.th = setTimeout(()=>{\r\n\t\t\t\t\t\t\tthis.check_order()\r\n\t\t\t\t\t\t},3000)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.error(response=>{\r\n\t\t\t\t\tthis.th = setTimeout(()=>{\r\n\t\t\t\t\t\tthis.check_order()\r\n\t\t\t\t\t},3000)\r\n\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tsuccess(){\r\n\t\t\t\tthis.action = 'success'\r\n\t\t\t},\r\n\t\t\tgosystem(){\r\n\t\t\t\tlet product_url = this.$store.state.user.info.product_url\r\n\t\t\t\tlet arr_url = product_url.split('://')\r\n\t\t\t\tlet url = arr_url[0]+'://'+this.$store.state.client.host+'.'+arr_url[1]\r\n\t\t\t\tlocation.href = url\r\n\t\t\t},\r\n\t\t\tgoalipay(){\r\n\t\t\t\tdocument.forms['alipayform'].submit()\r\n\t\t\t}\r\n\t\t},\r\n\t\twatch:{\r\n\t\t\tnum(val){\r\n\t\t\t\tthis.num_changed = true\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\taccount_num_limit(){\r\n\t\t\t\treturn this.$store.state.client.account_num_limit\r\n\t\t\t},\r\n\t\t\ttotal_num_limit () {\t\t\t\t\r\n\t\t\t\treturn this.$store.state.client.account_num_limit + this.num\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/expand.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.action == 'default')?[_c('div',[_c('label',{staticStyle:{\"width\":\"100px\",\"display\":\"inline-block\"}},[_vm._v(\"扩充容量\")]),_vm._v(\" \"),_c('InputNumber',{attrs:{\"min\":1,\"max\":1000},model:{value:(_vm.num),callback:function ($$v) {_vm.num=$$v},expression:\"num\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"（账号许可）\")]),_vm._v(\" \"),(_vm.num_changed)?_c('Button',{attrs:{\"type\":\"default\"},on:{\"click\":_vm.getPaycode}},[_vm._v(\"确定\")]):_vm._e(),_vm._v(\" \"),(!_vm.loading && _vm.order_amount != '')?_c('span',{staticClass:\"money pull-right\"},[_vm._v(\"￥\"+_vm._s(_vm.order_amount))]):_vm._e(),_vm._v(\" \"),_c('p',{staticClass:\"mt-2\",staticStyle:{\"text-indent\":\"100px\"}},[_vm._v(\"（总账号许可：\"+_vm._s(_vm.total_num_limit)+\"）\")])],1),_vm._v(\" \"),_c('p',{staticClass:\"mt-3\"},[_vm._v(\"如果您对以上费用信息有疑问，请停止操作，并直接联系您的客服顾问\")]),_vm._v(\" \"),(_vm.loading)?_c('div',{staticClass:\"rel-box\"},[_c('Spin',{attrs:{\"fix\":\"\"}},[_vm._v(\"正在加载付款方式，请稍等...\")]),_vm._v(\" \"),_c('span',{staticClass:\"money\"},[_vm._v(\"￥\"+_vm._s(_vm.amount))])],1):[_c('h2',{staticClass:\"m-b\"},[_c('Icon',{attrs:{\"type\":\"qr-scanner\"}}),_vm._v(\" \"),_c('strong',[_vm._v(\"请选择任意一种方式付款\")])],1),_vm._v(\" \"),_c('Row',[(_vm.paycode && _vm.paycode.wxpay_qr_url != '')?_c('Col',{attrs:{\"span\":\"12\"}},[_c('div',{staticClass:\"pay-code\"},[_c('img',{staticClass:\"t\",attrs:{\"src\":require(\"../img/pay_wxpay.png\")}}),_vm._v(\" \"),_c('img',{staticClass:\"qr\",attrs:{\"src\":'/vipapi/open/qrcode?uri='+_vm.paycode.wxpay_qr_url}}),_vm._v(\" \"),_c('p',[_vm._v(\"请直接用微信扫码付款\")])])]):_vm._e(),_vm._v(\" \"),(_vm.paycode && _vm.paycode.alipay_qr_url != '')?_c('Col',{attrs:{\"span\":\"12\"}},[_c('div',{staticClass:\"pay-code\"},[_c('img',{staticClass:\"t\",attrs:{\"src\":require(\"../img/pay_alipay.png\")}}),_vm._v(\" \"),_c('img',{staticClass:\"qr\",attrs:{\"src\":'/vipapi/open/qrcode?uri='+_vm.paycode.wxpay_qr_url}})])]):_vm._e(),_vm._v(\" \"),(_vm.paycode && _vm.paycode.alipay_html != '')?_c('Col',{attrs:{\"span\":\"12\"}},[_c('div',{staticClass:\"pay-code\"},[_c('img',{staticClass:\"t\",attrs:{\"src\":require(\"../img/pay_alipay.png\")}}),_vm._v(\" \"),_c('img',{staticClass:\"qr border\",attrs:{\"src\":require(\"../img/alipay.png\")}}),_vm._v(\" \"),_c('Button',{staticClass:\"pay-btn\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.goalipay}},[_vm._v(\"请点击付款\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"pay-form\",domProps:{\"innerHTML\":_vm._s(_vm.paycode.alipay_html)}})]):_vm._e()],1)]]:_vm._e(),_vm._v(\" \"),(_vm.action == 'success')?[_c('Alert',{attrs:{\"type\":\"success\",\"show-icon\":\"\"}},[_vm._v(\"\\n\\t        扩容成功\\n\\t        \"),_c('div',{attrs:{\"slot\":\"desc\"},slot:\"desc\"},[_c('p',[_vm._v(\"您已经完成缴费，并成功将系统扩容\"),_c('span',{staticClass:\"important\"},[_vm._v(_vm._s(_vm.year))]),_vm._v(\"年，您的系统新的账号许可数是 \"),_c('span',{staticClass:\"important\"},[_vm._v(_vm._s(_vm.accont_num_limit))]),_vm._v(\"。\")]),_vm._v(\" \"),_c('Button',{attrs:{\"type\":\"ghost\",\"size\":\"small\",\"icon\":\"log-in\"},on:{\"click\":_vm.gosystem}},[_vm._v(\"前往登录\")])],1)])]:_vm._e()],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.6.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-8e4a810c\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.6.2@vue-loader/lib/selector.js?type=template&index=0!./src/views/expand.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../node_modules/_vue-loader@13.6.2@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/_vue-loader@13.6.2@vue-loader/lib/selector?type=script&index=0!./expand.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/_vue-loader@13.6.2@vue-loader/lib/selector?type=script&index=0!./expand.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/_vue-loader@13.6.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-8e4a810c\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/_vue-loader@13.6.2@vue-loader/lib/selector?type=template&index=0!./expand.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/expand.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}