webpackJsonp([6],{T2hp:function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=!1,e={mixins:[i("8Llf").a],data:function(){return{action:"default",paycode:null,is_pay:!1,th:null,loading:!1}},computed:{user:function(){return this.$store.state.user},client:function(){return this.$store.state.client},user_used_percent:function(){return 100*this.client.account_num_current/this.client.account_num_limit}},beforeDestroy:function(){a=!0},methods:{init_pay:function(){var t=this;this.action="init_pay",this.loading=!0,this.$http.get("paycode/initpay").then(function(s){t.loading=!1,t.paycode=s.body.data,a=!1,t.check_order()},function(s){t.loading=!1})},check_order:function(){var t=this;this.is_pay||a||this.$rest("orders").add_url_param(this.paycode.vo_id).get().success(function(s){1==s.pay_status?(t.is_pay=!0,t.$store.commit("setClientInitPaied"),t.success()):t.th=setTimeout(function(){t.check_order()},1e3)}).error(function(s){t.th=setTimeout(function(){t.check_order()},1e3)})},success:function(){this.action="success"},gosystem:function(){var t=this.$store.state.user.info.product_url.split("://"),s=t[0]+"://"+this.$store.state.client.host+"."+t[1];location.href=s},goalipay:function(){document.forms.alipayform.submit()}}},n={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",["default"==this.action?[1!=this.client.is_init_pay?s("Alert",{attrs:{type:"warning","show-icon":""}},[this._v("\n\t       您的系统还没有开通，请点击下面的“立即开通”按钮进行开通操作\n\t    ")]):this._e(),this._v(" "),s("Form",{attrs:{"label-width":100}},[s("Form-item",{attrs:{label:"开通状态："}},[1==this.client.is_init_pay?[s("Tag",{attrs:{color:"green"}},[this._v("开通")]),this._v(" "),s("Button",{attrs:{type:"ghost",size:"small",icon:"log-in"},on:{click:this.gosystem}},[this._v("前往登录")])]:[s("Tag",{attrs:{color:"red"}},[this._v("待开通")]),this._v(" "),s("Button",{attrs:{type:"primary",icon:"unlocked",size:"small"},on:{click:this.init_pay}},[this._v("立即开通")])]],2),this._v(" "),s("Form-item",{attrs:{label:"机构名称："}},[this._v("\n\t\t\t\t"+this._s(this.client.client_name)+"\n\t\t\t")]),this._v(" "),s("Form-item",{attrs:{label:"入驻日期："}},[this._v("\n\t\t\t\t"+this._s(this._f("short_date")(this.client.create_time))+"\n\t\t\t\t"),s("label",{staticStyle:{"margin-left":"30px"}},[this._v("到期时间：")]),this._v("\n\t\t\t\t"+this._s(this._f("int_date")(this.client.expire_day))+"\n\t\t\t")]),this._v(" "),s("Form-item",{attrs:{label:"账号容量："}},[s("Progress",{attrs:{percent:this.user_used_percent,"stroke-width":15}},[this._v(this._s(this.client.account_num_current)+"/"+this._s(this.client.account_num_limit))])],1),this._v(" "),s("Form-item",{attrs:{label:"联系人："}},[this._v("\n\t\t\t\t"+this._s(this.client.contact)+"\n\t\t\t")]),this._v(" "),s("Form-item",{attrs:{label:"联系方式："}},[this._v("\n\t\t\t\t"+this._s(this.client.tel)+"\n\t\t\t")]),this._v(" "),s("Form-item",{attrs:{label:"学校地址："}},[this._v("\n\t\t\t\t"+this._s(this.client.address)+"\n\t\t\t")])],1),this._v(" "),s("Card",{staticStyle:{width:"160px"}},[s("div",{staticClass:"card-item"},[s("div",{staticClass:"avatar"},[s("img",{attrs:{src:this.client.saleman.user.avatar}})]),this._v(" "),s("p",{staticClass:"mt-2"},[this._v("\n\t\t\t\t\t业务经理\n\t\t\t\t\t"),s("span",{staticClass:"ml-3"},[this._v("\n\t\t\t\t\t\t"+this._s(this.client.saleman.name)+"\n\t\t\t\t\t")])]),this._v(" "),s("p",[this._v(this._s(this.client.saleman.mobile))])])])]:this._e(),this._v(" "),"success"==this.action?[s("Alert",{attrs:{type:"success","show-icon":""}},[this._v("\n\t        开通成功\n\t        "),s("div",{attrs:{slot:"desc"},slot:"desc"},[s("p",[this._v("您已经完成缴费，并成功开通系统，您现在可以正常的使用系统，请使用您的管理员账号进行登录，并完成系统初始化设置工作。")]),this._v(" "),s("Button",{attrs:{type:"ghost",size:"small",icon:"log-in"},on:{click:this.gosystem}},[this._v("前往登录")])],1)])]:this._e(),this._v(" "),"init_pay"==this.action?[s("Form",{attrs:{"label-width":100}},[s("Form-item",{attrs:{label:"机构名称："}},[this._v("\n\t\t\t\t"+this._s(this.client.client_name)+"\n\t\t\t")]),this._v(" "),s("Form-item",{attrs:{label:"账号数："}},[this._v("\n\t\t\t\t"+this._s(this.client.account_num_limit)+"\n\t\t\t")]),this._v(" "),s("Form-item",{attrs:{label:"需缴费金额："}},[s("span",{staticClass:"amount"},[this._v("￥"+this._s(this.client.init_amount))])])],1),this._v(" "),this.loading?s("div",{staticClass:"rel-box"},[s("Spin",{attrs:{fix:""}},[this._v("正在加载付款方式，请稍等...")])],1):[s("h2",{staticClass:"m-b"},[s("Icon",{attrs:{type:"qr-scanner"}}),this._v(" "),s("strong",[this._v("请选择任意一种方式付款")])],1),this._v(" "),s("Row",[this.paycode&&""!=this.paycode.wxpay_qr_url?s("Col",{attrs:{span:"12"}},[s("div",{staticClass:"pay-code"},[s("img",{staticClass:"t",attrs:{src:i("w5+p")}}),this._v(" "),s("img",{staticClass:"qr",attrs:{src:"/vipapi/open/qrcode?uri="+this.paycode.wxpay_qr_url}}),this._v(" "),s("p",[this._v("请直接用微信扫码付款")])])]):this._e(),this._v(" "),this.paycode&&""!=this.paycode.alipay_qr_url?s("Col",{attrs:{span:"12"}},[s("div",{staticClass:"pay-code"},[s("img",{staticClass:"t",attrs:{src:i("dpI2")}}),this._v(" "),s("img",{staticClass:"qr",attrs:{src:"/vipapi/open/qrcode?uri="+this.paycode.wxpay_qr_url}})])]):this._e(),this._v(" "),this.paycode&&""!=this.paycode.alipay_html?s("Col",{attrs:{span:"12"}},[s("div",{staticClass:"pay-code"},[s("img",{staticClass:"t",attrs:{src:i("dpI2")}}),this._v(" "),s("img",{staticClass:"qr border",attrs:{src:i("7/84")}}),this._v(" "),s("Button",{staticClass:"pay-btn",attrs:{type:"primary"},on:{click:this.goalipay}},[this._v("请点击付款")])],1),this._v(" "),s("div",{staticClass:"pay-form",domProps:{innerHTML:this._s(this.paycode.alipay_html)}})]):this._e()],1)]]:this._e()],2)},staticRenderFns:[]},c=i("8AGX")(e,n,!1,function(t){i("xHxG")},null,null);s.default=c.exports},xHxG:function(t,s){}});
//# sourceMappingURL=6.cd67663b8a78cefb5567.js.map